<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>web/front/ArticleList.tsx - Ciro Santilli</title>
<meta property="og:title" content="web/front/ArticleList.tsx - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://docs.ourbigbook.com/_raw/logo.svg">
<meta property="og:url" content="https://docs.ourbigbook.com/_file/web/front/ArticleList.tsx">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<style>@import "../../../_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="../../../_raw/main.css">
<link rel="shortcut icon" href="../../../_raw/logo.svg">
</head>
<body>
<header
<div class="brand-group">
<a href="../../../" class="brand"><img src="../../../_raw/logo.svg" alt="OurBigBook logo">OurBigBook Docs</a>
<a href="https://ourbigbook.com" class="brand"><img src="../../../_raw/logo.svg" alt="OurBigBook logo"><span class="mobile-hide">OurBigBook.com</span><span class="mobile-show">Site</span></a>
<a href="https://github.com/ourbigbook/ourbigbook"><i class="fab fa-github fa-fw icon"></i> Source code</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="file/web/front/ArticleList.tsx"><div class="notnav"><span class="file" title="This article is about a file." /><h1><a href="">web/front/ArticleList.tsx</a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav file"><b> <a href="../../../_dir">(root)</a> / <a href="../../../_dir/web">web</a> / <a href="../../../_dir/web/front">front</a> / <a href="../../../_raw/web/front/ArticleList.tsx">ArticleList.tsx</a></b></div></nav></div><div class="p"><b>web/front/ArticleList.tsx</b></div><div class="code"><div><pre><code>import React from 'react'
import Link from 'next/link'
import Router, { useRouter } from 'next/router'

import lodash from 'lodash'

import CustomLink from 'front/CustomLink'
import LikeArticleButton from 'front/LikeArticleButton'
import Pagination, { PaginationPropsUrlFunc } from 'front/Pagination'
import ShowBody from 'front/ShowBody'
import UserLinkWithImage from 'front/UserLinkWithImage'
import {
  AnnounceIcon,
  ArticleCreatedUpdatedPills,
  ArticleIcon,
  DiscussionIcon,
  LikeIcon,
  TimeIcon,
  TopicIcon,
  UnlistedIcon,
  UserIcon,
  getShortFragFromLongForPath,
  shortFragGoTo,
} from 'front'
import {
  articleLimit,
} from 'front/config'
import routes from 'front/routes'
import { ArticleType } from 'front/types/ArticleType'
import { ItemBody } from 'front/ItemBody'
import { IssueType } from 'front/types/IssueType'
import { TopicType } from 'front/types/TopicType'
import { UserType } from 'front/types/UserType'

import { encodeGetParams, QUERY_FALSE_VAL, QUERY_TRUE_VAL } from 'ourbigbook/web_api'
import {
  AT_MENTION_CHAR,
  UNICODE_SEARCH_CHAR,
  formatDate,
} from 'ourbigbook'
import {
  USER_FINISHED_TYPING_MS
} from 'ourbigbook/runtime_common'

function getKey(
  itemType: string,
  article,
  issueArticle=undefined
) {
  if (itemType === 'discussion') {
    let curIssueArticle
    if (issueArticle) {
      curIssueArticle = issueArticle
    } else {
      curIssueArticle = article.article
    }
    return `${article.number}/${curIssueArticle.slug}`
  } else {
    return itemType === 'article' ? article.slug :
           itemType === 'like' ? `${article.likedBy.username}/${article.slug}` :
           article.topicId
  }
}

export type ArticleListProps = {
  // TODO not ideal. Only Articles are really possible. This is to appease ArticleList.
  articles: (ArticleType &amp; IssueType &amp; TopicType)[];
  articlesCount: number;
  followed?: boolean;
  handleShortFragmentSkipOnce?: React.MutableRefObject&lt;boolean&gt;;
  hasUnlisted?: boolean;
  issueArticle?: ArticleType;
  itemType?: 'article' | 'discussion' | 'like' | 'topic';
  list?: boolean;
  loggedInUser?: UserType,
  page?: number;
  paginationUrlFunc?: PaginationPropsUrlFunc;
  showAuthor: boolean;
  showBody?: boolean,
  showControls?: boolean;
  showFullBody?: boolean,
  what?: string;
}

const ArticleList = ({
  articles,
  articlesCount,
  followed=false,
  itemType='article',
  handleShortFragmentSkipOnce,
  hasUnlisted,
  issueArticle,
  list,
  loggedInUser,
  page,
  paginationUrlFunc,
  showAuthor,
  showBody=true,
  showControls=true,
  showFullBody=false,
  what='all',
}: ArticleListProps) =&gt; {
  const router = useRouter();
  const { pathname, query } = router
  const { uid } = query;
  const itemTypeHasShowBody = itemType === 'article'
    // This almost works to have discussion body previews. The only missing problem is that
    // "render" contains full body including h1 which we don't want. We'd need to convert
    // render to be body without h1 like in Article for it to work well.
    // || itemType === 'discussion'
  let showBodyInit
  if (itemTypeHasShowBody) {
    if (query.body === QUERY_TRUE_VAL) {
      showBodyInit = true
    } else if (query.body === QUERY_FALSE_VAL) {
      showBodyInit = false
    } else {
      showBodyInit = showBody
    }
  } else {
    showBodyInit = false
  }
  const [showBodyState, setShowBodyState] = React.useState(showBodyInit)
  const [search, setSearch] = React.useState(query.search || '')
  const resetShowBodyGetString = encodeGetParams(lodash.omit(query, 'body'))
  React.useEffect(() =&gt; {
    // Reset on tab change.
    setShowBodyState(showBodyInit)
  }, [pathname, resetShowBodyGetString, showBodyInit])

  let isIssue
  let hasSearch
  switch (itemType) {
    case 'article':
      switch (what) {
        case 'all':
        case 'user-articles':
          if (followed) {
            hasSearch = false
          } else {
            hasSearch = true
          }
          break
        default:
          hasSearch = false
          break
      }
      break
    case 'discussion':
      isIssue = true
      hasSearch = false
      break
    case 'topic':
      showAuthor = false
      hasSearch = true
      break
  }
  let pagination
  let emptyMessage
  if (articles.length === 0) {
    let voice
    if (loggedInUser?.username === uid) {
      voice = "You have not"
    } else {
      voice = "This user has not"
    }
    switch (what) {
      case 'likes':
        emptyMessage = `${voice} liked any articles yet.`
        break
      case 'user-articles':
        emptyMessage = `${voice} published any articles yet.`
        break
      case 'all':
        if (followed) {
          emptyMessage = `Follow some users to see their posts here.`
        } else {
          emptyMessage = &lt;&gt;
            There are no matching {isIssue ? 'discussions' : 'articles'}{isIssue ? ' on this article' : ''}.
            {((!isIssue) || (isIssue &amp;&amp; issueArticle)) &amp;&amp;
              &lt;&gt;
                {' '}
                Why don't you
                {' '}
                &lt;CustomLink
                  href={isIssue ? routes.issueNew(issueArticle.slug) : routes.articleNew()}
                &gt;
                  create a new one
                &lt;/CustomLink&gt;?
              &lt;/&gt;
            }
          &lt;/&gt;
        }
        break
      default:
        emptyMessage = `There are currently no matching ${isIssue ? 'discussions' : itemType === 'like' ? 'likes' : 'articles'}.`
    }
  } else {
    if (showControls) {
      pagination = &lt;Pagination {...{
        currentPage: page,
        what: isIssue ? 'discussions' : itemType === 'like' ? 'likes' : itemType === 'topic' ? 'topics' : 'articles',
        itemsCount: articlesCount,
        itemsPerPage: articleLimit,
        urlFunc: paginationUrlFunc,
      }} /&gt;
    } else {
      pagination = &lt;&gt;&lt;/&gt;
    }
  }
  const aElemToMetaMap = React.useRef(new Set())
  const handleSearchI = React.useRef(0)
  let handleSearchIClosure = handleSearchI.current
  const handleSearch = (e) =&gt; {
    const search = e.target.value
    setSearch(search)
    const url = new URL(window.location.href)
    const query = Object.fromEntries(url.searchParams)
    if (search) {
      query.search = search
    } else {
      delete query.search
    }
    delete query.page
    Router.push(
      `${url.pathname}${encodeGetParams(query)}`,
      undefined,
      { shallow: true }
    )
    handleSearchI.current++
    setTimeout(() =&gt; {
      if (handleSearchIClosure + 1 === handleSearchI.current) {
        Router.push(
          `${url.pathname}${encodeGetParams(query)}`,
          undefined,
        )
      }
    }, USER_FINISHED_TYPING_MS)
  }
  return (
    &lt;div className={`article-list`}&gt;
      &lt;div className="list-nav-container"&gt;
        &lt;nav className="content-not-ourbigbook controls"&gt;
          {(hasSearch) &amp;&amp;
            &lt;input
              className="search"
              onChange={handleSearch}
              placeholder={`${UNICODE_SEARCH_CHAR} Search`}
              //ref={displayNameInputElem}
              type="text"
              value={search}
            /&gt;
          }
          {(itemTypeHasShowBody &amp;&amp; articles.length !== 0) ? &lt;ShowBody {...{ setShowBodyState, showBodyState, showBody }}/&gt; : &lt;&gt;&lt;/&gt;}
        &lt;/nav&gt;
        { (articles.length === 0)
          ? &lt;div className="list-container content-not-ourbigbook"&gt;
              {emptyMessage}
            &lt;/div&gt;
          : &lt;&gt;
              &lt;div className="content-not-ourbigbook"&gt;
                &lt;div className={`list-container${showBodyState ? ' show-body' : '' }`}&gt;
                  {showBodyState
                    ? articles?.map((article, i) =&gt; {
                        let curIssueArticle
                        if (issueArticle) {
                          curIssueArticle = issueArticle
                        } else {
                          curIssueArticle = article.article
                        }
                        return (
                          &lt;div
                            key={getKey(itemType, article) }
                            className="item"
                          &gt;
                            &lt;div className={`item-header content-not-ourbigbook${article.render ? '' : ' empty-body'}`}&gt;
                              &lt;LikeArticleButton {...{
                                article,
                                isIssue,
                                issueArticle,
                                loggedInUser,
                                showText: false,
                              }} /&gt;
                              {' '}
                              &lt;CustomLink
                                href={itemType === 'discussion' ? routes.issue(curIssueArticle.slug, article.number) :
                                      itemType === 'article' ? routes.article(article.slug) :
                                      routes.topic(article.topicId, { sort: 'score' })
                                }
                              &gt;
                                &lt;span
                                  className="ourbigbook-title title"
                                  dangerouslySetInnerHTML={{
                                    __html: itemType === 'article' ? article.titleRenderWithScope : article.titleRender
                                  }}
                                /&gt;
                              &lt;/CustomLink&gt;
                              {' '}
                              {showAuthor &amp;&amp;
                                &lt;&gt;
                                  by
                                  {' '}
                                  &lt;UserLinkWithImage showUsername={false} user={article.author} /&gt;
                                  {' '}
                                &lt;/&gt;
                              }
                              &lt;ArticleCreatedUpdatedPills article={article} /&gt;
                              {article.announcedAt &amp;&amp; &lt;&gt;
                                {' '}
                                &lt;span className="pill" title="Announced"&gt;
                                  &lt;AnnounceIcon /&gt;
                                  {' '}
                                  {formatDate(article.updatedAt)}
                                &lt;/span&gt;
                              &lt;/&gt;}
                            &lt;/div&gt;
                            {article.render &amp;&amp;
                              &lt;ItemBody {...{ showFullBody }}&gt;
                                &lt;div
                                  className=" ourbigbook"
                                  dangerouslySetInnerHTML={{ __html: article.render }}
                                  ref={(elem) =&gt; {
                                    if (elem) {
                                      const as = elem.getElementsByTagName('a')
                                      for (let i = 0; i &lt; as.length; i++) {
                                        const a = as[i]
                                        if (!aElemToMetaMap.current.has(a)) {
                                          const href = a.href
                                          aElemToMetaMap.current.add(a)
                                          let url
                                          let urlOrigin
                                          try {
                                            url = new URL(href, document.baseURI)
                                            urlOrigin = new URL(document.baseURI)
                                          } catch(e) {}
                                          if (
                                            url &amp;&amp;
                                            urlOrigin &amp;&amp;
                                            // Don't do processing for external links.
                                            url.origin === urlOrigin.origin
                                          ) {
                                            let frag
                                            let longFrag
                                            let goToTargetInPage = false
                                            let targetElem
                                            if (url.hash) {
                                              frag = url.hash.slice(1)
                                              targetElem = document.getElementById(frag)
                                              longFrag = AT_MENTION_CHAR + frag
                                              if (targetElem) {
                                                goToTargetInPage = true
                                                a.href = '#' + longFrag
                                              }
                                            }
                                            if (!goToTargetInPage) {
                                              const frag = getShortFragFromLongForPath(url.hash.slice(1), url.pathname.slice(1))
                                              a.href = url.pathname + (frag ? ('#' + frag) : '')
                                            }
                                            a.addEventListener('click', e =&gt; {
                                              if (
                                                // Don't capture Ctrl + Click, as that means user wants link to open on a separate page.
                                                // https://stackoverflow.com/questions/16190455/how-to-detect-controlclick-in-javascript-from-an-onclick-div-attribute
                                                !e.ctrlKey
                                              ) {
                                                e.preventDefault()
                                                if (
                                                  // This is needed to prevent a blowup when clicking the "parent" link of a direct child of the toplevel page of an issue.
                                                  // For artiles all works fine because each section is rendered separately and thus has a non empty href.
                                                  // But issues currently work more like static renderings, and use empty ID for the toplevel header. This is even though
                                                  // the toplevel header does have already have an ID. We should instead of doing this actually make those hrefs correct.
                                                  // But lazy now.
                                                  !href
                                                ) {
                                                  window.location.hash = ''
                                                } else {
                                                  if (goToTargetInPage) {
                                                    shortFragGoTo(handleShortFragmentSkipOnce, frag, longFrag, targetElem)
                                                  } else {
                                                    Router.push(a.href)
                                                  }
                                                }
                                              }
                                            })
                                          }
                                        }
                                      }
                                    }
                                  }}
                                /&gt;
                              &lt;/ItemBody&gt;
                            }
                            &lt;div className="item-footer content-not-ourbigbook"&gt;
                              &lt;CustomLink
                                href={itemType === 'discussion' ? routes.issue(curIssueArticle.slug, article.number) :
                                      itemType === 'article' ? routes.article(article.slug) :
                                      routes.topic(article.topicId, { sort: 'score' })
                                }
                              &gt;
                                &lt;ArticleIcon /&gt; Read the full article
                              &lt;/CustomLink&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        )})
                    : &lt;table className="list"&gt;
                        &lt;thead&gt;
                          &lt;tr&gt;
                            {itemType === 'like' &amp;&amp;
                              &lt;&gt;
                                &lt;th className="shrink"&gt;&lt;TimeIcon /&gt; Date&lt;/th&gt;
                                &lt;th className="shrink"&gt;&lt;UserIcon /&gt; Liked by&lt;/th&gt;
                              &lt;/&gt;
                            }
                            {itemType === 'topic' &amp;&amp;
                              &lt;th className="shrink right"&gt;&lt;ArticleIcon /&gt; Articles&lt;/th&gt;
                            }
                            {(() =&gt; {
                                const score = itemType === 'topic'
                                  ? &lt;&gt;&lt;/&gt;
                                  : &lt;th className="shrink center"&gt;&lt;LikeIcon /&gt; Score&lt;/th&gt;
                                const title = &lt;&gt;
                                  {isIssue &amp;&amp;
                                    &lt;th className="shrink"&gt;
                                      &lt;span className="icon"&gt;#&lt;/span&gt; id
                                    &lt;/th&gt;
                                  }
                                  &lt;th className="expand"&gt;
                                    { itemType === 'discussion' ? &lt;DiscussionIcon /&gt; :
                                      itemType === 'topic' ? &lt;TopicIcon /&gt; :
                                      &lt;ArticleIcon /&gt;
                                    }
                                    {' '}
                                    Title
                                  &lt;/th&gt;
                                &lt;/&gt;
                                if (itemType === 'like') {
                                  return &lt;&gt;{title}{score}&lt;/&gt;
                                } else {
                                  return &lt;&gt;{score}{title}&lt;/&gt;
                                }
                              })()
                            }
                            {itemType === 'topic' &amp;&amp;
                              &lt;th className="shrink center"&gt;&lt;TopicIcon /&gt; Id&lt;/th&gt;
                            }
                            {showAuthor &amp;&amp;
                              &lt;th className="shrink"&gt;&lt;UserIcon /&gt; Author&lt;/th&gt;
                            }
                            {(itemType !== 'topic') &amp;&amp;
                              &lt;th className="shrink"&gt;&lt;DiscussionIcon /&gt; { isIssue ? 'Comments' : 'Discussions' }&lt;/th&gt;
                            }
                            &lt;th className="shrink"&gt;&lt;TimeIcon /&gt; Created&lt;/th&gt;
                            &lt;th className="shrink"&gt;&lt;TimeIcon /&gt; Updated&lt;/th&gt;
                          &lt;/tr&gt;
                        &lt;/thead&gt;
                        &lt;tbody&gt;
                          {articles?.map(article =&gt; {
                            let curIssueArticle
                            if (issueArticle) {
                              curIssueArticle = issueArticle
                            } else {
                              curIssueArticle = article.article
                            }
                            const mainHref =
                                  itemType === 'article' || itemType === 'like' ? routes.article(article.slug) :
                                  itemType === 'discussion' ? routes.issue(curIssueArticle.slug, article.number) :
                                  itemType === 'topic' ? routes.topic(article.topicId, { sort: 'score' }) :
                                  null
                            return &lt;tr
                              key={getKey(itemType, article, issueArticle) }
                            &gt;
                              {itemType === 'like' &amp;&amp;
                                &lt;&gt;
                                  &lt;td className="shrink right"&gt;{formatDate(article.likedByDate)}&lt;/td&gt;
                                  &lt;td className="shrink "&gt;
                                    &lt;UserLinkWithImage showUsername={false} user={article.likedBy} /&gt;
                                  &lt;/td&gt;
                                &lt;/&gt;
                              }
                              {(itemType === 'topic') &amp;&amp;
                                &lt;td className="shrink right bold"&gt;
                                  &lt;CustomLink href={mainHref}&gt;{article.articleCount}&lt;/CustomLink&gt;
                                &lt;/td&gt;
                              }
                              {(() =&gt; {
                                const score = &lt;&gt;
                                  {(itemType === 'topic')
                                    ? &lt;&gt;&lt;/&gt;
                                    : &lt;td className="shrink center like"&gt;
                                        &lt;LikeArticleButton {...{
                                          article,
                                          isIssue,
                                          issueArticle: curIssueArticle,
                                          loggedInUser,
                                          showText: false,
                                        }} /&gt;
                                      &lt;/td&gt;
                                  }
                                &lt;/&gt;
                                const title = &lt;&gt;
                                  {isIssue &amp;&amp;
                                    &lt;td className="shrink bold"&gt;
                                      &lt;CustomLink href={mainHref}&gt;
                                        {issueArticle ? '' : curIssueArticle.slug }#{article.number}
                                      &lt;/CustomLink&gt;
                                    &lt;/td&gt;
                                  }
                                  &lt;td className="expand bold"&gt;
                                    &lt;CustomLink href={mainHref} &gt;
                                      &lt;span
                                        className="ourbigbook-title"
                                        dangerouslySetInnerHTML={{
                                          __html: itemType === 'article' ? article.titleRenderWithScope : article.titleRender
                                        }}
                                      /&gt;
                                    &lt;/CustomLink&gt;
                                  &lt;/td&gt;
                                &lt;/&gt;
                                if (itemType === 'like') {
                                  return &lt;&gt;{title}{score}&lt;/&gt;
                                } else {
                                  return &lt;&gt;{score}{title}&lt;/&gt;
                                }
                              })()}
                              {showAuthor &amp;&amp;
                                &lt;td className="shrink"&gt;
                                  &lt;UserLinkWithImage showUsername={false} user={article.author} /&gt;
                                &lt;/td&gt;
                              }
                              {itemType === 'topic' &amp;&amp;
                                &lt;th className="shrink left"&gt;
                                  &lt;CustomLink href={mainHref}&gt;{article.topicId}&lt;/CustomLink&gt;
                                &lt;/th&gt;
                              }
                              {(itemType !== 'topic') &amp;&amp;
                                &lt;td className="shrink right bold"&gt;
                                  &lt;CustomLink href={isIssue ? routes.issueComments(curIssueArticle.slug, article.number) : routes.articleIssues(article.slug)}&gt;
                                    {isIssue ? article.commentCount : article.issueCount}
                                  &lt;/CustomLink&gt;
                                &lt;/td&gt;
                              }
                              &lt;td className="shrink"&gt;{formatDate(article.createdAt)}&lt;/td&gt;
                              &lt;td className="shrink"&gt;{formatDate(article.updatedAt)}&lt;/td&gt;
                            &lt;/tr&gt;
                          })}
                        &lt;/tbody&gt;
                      &lt;/table&gt;
                }
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div className="controls"&gt;
              {pagination}
            &lt;/div&gt;
          &lt;/&gt;
        }
      &lt;/div&gt;
      {(itemType === 'article' &amp;&amp; hasUnlisted === true) &amp;&amp;
        &lt;p className="content-not-ourbigbook"&gt;
          &lt;UnlistedIcon /&gt;{' '}
          {list === true
            ? &lt;&gt;
                There are unlisted articles,
                {' '}
                &lt;Link
                  href={{
                    pathname: router.pathname,
                    query: { ...router.query, 'show-unlisted': QUERY_TRUE_VAL },
                  }}
                &gt;
                  also show them
                &lt;/Link&gt;
                {' '}or{' '}
                &lt;Link
                  href={{
                    pathname: router.pathname,
                    query: { ...router.query, 'show-unlisted': QUERY_TRUE_VAL, 'show-listed': QUERY_FALSE_VAL },
                  }}
                &gt;
                  only show them
                &lt;/Link&gt;.
              &lt;/&gt;
            : &lt;&gt;
                {list === false ? 'Only unlisted articles are being shown' : 'Unlisted articles are being shown'},
                {' '}
                &lt;Link
                  href={{
                    pathname: router.pathname,
                    query: lodash.omit(router.query, 'show-unlisted', 'show-listed'),
                  }}
                &gt;
                  click here to show only listed articles
                &lt;/Link&gt;.
              &lt;/&gt;
          }
        &lt;/p&gt;
      }
    &lt;/div&gt;
  )
}

export default ArticleList;
</code></pre></div></div></main>
<footer>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="../../../_dir">Website source code</a></div>
</footer>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2XSEK2ND00"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2XSEK2ND00');
</script>
<script src="https://giscus.app/client.js"
        data-repo="ourbigbook/ourbigbook"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyMTEyOTA2NzA="
        data-category="giscus"
        data-category-id="DIC_kwDODJgKLs4CZ61S"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
<script>
window.ourbigbook_split_headers = false;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "";
</script>
<script src="../../../_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script></body>
</html>
