<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>OURBIGBOOK_LOG_DB - Ciro Santilli</title>
<meta property="og:title" content="OURBIGBOOK_LOG_DB - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://docs.ourbigbook.com/_raw/logo.svg">
<meta property="og:url" content="https://docs.ourbigbook.com/ourbigbook-log-db">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<style>@import "_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="_raw/main.css">
<link rel="shortcut icon" href="_raw/logo.svg">
</head>
<body>
<header
<div class="brand-group">
<a href="." class="brand"><img src="_raw/logo.svg" alt="OurBigBook logo">OurBigBook Docs</a>
<a href="https://ourbigbook.com" class="brand"><img src="_raw/logo.svg" alt="OurBigBook logo"><span class="mobile-hide">OurBigBook.com</span><span class="mobile-show">Site</span></a>
<a href="https://github.com/ourbigbook/ourbigbook"><i class="fab fa-github fa-fw icon"></i> Source code</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="ourbigbook-log-db"><div class="notnav"><h1><a href=""><code>OURBIGBOOK_LOG_DB</code></a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a href="."><span title="Home" class="fa-solid-900 icon"></span> Home</a><a href=".#ourbigbook-web"> OurBigBook Web</a><a href=".#ourbigbook-web-development"> OurBigBook Web development</a><a href=".#log-database-queries"> Log database queries</a></div><div class="nav"><span class="tags"> Tags: <a href=".#ourbigbook-web-environment-variable">OurBigBook Web environment variable</a></span><a class="nosplit" href=".#ourbigbook-log-db"></a><span class="metrics"><span class="wcntr"> Words: 129</span></span></div></nav></div><div class="p" id="_4384">This tends to be a better good way for benchmarking than <a href=".#debug-sql">DEBUG sql</a>:<div class="code" id="_4385"><div><pre><code>OURBIGBOOK_LOG_DB=1 npm run dev</code></pre></div></div>which sets in the Sequelize constructor:<div class="code" id="_4386"><div><pre><code>rew Sequelize({ logging: console.log })</code></pre></div></div>and produces many outputs of type:<div class="code" id="_4387"><div><pre><code>Executed (default): SELECT 1+1 AS result Elapsed time: 0ms</code></pre></div></div>so we get explicit elapsed time measurements rather than deltas, and without the corresponding <code>Executing</code> marker.</div><div class="p" id="_4388">Furthermore, because we try to code the server correctly by making multiple <code>async</code> requests simultaneously wherever possible, the slowest of those requests finishes, last, and is the last "Elapsed time" to get logged! So you generally just have to look at the last logged line if there's one slow bottleneck query, rather than going over all the previous "Elapsed time" entries.</div><div class="p" id="_4389">This method uses Sequelize's <code>benchamrk: true</code> option as per: <a href="https://stackoverflow.com/questions/52260934/how-to-measure-query-execution-time-in-seqilize">stackoverflow.com/questions/52260934/how-to-measure-query-execution-time-in-seqilize</a>.</div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon"></span> Ancestors <span class="meta">(4)</span></a></h2><div class="list"><ol><li><a href=".#log-database-queries">Log database queries</a></li><li><a href=".#ourbigbook-web-development">OurBigBook Web development</a></li><li><a href=".#ourbigbook-web">OurBigBook Web</a></li><li><a href="."><span title="Home" class="fa-solid-900 icon"></span> Home</a></li></ol></div></main>
<footer>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="_dir">Website source code</a></div>
<div>Source code for this page: <a href="_file/index.bigb">index.bigb</a></div>
</footer>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2XSEK2ND00"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2XSEK2ND00');
</script>
<script src="https://giscus.app/client.js"
        data-repo="ourbigbook/ourbigbook"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyMTEyOTA2NzA="
        data-category="giscus"
        data-category-id="DIC_kwDODJgKLs4CZ61S"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "";
</script>
<script src="_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script></body>
</html>
