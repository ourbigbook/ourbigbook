<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<title>TODO - Ciro Santilli</title>
<meta property="og:title" content="TODO - Ciro Santilli">
<meta property="og:type" content="website">
<meta property="og:image" content="https://docs.ourbigbook.com/_raw/logo.svg">
<meta property="og:url" content="https://docs.ourbigbook.com/todo">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.1/css/all.min.css" integrity="sha512-9my9Mb2+0YO+I4PUCSwUYO7sEK21Y0STBAiFEYoWtd2VzLEZZ4QARDrZ30hdM1GlioHJ8o8cWQiy8IAb1hy/Hg==" crossorigin="anonymous" referrerpolicy="no-referrer">
<style>@import "_obb/dist/ourbigbook.css";

</style>
<link rel="stylesheet" type="text/css" href="_raw/main.css">
<link rel="shortcut icon" href="_raw/logo.svg">
</head>
<body>
<header
<div class="brand-group">
<a href="." class="brand"><img src="_raw/logo.svg" alt="OurBigBook logo">OurBigBook Docs</a>
<a href="https://ourbigbook.com" class="brand"><img src="_raw/logo.svg" alt="OurBigBook logo"><span class="mobile-hide">OurBigBook.com</span><span class="mobile-show">Site</span></a>
<a href="https://github.com/ourbigbook/ourbigbook"><i class="fab fa-github fa-fw icon"></i> Source code</a>
</div>
</header>
<main class="ourbigbook">
<div class="h top" id="todo"><div class="notnav"><h1><a href="todo-split">TODO</a></h1></div><nav class="h-nav h-nav-toplevel"><div class="nav ancestors"><a href="."><span title="Home" class="fa-solid-900 icon">ï€•</span> Home</a></div><div class="nav"><a href="#_toc" class="toc"></a><a class="split" href="todo-split"></a><span class="metrics"><span class="wcntr"> Words: 8k</span><span class="dcnt"> Articles: 179</span></span></div></nav></div><div class="toc-container" id="_toc"><ul><li class="has-child toplevel"><div class="title-div"><div class="arrow"><div></div></div><span class="not-arrow"><a class="title toc" href="#_toc"> Table of contents</a><input class="search" placeholder="ðŸ” Search. Shortcut: / (slash)"><span class="hover-metadata"><span class="metrics"><span class="wcntr"> 8k</span><span class="dcnt"> 179</span></span></span></span></div><ul><li class="has-child"><div id="_toc/issues"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#issues">Issues</a><span class="hover-metadata"><a href="#_toc" class="u"> TODO</a><span class="metrics"><span class="wcntr"> 3k</span><span class="dcnt"> 56</span></span></span></span></div><ul><li><div id="_toc/encrypted-client-hello"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#encrypted-client-hello">Encrypted client hello</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 8</span></span></span></span></div></li><li><div id="_toc/add-button-on-web-to-move-article-to-trash-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#add-button-on-web-to-move-article-to-trash-on-web">Add button on web to move article to trash on web</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 11</span></span></span></span></div></li><li><div id="_toc/convert-ordered-list-ol-to-a-boolean-argument-of-unordered-lists-ul"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#convert-ordered-list-ol-to-a-boolean-argument-of-unordered-lists-ul">Convert ordered list Ol to a boolean argument of unordered lists Ul</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 23</span></span></span></span></div></li><li><div id="_toc/allow-linking-to-auto-generated-files"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#allow-linking-to-auto-generated-files">Allow linking to auto-generated files</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 71</span></span></span></span></div></li><li><div id="_toc/link-to-file-rather-than-raw-if-there-s-split-pages"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#link-to-file-rather-than-raw-if-there-s-split-pages">Link to _file rather than _raw if there's split pages</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 55</span></span></span></span></div></li><li><div id="_toc/show-directory-listings-on-file-headers"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#show-directory-listings-on-file-headers">Show directory listings on <code>{file}</code> headers</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 41</span></span></span></span></div></li><li><div id="_toc/5"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#5">Nested set index corruption</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 569</span></span></span></span></div></li><li><div id="_toc/like-and-unlike-requests-are-very-slow"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#like-and-unlike-requests-are-very-slow">Like and unlike requests are very slow</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 55</span></span></span></span></div></li><li><div id="_toc/incoming-links-and-tagged-metadata-does-not-show-synonyms"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#incoming-links-and-tagged-metadata-does-not-show-synonyms">Incoming links and tagged metadata does not show synonyms</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 59</span></span></span></span></div></li><li><div id="_toc/image-title-with-x-to-image-with-content-incorrectly-disallowed"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#image-title-with-x-to-image-with-content-incorrectly-disallowed">Image title with x to image with content incorrectly disallowed</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 60</span></span></span></span></div></li><li><div id="_toc/lint-tables-for-correct-number-of-columns"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#lint-tables-for-correct-number-of-columns">Lint tables for correct number of columns</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 27</span></span></span></span></div></li><li><div id="_toc/remove-synonym-from-json-use-ref-type-synonym-instead"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#remove-synonym-from-json-use-ref-type-synonym-instead">Remove synonym from JSON, use Ref.type = synonym instead</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 14</span></span></span></span></div></li><li><div id="_toc/forbid-uppercase-ids-on-web-and-cli-by-default"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#forbid-uppercase-ids-on-web-and-cli-by-default">Forbid uppercase IDs on web and CLI by default</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/option-to-add-view-on-ourbigbook-link-on-header-metadata-of-cli-static-renders"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#option-to-add-view-on-ourbigbook-link-on-header-metadata-of-cli-static-renders">Option to add view on ourbigbook link on header metadata of CLI static renders</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/4"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#4">Reorder convert to move Article.destroySideEffect before File.destroy</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/list-synonyms-on-metadata-section"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#list-synonyms-on-metadata-section">List synonyms on metadata section</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 32</span></span></span></span></div></li><li><div id="_toc/web-header-metadata-to-widgets"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#web-header-metadata-to-widgets">Move all header metadata from source to HTML in Web</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 47</span></span></span></span></div></li><li><div id="_toc/fix-parentid-and-previoussiblingid-on-articles-api"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#fix-parentid-and-previoussiblingid-on-articles-api">Fix parentId and previousSiblingId on articles API</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 16</span></span></span></span></div></li><li><div id="_toc/ref-file-normalization"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#ref-file-normalization">Id, Ref and File foreign normalization</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 100</span></span></span></span></div></li><li><div id="_toc/web-create-multiple-headers"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#web-create-multiple-headers">Allow creation of multiple headers in one go on web</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/option-to-add-zip-of-local-conversion-to-converted-github-pages-website"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#option-to-add-zip-of-local-conversion-to-converted-github-pages-website">Option to add zip of local conversion to converted GitHub pages website</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 13</span></span></span></span></div></li><li><div id="_toc/3"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#3">Cross source file word count is always 0 on ToC hover</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/1"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#1">Internal cross reference to non-existent ID is not checked before render the second time we try to convert</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 195</span></span></span></span></div></li><li><div id="_toc/add-a-file-prefix-to-file-headers"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#add-a-file-prefix-to-file-headers">Add a <code>File:</code> prefix to <code>{file}</code> headers</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 9</span></span></span></span></div></li><li><div id="_toc/allow-parent-to-point-to-file-header"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#allow-parent-to-point-to-file-header">Allow <code>{parent}</code> to point to <code>{file}</code> header</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 73</span></span></span></span></div></li><li><div id="_toc/show-likers-list-on-article-page"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#show-likers-list-on-article-page">Show likers list on article page</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/show-like-and-follow-date-on-user-like-follow-lists"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#show-like-and-follow-date-on-user-like-follow-lists">Show like and follow date on user like follow lists</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/handle-email-replies-to-notification-at-ourbigbook-com"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#handle-email-replies-to-notification-at-ourbigbook-com">Handle email replies to notification@ourbigbook.com</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/firefox-tab-lists-don-t-wrap"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#firefox-tab-lists-don-t-wrap">Firefox tab lists don't wrap</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 160</span></span></span></span></div></li><li><div id="_toc/follow-topic"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#follow-topic">Follow topic</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 17</span></span></span></span></div></li><li><div id="_toc/at-mention-and-topics-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#at-mention-and-topics-on-web">At mention and topics on web</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 68</span></span></span></span></div></li><li><div id="_toc/at-mention-and-topics-locally"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#at-mention-and-topics-locally">At mention and topics locally</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 138</span></span></span></span></div></li><li><div id="_toc/view-article-and-issue-likers-and-followers"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#view-article-and-issue-likers-and-followers">View article and issue likers and followers</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/like-comments"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#like-comments">Like comments</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article">Use same parent title if the current user has a matching article when clicking "Create my own version of article" </a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/delete-article"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#delete-article">Delete article</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 64</span></span></span></span></div></li><li><div id="_toc/serialize-parsed-build-in-katex-macros"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#serialize-parsed-build-in-katex-macros">Serialize parsed build-in KaTeX macros</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 46</span></span></span></span></div></li><li><div id="_toc/handle-web-upload-after-local-article-renaming-with-synonym-redirection-set"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#handle-web-upload-after-local-article-renaming-with-synonym-redirection-set">Handle web upload after local article renaming with synonym redirection set</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 24</span></span></span></span></div></li><li><div id="_toc/photos-of-the-merchandise"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#photos-of-the-merchandise">Photos of the merchandise!</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/flyers"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#flyers">Flyers</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset">ourbigbook.com --web uploads sometimes fail with ETIMEDOUT or ECONNRESET</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 135</span></span></span></span></div></li><li><div id="_toc/header-followed-by-paragraph-without-blank-line-does-not-split-correctly"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#header-followed-by-paragraph-without-blank-line-does-not-split-correctly">Header followed by paragraph without blank line does not split correctly</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 96</span></span></span></span></div></li><li><div id="_toc/store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees">Store SHA of each article + descendants and skip API re-renders for entire subtrees</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 86</span></span></span></span></div></li><li><div id="_toc/multiheader-editing"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#multiheader-editing">Multiheader editing</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 72</span></span></span></span></div></li><li><div id="_toc/make-open-and-close-arrows-have-the-same-height-on-toc"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#make-open-and-close-arrows-have-the-same-height-on-toc">Make open and close arrows have the same height on ToC</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 11</span></span></span></span></div></li><li><div id="_toc/add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user">Add sibling/add child buttons next to toc entries of articles owned by the current user</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 5</span></span></span></span></div></li><li><div id="_toc/progress-spinner-after-submit"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#progress-spinner-after-submit">Progress spinner after submit</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 36</span></span></span></span></div></li><li><div id="_toc/hide-unconfirmed-users"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#hide-unconfirmed-users">Hide unconfirmed users</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 5</span></span></span></span></div></li><li><div id="_toc/fragment-redirects-not-working-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#fragment-redirects-not-working-on-web">Fragment redirects not working on web</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 12</span></span></span></span></div></li><li><div id="_toc/wysiwyg"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#wysiwyg">WYSIWYG</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a></span></span></div></li><li><div id="_toc/live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article">Live error checking as you type on editor if chosen previous sibling is not a child of the selected parent article</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 67</span></span></span></span></div></li><li><div id="_toc/reach-the-same-performance-as-static-website-with-dynamic-tree"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#reach-the-same-performance-as-static-website-with-dynamic-tree">Reach the same performance as static website with dynamic tree</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 205</span></span></span></span></div></li><li><div id="_toc/inject-react-header-metadata-on-each-header-separately"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#inject-react-header-metadata-on-each-header-separately">Inject React header metadata on each header separately</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 44</span></span></span></span></div></li><li><div id="_toc/include-should-work-transparently-with-readme-in-subdirectory"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#include-should-work-transparently-with-readme-in-subdirectory">Include should work transparently with README in subdirectory</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 27</span></span></span></span></div></li><li><div id="_toc/remove-the-path-parameter-from-the-article-creation-api"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#remove-the-path-parameter-from-the-article-creation-api">Remove the path parameter from the article creation API</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 195</span></span></span></span></div></li><li><div id="_toc/statically-render-links-to-issues-and-topic-under-each-header-for-better-seo"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#statically-render-links-to-issues-and-topic-under-each-header-for-better-seo">Statically render links to issues and topic under each header for better SEO</a><span class="hover-metadata"><a href="#_toc/issues" class="u"> Issues</a><span class="metrics"><span class="wcntr"> 32</span></span></span></span></div></li></ul><li><div id="_toc/make-rendered-issue-and-comment-fragments-as-short-as-possible"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#make-rendered-issue-and-comment-fragments-as-short-as-possible">Make rendered issue and comment fragments as short as possible</a><span class="hover-metadata"><a href="#_toc" class="u"> TODO</a><span class="metrics"><span class="wcntr"> 149</span></span></span></span></div></li><li class="has-child"><div id="_toc/cannot-link-from-comment-to-article"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#cannot-link-from-comment-to-article">Cannot link from comment to article</a><span class="hover-metadata"><a href="#_toc" class="u"> TODO</a><span class="metrics"><span class="wcntr"> 371</span><span class="dcnt"> 12</span></span></span></span></div><ul><li><div id="_toc/clicking-on-the-comment-header-does-not-highlight-the-header-line"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#clicking-on-the-comment-header-does-not-highlight-the-header-line">Clicking on the comment header does not highlight the header line</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 23</span></span></span></span></div></li><li><div id="_toc/comment-h1-self-link-is-empty-and-thus-refreshes-the-page"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#comment-h1-self-link-is-empty-and-thus-refreshes-the-page">Comment h1 self link is empty and thus refreshes the page</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a></span></span></div></li><li><div id="_toc/remove-all-unnecessary-newlines-from-html-output"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#remove-all-unnecessary-newlines-from-html-output">Remove all unnecessary newlines from HTML output</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 45</span></span></span></span></div></li><li><div id="_toc/toc-link-on-headers-not-opening-collapsed-toc-entries"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#toc-link-on-headers-not-opening-collapsed-toc-entries">ToC link on headers not opening collapsed toc entries</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a></span></span></div></li><li><div id="_toc/parentid-dropdown-autocomplete"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#parentid-dropdown-autocomplete">parentId dropdown autocomplete</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a></span></span></div></li><li><div id="_toc/like-metadata-on-join-on"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#like-metadata-on-join-on">LIKE metadata on JOIN on</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 5</span></span></span></span></div></li><li><div id="_toc/load-more-articles"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#load-more-articles">Load more articles</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 75</span></span></span></span></div></li><li><div id="_toc/load-more-toc-entrie"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#load-more-toc-entrie">Load more ToC entrie</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a></span></span></div></li><li><div id="_toc/word-count-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#word-count-on-web">Word count on web</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 89</span></span></span></span></div></li><li><div id="_toc/monaco-editor-requires-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#monaco-editor-requires-web">Monaco editor requires web</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 27</span></span></span></span></div></li><li><div id="_toc/respect-ourbigbook-json-htmlxextension-on-ourbigbook-json-redirects"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#respect-ourbigbook-json-htmlxextension-on-ourbigbook-json-redirects">Respect ourbigbook.json <code>htmlXExtension</code> on ourbigbook.json redirects</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 28</span></span></span></span></div></li><li><div id="_toc/iframe-macro"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#iframe-macro">iframe macro</a><span class="hover-metadata"><a href="#_toc/cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><span class="metrics"><span class="wcntr"> 52</span></span></span></span></div></li></ul><li class="has-child"><div id="_toc/closed-issues"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#closed-issues">Closed issues</a><span class="hover-metadata"><a href="#_toc" class="u"> TODO</a><span class="metrics"><span class="wcntr"> 4k</span><span class="dcnt"> 72</span></span></span></span></div><ul><li><div id="_toc/allow-disambiguate-and-id-header-arguments-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#allow-disambiguate-and-id-header-arguments-on-web">Allow disambiguate and id header arguments on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 137</span></span></span></span></div></li><li><div id="_toc/remove-scope-from-toc-entry-ids"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#remove-scope-from-toc-entry-ids">Remove scope from toc entry IDs</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 75</span></span></span></span></div></li><li><div id="_toc/split-and-nosplit-links-missing-from-cirosantilli-com"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#split-and-nosplit-links-missing-from-cirosantilli-com">split and nosplit links missing from cirosantilli.com</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 3</span></span></span></span></div></li><li><div id="_toc/move-articles-deleted-locally-to-under-a-trash-article-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#move-articles-deleted-locally-to-under-a-trash-article-on-web">Move articles deleted locally to under a trash article on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 68</span></span></span></span></div></li><li><div id="_toc/vs-code-symbol-provider"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#vs-code-symbol-provider">Vs Code symbol provider</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 40</span></span></span></span></div></li><li><div id="_toc/allow-creating-new-pages-under-scope-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#allow-creating-new-pages-under-scope-on-web">Allow creating new pages under scope on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 84</span></span></span></span></div></li><li><div id="_toc/show-tagged-list-of-non-toplevel-pages"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#show-tagged-list-of-non-toplevel-pages">Show tagged list of non toplevel pages</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 4</span></span></span></span></div></li><li><div id="_toc/shorthand-block-quotes"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#shorthand-block-quotes">Shorthand block quotes</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 262</span></span></span></span></div></li><li><div id="_toc/toc-js-folding-broken-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#toc-js-folding-broken-on-web">ToC Js folding broken on Web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 3</span></span></span></span></div></li><li><div id="_toc/allow-user-to-edit-other-user-s-articles"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#allow-user-to-edit-other-user-s-articles">Allow user to edit other user's articles</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 35</span></span></span></span></div></li><li><div id="_toc/blowup-with-unclosed-image-followed-by-math"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#blowup-with-unclosed-image-followed-by-math">Blowup with unclosed image followed by math</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 6</span></span></span></span></div></li><li><div id="_toc/ordered-list-lost-when-rendering-to-bigb-output-format"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#ordered-list-lost-when-rendering-to-bigb-output-format">Ordered list lost when rendering to bigb output format</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 45</span></span></span></span></div></li><li><div id="_toc/render-large-files-on-split-headers"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#render-large-files-on-split-headers">Render large files on split headers</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 98</span></span></span></span></div></li><li><div id="_toc/remove-synthetic-asts"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#remove-synthetic-asts">Don't use helper synthetic AST nodes, render at render time instead</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 15</span></span></span></span></div></li><li><div id="_toc/view-article-source-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#view-article-source-on-web">View article source on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 16</span></span></span></span></div></li><li><div id="_toc/benchmark-and-optimize-output-size"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#benchmark-and-optimize-output-size">Benchmark and optimize output size</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 104</span></span></span></span></div></li><li><div id="_toc/web-upload-fails-when-renaming-a-header-to-a-synonym"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#web-upload-fails-when-renaming-a-header-to-a-synonym">Web upload fails when renaming a header to a synonym</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 98</span></span></span></span></div></li><li><div id="_toc/render-ancestors-incoming-links-and-tagged-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#render-ancestors-incoming-links-and-tagged-on-web">Render ancestors, incoming links and tagged on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 2</span></span></span></span></div></li><li><div id="_toc/vertical-scrollbar-when-image-title-contains-math-underscore"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#vertical-scrollbar-when-image-title-contains-math-underscore">Vertical scrollbar when image title contains math underscore</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 111</span></span></span></span></div></li><li><div id="_toc/make-articles-removed-locally-empty-on-web-upload"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#make-articles-removed-locally-empty-on-web-upload">Make articles removed locally empty on web upload</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 211</span></span></span></span></div></li><li><div id="_toc/don-t-skip-parent-previous-sibling-updates-on-web-uploads"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#don-t-skip-parent-previous-sibling-updates-on-web-uploads">Don't skip parent/previous sibling updates on --web uploads</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 87</span></span></span></span></div></li><li><div id="_toc/cli-nosplit-points-to-self"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#cli-nosplit-points-to-self">CLI nosplit points to self</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 47</span></span></span></span></div></li><li><div id="_toc/pass-previoussiblingid-on-web-upload"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#pass-previoussiblingid-on-web-upload">Pass previousSiblingId on web upload</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 10</span></span></span></span></div></li><li><div id="_toc/links-to-synonym-header-have-fragment"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#links-to-synonym-header-have-fragment">Links to synonym header have fragment</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 52</span></span></span></span></div></li><li><div id="_toc/put-raw-files-in-a-separate-magic-prefix"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#put-raw-files-in-a-separate-magic-prefix">Put raw files in a separate magic prefix</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 34</span></span></span></span></div></li><li><div id="_toc/synonym-redirects-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#synonym-redirects-on-web">Synonym redirects on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/start-a-basic-notification-system"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#start-a-basic-notification-system">Start a basic notification system</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 31</span></span></span></span></div></li><li><div id="_toc/2"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#2">Find a way to show index.html raw files that get overriden by directory listings</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 102</span></span></span></span></div></li><li><div id="_toc/automatically-add-source-to-archive-org-images"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#automatically-add-source-to-archive-org-images">Automatically add <code>source</code> to archive.org images</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 32</span></span></span></span></div></li><li><div id="_toc/put-files-in-a-separate-namespace"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#put-files-in-a-separate-namespace">Put files in a separate namespace</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 21</span></span></span></span></div></li><li><div id="_toc/following-and-followed-tabs-are-swapped"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#following-and-followed-tabs-are-swapped">Following and followed tabs are swapped</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id">Undefined tag error message for directory conversion says header ID is not defined instead of tag ID</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 36</span></span></span></span></div></li><li><div id="_toc/design-a-project-banner"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#design-a-project-banner">Design a project banner</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 21</span></span></span></span></div></li><li><div id="_toc/subsections-missing-on-web-dynamic-tree"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#subsections-missing-on-web-dynamic-tree">Subsections missing on web dynamic tree</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 145</span></span></span></span></div></li><li><div id="_toc/enable-web-math-defines-default-on-non-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#enable-web-math-defines-default-on-non-web">Enable web math defines default on non-web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 28</span></span></span></span></div></li><li><div id="_toc/enable-web-math-defines-on-web-editor"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#enable-web-math-defines-on-web-editor">Enable web math defines on web editor</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 28</span></span></span></span></div></li><li><div id="_toc/store-auto-formated-bigb-source-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#store-auto-formated-bigb-source-on-web">Store auto-formated bigb source on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 58</span></span></span></span></div></li><li><div id="_toc/split-out-bigb-and-out-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#split-out-bigb-and-out-web">Split _out/bigb and _out/web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 44</span></span></span></span></div></li><li><div id="_toc/skip-re-render-from-api-if-article-was-unchanged"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#skip-re-render-from-api-if-article-was-unchanged">Skip re-render from API if article was unchanged</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 5</span></span></span></span></div></li><li><div id="_toc/computer-sticker"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#computer-sticker">Computer sticker</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/prevent-full-page-reload-on-links-using-our-existing-link-capture"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#prevent-full-page-reload-on-links-using-our-existing-link-capture">Prevent full page reload on links using our existing link capture</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 17</span></span></span></span></div></li><li><div id="_toc/second-meta-line-showing-up-on-index-page-even-if-empty"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#second-meta-line-showing-up-on-index-page-even-if-empty">Second meta line showing up on index page even if empty</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 13</span></span></span></span></div></li><li class="has-child"><div id="_toc/article-create-and-update-slow-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#article-create-and-update-slow-on-web">Article create and update slow on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 1k</span><span class="dcnt"> 1</span></span></span></span></div><ul><li><div id="_toc/article-create-and-update-slow-on-web-update-1"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#article-create-and-update-slow-on-web-update-1">Article create and update slow on web update 1</a><span class="hover-metadata"><a href="#_toc/article-create-and-update-slow-on-web" class="u"> Article create and update slow on web</a><span class="metrics"><span class="wcntr"> 154</span></span></span></span></div></li></ul><li><div id="_toc/donate-button-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#donate-button-on-web">Donate button on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift"><code>(beta)</code> on navbar gets pushed down half way at a specific page width just above mobile shift</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 55</span></span></span></span></div></li><li><div id="_toc/empty-latest-followed-shows-as-there-are-no-articles-on-this-website-yet"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#empty-latest-followed-shows-as-there-are-no-articles-on-this-website-yet">Empty Latest Followed shows as There are no articles on this website yet</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/add-sibling-add-child-buttons-next-to-headers-owned-by-the-current-user"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#add-sibling-add-child-buttons-next-to-headers-owned-by-the-current-user">Add sibling/add child buttons next to headers owned by the current user</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/infinite-navbar-profile-image-refresh-loop-when-there-is-no-internet"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#infinite-navbar-profile-image-refresh-loop-when-there-is-no-internet">Infinite navbar profile image refresh loop when there is no Internet</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 64</span></span></span></span></div></li><li><div id="_toc/separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor">Separate lines with field label for parent and previous sibling on web editor</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 24</span></span></span></span></div></li><li><div id="_toc/allow-showing-article-body-on-article-lists"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#allow-showing-article-body-on-article-lists">Allow showing article body on article lists</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 31</span></span></span></span></div></li><li><div id="_toc/comment-h1-has-empty-metadata-line-where-likes-would-be-placed"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#comment-h1-has-empty-metadata-line-where-likes-would-be-placed">Comment h1 has empty metadata line where likes would be placed</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 17</span></span></span></span></div></li><li><div id="_toc/comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment">Comment autogenerated IDs are wrong when there is header in the comment</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue">Add an option to add a prefix to every ID of rendered output to avoid conflicts across comments and issue</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 102</span></span></span></span></div></li><li><div id="_toc/first-on-hover-heder-self-link-after-table-of-content-activates-table-of-contents-instead-of-header"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#first-on-hover-heder-self-link-after-table-of-content-activates-table-of-contents-instead-of-header">First on-hover heder self link after table of content activates table of contents instead of header </a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 50</span></span></span></span></div></li><li><div id="_toc/h2-on-hover-self-links-are-empty-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#h2-on-hover-self-links-are-empty-on-web">h2 on hover self links are empty on Web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 57</span></span></span></span></div></li><li><div id="_toc/test-scope-2-appears-after-test-scope-1-on-generated-data"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#test-scope-2-appears-after-test-scope-1-on-generated-data">Test scope 2 appears after Test scope 1 on generated data</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 17</span></span></span></span></div></li><li><div id="_toc/prefix-unnumbered-ids-with-the-parent-header-s-id"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#prefix-unnumbered-ids-with-the-parent-header-s-id">Prefix unnumbered IDs with the parent header's ID</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/remove-at-from-toc-ids"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#remove-at-from-toc-ids">Remove @ from toc IDs</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 8</span></span></span></span></div></li><li><div id="_toc/missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope">Missing header metadata such as like button, same topic and issue link on headers under a scope</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web">Headers under scope don't have scope on ID leads to ID conflicts and a link misses on Web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 142</span></span></span></span></div></li><li><div id="_toc/tags-show-up-twice-under-scopes"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#tags-show-up-twice-under-scopes">Tags show up twice under scopes</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 86</span></span></span></span></div></li><li><div id="_toc/skip-absolute-link-exit-check-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#skip-absolute-link-exit-check-on-web">Skip absolute link exit check on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 1</span></span></span></span></div></li><li><div id="_toc/prop-dangerouslysetinnerhtml-did-not-match-on-some-pages"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#prop-dangerouslysetinnerhtml-did-not-match-on-some-pages">Prop dangerouslySetInnerHtml did not match on some pages</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 30</span></span></span></span></div></li><li><div id="_toc/self-links-broken-on-ciro-santilli-starting-at-budget-transparency"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#self-links-broken-on-ciro-santilli-starting-at-budget-transparency">Self links broken on /ciro-santilli starting at Budget transparency</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 43</span></span></span></span></div></li><li><div id="_toc/don-t-move-to-a-separate-page-when-clicking-link-to-image-to-another-header-that-is-already-visible-on-current-page-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#don-t-move-to-a-separate-page-when-clicking-link-to-image-to-another-header-that-is-already-visible-on-current-page-on-web">Don't move to a separate page when clicking link to image to another header that is already visible on current page on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web">Don't move to a separate page when clicking toc links in a page that has scope on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/wiki-link-on-same-line-as-parent-link-on-web-h1"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#wiki-link-on-same-line-as-parent-link-on-web-h1">Wiki link on same line as parent link on web h1</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 26</span></span></span></span></div></li><li><div id="_toc/h1-arguments-broken-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#h1-arguments-broken-on-web">h1 arguments broken on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 21</span></span></span></span></div></li><li><div id="_toc/capture-link-clicks-to-headers-in-current-page-and-don-t-change-page"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#capture-link-clicks-to-headers-in-current-page-and-don-t-change-page">Capture link clicks to headers in current page and don't change page</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a></span></span></div></li><li><div id="_toc/remove-word-count-on-web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#remove-word-count-on-web">Remove word count on web</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 14</span></span></span></span></div></li><li><div id="_toc/fix-toc-links-on-web-missing-scope"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#fix-toc-links-on-web-missing-scope">Fix ToC links on web, missing scope</a><span class="hover-metadata"><a href="#_toc/closed-issues" class="u"> Closed issues</a><span class="metrics"><span class="wcntr"> 3</span></span></span></span></div></li></ul><li class="has-child"><div id="_toc/tags"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#tags">Tags</a><span class="hover-metadata"><a href="#_toc" class="u"> TODO</a><span class="metrics"><span class="wcntr"> 32</span><span class="dcnt"> 34</span></span></span></span></div><ul><li><div id="_toc/db"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#db">DB</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a><span class="metrics"><span class="wcntr"> 5</span></span></span></span></div></li><li class="has-child"><div id="_toc/file"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#file">File</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a><span class="metrics"><span class="wcntr"> 13</span><span class="dcnt"> 1</span></span></span></span></div><ul><li><div id="_toc/file-autogen"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#file-autogen">File autogen</a><span class="hover-metadata"><a href="#_toc/file" class="u"> File</a></span></span></div></li></ul><li><div id="_toc/metadata-section"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#metadata-section">Metadata section</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li class="has-child"><div id="_toc/elements"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#elements">Elements</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a><span class="metrics"><span class="dcnt"> 5</span></span></span></span></div><ul><li><div id="_toc/image"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#image">Image</a><span class="hover-metadata"><a href="#_toc/elements" class="u"> Elements</a></span></span></div></li><li><div id="_toc/math"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#math">Math</a><span class="hover-metadata"><a href="#_toc/elements" class="u"> Elements</a></span></span></div></li><li><div id="_toc/table"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#table">Table</a><span class="hover-metadata"><a href="#_toc/elements" class="u"> Elements</a></span></span></div></li><li class="has-child"><div id="_toc/header"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#header">Header</a><span class="hover-metadata"><a href="#_toc/elements" class="u"> Elements</a><span class="metrics"><span class="dcnt"> 1</span></span></span></span></div><ul><li><div id="_toc/synonym"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#synonym">Synonym</a><span class="hover-metadata"><a href="#_toc/header" class="u"> Header</a></span></span></div></li></ul></li></ul><li class="has-child"><div id="_toc/ui"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#ui">UI</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a><span class="metrics"><span class="dcnt"> 2</span></span></span></span></div><ul><li><div id="_toc/firefox"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#firefox">Firefox</a><span class="hover-metadata"><a href="#_toc/ui" class="u"> UI</a></span></span></div></li><li><div id="_toc/css"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#css">CSS</a><span class="hover-metadata"><a href="#_toc/ui" class="u"> UI</a></span></span></div></li></ul><li class="has-child"><div id="_toc/web"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#web">Web</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a><span class="metrics"><span class="wcntr"> 14</span><span class="dcnt"> 9</span></span></span></span></div><ul><li><div id="_toc/web-upload"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#web-upload">Web upload</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a><span class="metrics"><span class="wcntr"> 14</span></span></span></span></div></li><li><div id="_toc/comment"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#comment">Comment</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li><li><div id="_toc/dynamic-tree-fetch"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#dynamic-tree-fetch">Dynamic tree fetch</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li><li><div id="_toc/editor"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#editor">Editor</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li><li><div id="_toc/error-checking"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#error-checking">Error checking</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li><li><div id="_toc/include"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#include">Include</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li><li><div id="_toc/issue"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#issue">Issue</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li><li><div id="_toc/offline-development"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#offline-development">Offline development</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li><li><div id="_toc/topic"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#topic">Topic</a><span class="hover-metadata"><a href="#_toc/web" class="u"> Web</a></span></span></div></li></ul><li><div id="_toc/cli"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#cli">CLI</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li><div id="_toc/word-count"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#word-count">Word count</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li class="has-child"><div id="_toc/lib"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#lib">Lib</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a><span class="metrics"><span class="dcnt"> 1</span></span></span></span></div><ul><li><div id="_toc/tag"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#tag">Tag</a><span class="hover-metadata"><a href="#_toc/lib" class="u"> Lib</a></span></span></div></li></ul><li><div id="_toc/bug"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#bug">Bug</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li><div id="_toc/scope"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#scope">Scope</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li><div id="_toc/performance"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#performance">Performance</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li><div id="_toc/publicity"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#publicity">Publicity</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li><div id="_toc/publish"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#publish">Publish</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li><div id="_toc/refactor"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#refactor">Refactor</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li><li><div id="_toc/toc"><div class="arrow"><div></div></div><span class="not-arrow"><a href="#toc">ToC</a><span class="hover-metadata"><a href="#_toc/tags" class="u"> Tags</a></span></span></div></li></ul></li></ul></li></ul></div><div class="h" id="issues"><div class="notnav"><h2><a href="todo/issues">Issues</a></h2><span class="hover-meta"> <a class="split" href="todo/issues"></a><span class="metrics"><span class="wcntr"> Words: 3k</span><span class="dcnt"> Articles: 56</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> TODO</a><a href="#_toc/issues" class="toc"></a></div></nav></div><div class="h" id="encrypted-client-hello"><div class="notnav"><h3><a href="todo/encrypted-client-hello">Encrypted client hello</a></h3><span class="hover-meta"> <a class="split" href="todo/encrypted-client-hello"></a><span class="metrics"><span class="wcntr"> Words: 8</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/encrypted-client-hello" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_2">One day we'll enable it, e.g. with Cloudfare:<div class="list"><ul id="_3"><li id="_4"><a href="https://developers.cloudflare.com/support/third-party-software/others/configure-cloudflare-and-heroku-over-https/">developers.cloudflare.com/support/third-party-software/others/configure-cloudflare-and-heroku-over-https/</a></li><li id="_5"><a href="https://developers.cloudflare.com/ssl/edge-certificates/ech/">developers.cloudflare.com/ssl/edge-certificates/ech/</a></li></ul></div></div><div class="h" id="add-button-on-web-to-move-article-to-trash-on-web"><div class="notnav"><h3><a href="todo/add-button-on-web-to-move-article-to-trash-on-web">Add button on web to move article to trash on web</a></h3><span class="hover-meta"> <a class="split" href="todo/add-button-on-web-to-move-article-to-trash-on-web"></a><span class="metrics"><span class="wcntr"> Words: 11</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/add-button-on-web-to-move-article-to-trash-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_7">Having the same effect as whatever we decide to make <a href="#move-articles-deleted-locally-to-under-a-trash-article-on-web">Section "Move articles deleted locally to under a trash article on web"</a> do.</div><div class="h" id="convert-ordered-list-ol-to-a-boolean-argument-of-unordered-lists-ul"><div class="notnav"><h3><a href="todo/convert-ordered-list-ol-to-a-boolean-argument-of-unordered-lists-ul">Convert ordered list Ol to a boolean argument of unordered lists Ul</a></h3><span class="hover-meta"> <a class="split" href="todo/convert-ordered-list-ol-to-a-boolean-argument-of-unordered-lists-ul"></a><span class="metrics"><span class="wcntr"> Words: 23</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/convert-ordered-list-ol-to-a-boolean-argument-of-unordered-lists-ul" class="toc"></a><span class="tags"> Tags: <a href="#file-autogen">File autogen</a></span></div></nav></div><div class="p" id="_9">We are better than HTML, we have arguments! This is just a style matter, HTML was wrong to add it to content model.</div><div class="h" id="allow-linking-to-auto-generated-files"><div class="notnav"><h3><a href="todo/allow-linking-to-auto-generated-files">Allow linking to auto-generated files</a></h3><span class="hover-meta"> <a class="split" href="todo/allow-linking-to-auto-generated-files"></a><span class="metrics"><span class="wcntr"> Words: 71</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/allow-linking-to-auto-generated-files" class="toc"></a><span class="tags"> Tags: <a href="#file-autogen">File autogen</a></span></div></nav></div><div class="p" id="_11">It would be cool if we could do:<div class="code" id="_12"><div><pre><code>&lt;myfile.txt&gt;{file}</code></pre></div></div>when there is a file <code>myfile.txt</code> without a corresponding <code>{file}</code> header such as:<div class="code" id="_13"><div><pre><code>= myfile.txt
{file}</code></pre></div></div>As of writing, on static we already autogenerate such <code>_file</code> pages for all files (not yet on web but we should too), so it's just a matter of checking if the target file exists when the ID doesn't for error checking, and linking to the _file.</div><div class="h" id="link-to-file-rather-than-raw-if-there-s-split-pages"><div class="notnav"><h3><a href="todo/link-to-file-rather-than-raw-if-there-s-split-pages">Link to _file rather than _raw if there's split pages</a></h3><span class="hover-meta"> <a class="split" href="todo/link-to-file-rather-than-raw-if-there-s-split-pages"></a><span class="metrics"><span class="wcntr"> Words: 55</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/link-to-file-rather-than-raw-if-there-s-split-pages" class="toc"></a><span class="tags"> Tags: <a href="#file-autogen">File autogen</a></span></div></nav></div><div class="p" id="_15">E.g.:<div class="code" id="_16"><div><pre><code>= path/to/myfile.txt
{file}</code></pre></div></div>would generate a breadcrumb like:<div class="code" id="_17"><div><pre><code>(root)/path/to/&lt;myfile.txt&gt;{file}{split}</code></pre></div></div>where <code>{split}</code> is a possibly new argument that ensures it links to split if there are split pages, and not the current:<div class="code" id="_18"><div><pre><code>(root)/path/to/\a[myfile.txt]</code></pre></div></div>This would make <a href="#file-autogen">file autogen</a> much more useful and visible. The general premise is that we should link to split <code>{file}</code> preferentially always.</div><div class="p" id="_19">Pre-requisite: <a href="#allow-linking-to-auto-generated-files">Allow linking to auto-generated files</a></div><div class="h" id="show-directory-listings-on-file-headers"><div class="notnav"><h3><a href="todo/show-directory-listings-on-file-headers">Show directory listings on <code>{file}</code> headers</a></h3><span class="hover-meta"> <a class="split" href="todo/show-directory-listings-on-file-headers"></a><span class="metrics"><span class="wcntr"> Words: 41</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/show-directory-listings-on-file-headers" class="toc"></a></div></nav></div><div class="p" id="_20">Like big files, only show on split pages.</div><div class="p" id="_21">Once this is done, we can entirely replace the custom directory listing generated in the <code>ourbigbook</code> executable by it, which will be the exact same code path as <code>{file}</code> generation.</div><div class="p" id="_22">Closely related issue: <a href="https://github.com/ourbigbook/ourbigbook/issues/348">github.com/ourbigbook/ourbigbook/issues/348</a></div><div class="h" id="5"><div class="notnav"><h3><a href="todo/5">Nested set index corruption</a></h3><span class="hover-meta"> <a class="split" href="todo/5"></a><span class="metrics"><span class="wcntr"> Words: 569</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/5" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_25">There is an outstanding nested set index corruption going on which hasn't been identified yet. Running on Heroku:<div class="code" id="_26"><div><pre><code>web/bin/rerender-articles.js</code></pre></div></div>blew up with:<div class="code" id="_27"><div><pre><code>cirosantilli/simply-connected-space
cirosantilli/simulation
/app/web/convert.js:459
        throw new ValidationError(`the parent choice "${newParentId}" would create an infinite loop`)
              ^

ValidationError
    at /app/web/convert.js:459:15
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /app/web/node_modules/sequelize/dist/lib/sequelize.js:463:24
    at async Object.convertArticle (/app/web/convert.js:176:3)
    at async /app/web/models/article.js:844:9
    at async /app/web/node_modules/sequelize/dist/lib/sequelize.js:463:24
    at async Article.rerender (/app/web/models/article.js:842:5)
    at async Article.rerender (/app/web/models/article.js:1615:9)
    at async /app/web/bin/rerender-articles.js:19:1 {
  info: undefined,
  errors: 'the parent choice "@cirosantilli/conceptual-model" would create an infinite loop',
  status: 422
}</code></pre></div></div>and the DB check:<div class="code" id="_28"><div><pre><code>heroku run web/bin/normalize -c nested-set -u cirosantilli</code></pre></div></div>failed with:<div class="code" id="_29"><div><pre><code>AssertionError [ERR_ASSERTION]: nested-set: (slug, nestedSetIndex, nestedSetNextSibling, depth): actual: (cirosantilli/natural-science, 419, 3414, 2) !== expected: (@cirosantilli/natural-science, 419, 3411, 2)
    at Object.normalize (/app/web/models/index.js:400:20)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /app/web/bin/normalize:28:3 {
  generatedMessage: false,
  code: 'ERR_ASSERTION',
  actual: 3414,
  expected: 3411,
  operator: 'strictEqual'
}</code></pre></div></div></div><div class="p" id="_30">The local source corresponding to that was:<div class="code" id="_31"><div><pre><code>= Conceptual model
{parent=Scientific method}
{wiki}

= Model
{synonym}

= Simulation
{parent=Conceptual model}
{wiki}</code></pre></div></div>and it hadn't changed in a long time according to git log, also:<div class="code" id="_32"><div><pre><code>= Natural science
{parent=Science}
{wiki}

...

= Thermo Electron
{c}
{parent=Thermo Fisher Scientific}
{title2=1956-}
{wiki}

= Natural science YouTube channel
{parent=Natural science}
{wiki}

= The Thought Emporium
{c}
{parent=Natural science YouTube channel}
{wiki}

\Include[linguistics]{parent=science}

...

= Scientific method
{parent=Science}
{wiki}</code></pre></div></div>are three consecutive siblings.</div><div class="p" id="_33">Some related database lines via:<div class="code" id="_34"><div><pre><code>bin/psql -A -F' ' &lt;&lt;EOF &gt;db.tmp
select "nestedSetIndex","nestedSetNextSibling",slug from "Article" where slug like 'cirosantilli/%' order by "nestedSetIndex"
EOF</code></pre></div></div>are:<div class="code" id="_35"><div><pre><code>  419 | 3414 | cirosantilli/natural-science

 3411 | 3412 | cirosantilli/thermo-electron
 3412 | 3414 | cirosantilli/natural-science-youtube-channel
 3413 | 3414 | cirosantilli/the-thought-emporium
 3414 | 3553 | cirosantilli/linguistics

 3551 | 3553 | cirosantilli/chinese-slang
 3552 | 3553 | cirosantilli/shabi
 3553 | 3864 | cirosantilli/scientific-method</code></pre></div></div>Humm, that index looks correct, what's going on?</div><div class="p" id="_36">I hack:<div class="code" id="_37"><div><pre><code>
@@ -392,6 +392,7 @@ async function normalize({
         const articles = await Article.treeFindInOrder({ username, transaction })
         if (check) {
           const nestedSetsFromRefs = await Article.getNestedSetsFromRefs(username, { transaction })
+          nestedSetsFromRefs.map(e =&gt; console.error(`${e.nestedSetIndex} ${e.nestedSetNextSibling} ${e.id}`))</code></pre></div></div>and see:<div class="code" id="_38"><div><pre><code>3550 3864 @cirosantilli/scientific-method</code></pre></div></div>There's an offset of 3 somewhere!</div><div class="p" id="_39">OK the first glaring error in the DB is social science right in the middle of physics things:<div class="code" id="_40"><div><pre><code>1497 1498 cirosantilli/physx
1500 1801 cirosantilli/social-science
1501 1503 cirosantilli/3d-ridig-body-dynamics-benchmark
1502 1503 cirosantilli/simbenchmark</code></pre></div></div>Also <a href="https://ourbigbook.com/cirosantilli/social-science">ourbigbook.com/cirosantilli/social-science</a> gave 500.</div><div class="p" id="_41">Possibly related:<div class="code" id="_42"><div><pre><code>1501 1503 cirosantilli/3d-ridig-body-dynamics-benchmark</code></pre></div></div>was a recent change, and part of this complex source code move that can be simplified to:<div class="code" id="_43"><div><pre><code>--- a/science.bigb
+++ b/science.bigb
@@ -345,40 +345,7 @@ https://www.youtube.com/watch?v=H_H_TF5Kxks This Lab is RIDICULOUS (2021) gives
-= 3D physics engine
-{parent=Physics engine}
-{tag=3D}
-
-= 3D physics engine benchmark
-{parent=3D physics engine}</code></pre></div></div>to:<div class="code" id="_44"><div><pre><code>@@ -512,3 +512,117 @@ This idealization does not seems to be possible at all in the context of &lt;Maxwel
 = Rigid body
 {parent=Point particle}
 {wiki}
+
+= Rigid body dynamics
+{parent=Rigid body}
+
+= 3D rigid body dynamics
+{parent=Rigid body dynamics}
+{tag=3D}
+
+= 3D rigid body dynamics simulator
+{parent=3D rigid body dynamics}
+
+= 3D physics engine
+{synonym}
+
+= PhysX
+{c}
+{parent=3D rigid body dynamics simulator}
+{tag=C++ library}
+
+= 3D ridig body dynamics benchmark
+{parent=3D rigid body dynamics}
+
+= 3D physics engine benchmark
+{synonym}
+
+= SimBenchmark
+{parent=3D ridig body dynamics benchmark}</code></pre></div></div>so it contains two simultaneous renames, before:<div class="code" id="_45"><div><pre><code>= 3D physics engine
  = 3D physics engine benchmark</code></pre></div></div>after:<div class="code" id="_46"><div><pre><code>= 3D rigid body dynamics
  = 3D rigid body dynamics simulator (3D physics engine)
    = PhysX
  = 3D rigid body dynamics benchmark (3D physics engine benchmark)
    = SimBenchmark</code></pre></div></div>Gotta try to make a minimal test reproduction for this mess.</div><div class="h" id="like-and-unlike-requests-are-very-slow"><div class="notnav"><h3><a href="todo/like-and-unlike-requests-are-very-slow">Like and unlike requests are very slow</a></h3><span class="hover-meta"> <a class="split" href="todo/like-and-unlike-requests-are-very-slow"></a><span class="metrics"><span class="wcntr"> Words: 55</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/like-and-unlike-requests-are-very-slow" class="toc"></a><span class="tags"> Tags: <a href="#performance">Performance</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_49">On ourbigbook.com like and unlike takes 4s-10s! Something is wrong. It must be because of the complex side effects like topic updating? Maybe those should be deferred? This only appears noticeable on a larger database.</div><div class="p" id="_50">Edit: as of today it was taking 500 ms, so likely some index was added that improved it a lot.</div><div class="h" id="incoming-links-and-tagged-metadata-does-not-show-synonyms"><div class="notnav"><h3><a href="todo/incoming-links-and-tagged-metadata-does-not-show-synonyms">Incoming links and tagged metadata does not show synonyms</a></h3><span class="hover-meta"> <a class="split" href="todo/incoming-links-and-tagged-metadata-does-not-show-synonyms"></a><span class="metrics"><span class="wcntr"> Words: 59</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/incoming-links-and-tagged-metadata-does-not-show-synonyms" class="toc"></a><span class="tags"> Tags: <a href="#metadata-section">Metadata section</a>, <a href="#synonym">Synonym</a></span></div></nav></div><div class="p" id="_53">Both CLI and web. E.g.:</div><div class="p" id="_54">README.bigb<div class="code" id="_55"><div><pre><code>= Index

&lt;notindex2&gt;</code></pre></div></div></div><div class="p" id="_56">notindex.bigb<div class="code" id="_57"><div><pre><code>= Notindex

= Notindex2
{synonym}</code></pre></div></div></div><div class="p" id="_58">then:<div class="code" id="_59"><div><pre><code>ourbigbook .</code></pre></div></div>the output notindex.html does not have an incoming links metadata section. With <code>&lt;notindex&gt;</code> it does have a metadata section. The outcome metadata section should be identical on both.</div><div class="p" id="_60">Same for tags that use the synonym.</div><div class="p" id="_61">Added a test now for it.</div><div class="h" id="image-title-with-x-to-image-with-content-incorrectly-disallowed"><div class="notnav"><h3><a href="todo/image-title-with-x-to-image-with-content-incorrectly-disallowed">Image title with x to image with content incorrectly disallowed</a></h3><span class="hover-meta"> <a class="split" href="todo/image-title-with-x-to-image-with-content-incorrectly-disallowed"></a><span class="metrics"><span class="wcntr"> Words: 60</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/image-title-with-x-to-image-with-content-incorrectly-disallowed" class="toc"></a><span class="tags"> Tags: <a href="#lib">Lib</a></span></div></nav></div><div class="p" id="_63">Should only blow up if the <code>\\x</code> does not have a content explicitly set. See broken test <code>cross reference from image title to previous non-header with content is allowed</code>.</div><div class="p" id="_64">To fix we need to store some extra data on the Ref or Id table that determines if the reference needs the title or not to determine its own ID.</div><div class="h" id="lint-tables-for-correct-number-of-columns"><div class="notnav"><h3><a href="todo/lint-tables-for-correct-number-of-columns">Lint tables for correct number of columns</a></h3><span class="hover-meta"> <a class="split" href="todo/lint-tables-for-correct-number-of-columns"></a><span class="metrics"><span class="wcntr"> Words: 27</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/lint-tables-for-correct-number-of-columns" class="toc"></a><span class="tags"> Tags: <a href="#lib">Lib</a>, <a href="#table">Table</a></span></div></nav></div><div class="p" id="_67">Maybe there is a valid use case for rows with different number of columns. But likely by default we should error unless the use explicitly allows this.</div><div class="h" id="remove-synonym-from-json-use-ref-type-synonym-instead"><div class="notnav"><h3><a href="todo/remove-synonym-from-json-use-ref-type-synonym-instead">Remove synonym from JSON, use Ref.type = synonym instead</a></h3><span class="hover-meta"> <a class="split" href="todo/remove-synonym-from-json-use-ref-type-synonym-instead"></a><span class="metrics"><span class="wcntr"> Words: 14</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/remove-synonym-from-json-use-ref-type-synonym-instead" class="toc"></a><span class="tags"> Tags: <a href="#refactor">Refactor</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_70">When hydrating JSON asts from server we just need to do that extra join.</div><div class="h" id="forbid-uppercase-ids-on-web-and-cli-by-default"><div class="notnav"><h3><a href="todo/forbid-uppercase-ids-on-web-and-cli-by-default">Forbid uppercase IDs on web and CLI by default</a></h3><span class="hover-meta"> <a class="split" href="todo/forbid-uppercase-ids-on-web-and-cli-by-default"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/forbid-uppercase-ids-on-web-and-cli-by-default" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="option-to-add-view-on-ourbigbook-link-on-header-metadata-of-cli-static-renders"><div class="notnav"><h3><a href="todo/option-to-add-view-on-ourbigbook-link-on-header-metadata-of-cli-static-renders">Option to add view on ourbigbook link on header metadata of CLI static renders</a></h3><span class="hover-meta"> <a class="split" href="todo/option-to-add-view-on-ourbigbook-link-on-header-metadata-of-cli-static-renders"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/option-to-add-view-on-ourbigbook-link-on-header-metadata-of-cli-static-renders" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="4"><div class="notnav"><h3><a href="todo/4">Reorder convert to move Article.destroySideEffect before File.destroy</a></h3><span class="hover-meta"> <a class="split" href="todo/4"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/4" class="toc"></a><span class="tags"> Tags: <a href="#refactor">Refactor</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="list-synonyms-on-metadata-section"><div class="notnav"><h3><a href="todo/list-synonyms-on-metadata-section">List synonyms on metadata section</a></h3><span class="hover-meta"> <a class="split" href="todo/list-synonyms-on-metadata-section"></a><span class="metrics"><span class="wcntr"> Words: 32</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/list-synonyms-on-metadata-section" class="toc"></a><span class="tags"> Tags: <a href="#synonym">Synonym</a></span></div></nav></div><div class="p" id="_76">Edit: done for CLI. On web, showing just IDs to user to start with. Attempted to render on fly but failing for now. That's the only missing thing.</div><div class="p" id="_77">Both web and CLI.</div><div class="h" id="web-header-metadata-to-widgets"><div class="notnav"><h3><a href="todo/web-header-metadata-to-widgets">Move all header metadata from source to HTML in Web</a></h3><span class="hover-meta"> <a class="split" href="todo/web-header-metadata-to-widgets"></a><span class="metrics"><span class="wcntr"> Words: 47</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/web-header-metadata-to-widgets" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_79">This is way more user friendly. We have currently done that for <code>parent=</code> which would be:<div class="code" id="_80"><div><pre><code>= Calculus
{parent=Mathematics}</code></pre></div></div>but now is just set on the Web UI.</div><div class="p" id="_81">But we should likely do this for every other metadata, e.g.:<div class="list"><ul id="_82"><li id="_83"><code>synonym</code></li><li id="_84"><code>id</code></li><li id="_85"><code>scope</code></li><li id="_86"><code>title2</code></li><li id="_87"><code>c</code></li></ul></div>and so on.</div><div class="h" id="fix-parentid-and-previoussiblingid-on-articles-api"><div class="notnav"><h3><a href="todo/fix-parentid-and-previoussiblingid-on-articles-api">Fix parentId and previousSiblingId on articles API</a></h3><span class="hover-meta"> <a class="split" href="todo/fix-parentid-and-previoussiblingid-on-articles-api"></a><span class="metrics"><span class="wcntr"> Words: 16</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/fix-parentid-and-previoussiblingid-on-articles-api" class="toc"></a></div></nav></div><div class="p" id="_88">The underlying reason is that:<div class="code" id="_89"><div><pre><code>.getArticles({includeParentAndPreviousSibling: true</code></pre></div></div>is broken. The singular version <code>getArticle</code> however is not.</div><div class="h" id="ref-file-normalization"><div class="notnav"><h3><a href="todo/ref-file-normalization">Id, Ref and File foreign normalization</a></h3><span class="hover-meta"> <a class="split" href="todo/ref-file-normalization"></a><span class="metrics"><span class="wcntr"> Words: 100</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/ref-file-normalization" class="toc"></a><span class="tags"> Tags: <a href="#db">DB</a></span></div></nav></div><div class="p" id="_91">We've started noticing this as we went along and became more familiar with proper database design:<div class="list"><ul id="_92"><li id="_93">Ref.from_id and to_id should point to Id</li><li id="_94">File should be removed when deleted: <a href="https://github.com/ourbigbook/ourbigbook/issues/216">github.com/ourbigbook/ourbigbook/issues/216</a> Currently this can only happen locally. Edit: will also start happening on upstream with synonym moves.</li><li id="_95">toplevel_id<div class="list"><ul id="_96"><li id="_97">File.toplevel_id should point to an Id object via primary key. Currently done via idid text.</li><li id="_98">Id.toplevel_id should point to an Id object. No links at all apparently.</li></ul></div></li><li id="_99">Article.topicId should point to Topic.id, not be TEXT</li></ul></div></div><div class="p" id="_100">We could then consider removing several <code>Ref.destroy</code> and <code>Id.destroy</code> <code>ON CASCADE</code> with <code>File</code> and <code>Id</code>, rather than manually.</div><div class="h" id="web-create-multiple-headers"><div class="notnav"><h3><a href="todo/web-create-multiple-headers">Allow creation of multiple headers in one go on web</a></h3><span class="hover-meta"> <a class="split" href="todo/web-create-multiple-headers"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/web-create-multiple-headers" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="option-to-add-zip-of-local-conversion-to-converted-github-pages-website"><div class="notnav"><h3><a href="todo/option-to-add-zip-of-local-conversion-to-converted-github-pages-website">Option to add zip of local conversion to converted GitHub pages website</a></h3><span class="hover-meta"> <a class="split" href="todo/option-to-add-zip-of-local-conversion-to-converted-github-pages-website"></a><span class="metrics"><span class="wcntr"> Words: 13</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/option-to-add-zip-of-local-conversion-to-converted-github-pages-website" class="toc"></a><span class="tags"> Tags: <a href="#publish">Publish</a></span></div></nav></div><div class="p" id="_103">Would be cool, easily allowing full website download for offline viewing! One day.</div><div class="h" id="3"><div class="notnav"><h3><a href="todo/3">Cross source file word count is always 0 on ToC hover</a></h3><span class="hover-meta"> <a class="split" href="todo/3"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/3" class="toc"></a><span class="tags"> Tags: <a href="#word-count">Word count</a></span></div></nav></div><div class="h" id="1"><div class="notnav"><h3><a href="todo/1">Internal cross reference to non-existent ID is not checked before render the second time we try to convert</a></h3><span class="hover-meta"> <a class="split" href="todo/1"></a><span class="metrics"><span class="wcntr"> Words: 195</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/1" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#error-checking">Error checking</a></span></div></nav></div><div class="p" id="_107">README.bigb<div class="code" id="_108"><div><pre><code>= Index

&lt;asdf&gt;</code></pre></div></div>Then the first:<div class="code" id="_109"><div><pre><code>ourbigbook .</code></pre></div></div>fails as desired before any rendering takes place:<div class="code" id="_110"><div><pre><code>extract_ids: README.bigb
extract_ids: README.bigb finished in 45.4546590000391 ms
error:
README.bigb:3:2: cross reference to unknown id: "asdf"</code></pre></div></div>Then the second:<div class="code" id="_111"><div><pre><code>ourbigbook .</code></pre></div></div>fails differently, incorrectly trying to render but failing:<div class="code" id="_112"><div><pre><code>extract_ids: README.bigb
extract_ids: README.bigb skipped by timestamp
render: README.bigb
error: README.bigb:3:2: cross reference to unknown id: "asdf" at render time
copy README.bigb -&gt; out/html/_raw/README.bigb
render: README.bigb -&gt; out/html/index.html finished in 51.55012200027704 ms</code></pre></div></div>with an error at render time.</div><div class="p" id="_113">This is especially noticeable/confusing when you are converting a large number of files, and the second run will start converting a large number of files instead of failing early, until it eventually reaches the error when rendering the specific file.</div><div class="p" id="_114">The key code point is:<div class="code" id="_115"><div><pre><code>async function check_db(sequelize, paths_converted, { transaction }) {</code></pre></div></div>We are only checking the DB for the paths converted, but then due to parse skipping we skip the paths and don't check them anymore.</div><div class="p" id="_116">Instead, we should check the entire database.</div><div class="p" id="_117">The question then is: is there a way to do this efficiently with a query, without bringing the entire Refs database into memory, notably conisdering inflections?</div><div class="h" id="add-a-file-prefix-to-file-headers"><div class="notnav"><h3><a href="todo/add-a-file-prefix-to-file-headers">Add a <code>File:</code> prefix to <code>{file}</code> headers</a></h3><span class="hover-meta"> <a class="split" href="todo/add-a-file-prefix-to-file-headers"></a><span class="metrics"><span class="wcntr"> Words: 9</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/add-a-file-prefix-to-file-headers" class="toc"></a><span class="tags"> Tags: <a href="#file">File</a></span></div></nav></div><div class="p" id="_119">And also to full links, at least on ToC.</div><div class="h" id="allow-parent-to-point-to-file-header"><div class="notnav"><h3><a href="todo/allow-parent-to-point-to-file-header">Allow <code>{parent}</code> to point to <code>{file}</code> header</a></h3><span class="hover-meta"> <a class="split" href="todo/allow-parent-to-point-to-file-header"></a><span class="metrics"><span class="wcntr"> Words: 73</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/allow-parent-to-point-to-file-header" class="toc"></a><span class="tags"> Tags: <a href="#file">File</a></span></div></nav></div><div class="code" id="_121"><div><pre><code>= my/file.txt

= Asdf
{parent=my/file.txt}
{parentFile}</code></pre></div></div><div class="p" id="_122">Same for tags.</div><div class="p" id="_123">Currently there is some confusion in the code on treating the <code>&lt;&gt;{file}</code> like the file in <code>= Header{file}</code>: one if about pointing to things, the other is about the current thing. We will disambiguate with <code>parentFile</code>.</div><div class="p" id="_124">Same for <code>tag</code> and <code>tagFile</code>.</div><div class="p" id="_125">It is currently possible however to just do:<div class="code" id="_126"><div><pre><code>= .gitignore

= child
{parent=_file/.gitignore}</code></pre></div></div>I need to think why it works.</div><div class="h" id="show-likers-list-on-article-page"><div class="notnav"><h3><a href="todo/show-likers-list-on-article-page">Show likers list on article page</a></h3><span class="hover-meta"> <a class="split" href="todo/show-likers-list-on-article-page"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/show-likers-list-on-article-page" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="show-like-and-follow-date-on-user-like-follow-lists"><div class="notnav"><h3><a href="todo/show-like-and-follow-date-on-user-like-follow-lists">Show like and follow date on user like follow lists</a></h3><span class="hover-meta"> <a class="split" href="todo/show-like-and-follow-date-on-user-like-follow-lists"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/show-like-and-follow-date-on-user-like-follow-lists" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="handle-email-replies-to-notification-at-ourbigbook-com"><div class="notnav"><h3><a href="todo/handle-email-replies-to-notification-at-ourbigbook-com">Handle email replies to notification@ourbigbook.com</a></h3><span class="hover-meta"> <a class="split" href="todo/handle-email-replies-to-notification-at-ourbigbook-com"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/handle-email-replies-to-notification-at-ourbigbook-com" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="firefox-tab-lists-don-t-wrap"><div class="notnav"><h3><a href="todo/firefox-tab-lists-don-t-wrap">Firefox tab lists don't wrap</a></h3><span class="hover-meta"> <a class="split" href="todo/firefox-tab-lists-don-t-wrap"></a><span class="metrics"><span class="wcntr"> Words: 160</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/firefox-tab-lists-don-t-wrap" class="toc"></a><span class="tags"> Tags: <a href="#firefox">Firefox</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_132">On Firefox 109, tab lists such as those in the home page don't wrap if the screen is narrow.</div><div class="p" id="_133">This is due to:<div class="code" id="_134"><div><pre><code>.tab-item: { white-space: pre }</code></pre></div></div>but does not make much sense, as it should only take effect inside <code>.tab-item</code>, not on the <code>.tab-list</code> itself, feels like a firefox bug.</div><div class="p" id="_135">We want the <code>white-space: pre</code> so that tab entries won't be broken up across lines.</div><div class="p" id="_136">Works fine in Chromium 109.</div><div class="p" id="_137">TODO can't reproduce on a minimal HTML page, so anoying!!!<div class="code" id="_138"><div><pre><code>&lt;!doctype html&gt;
&lt;html lang=en&gt;
&lt;head&gt;
&lt;meta charset=utf-8&gt;
&lt;title&gt;Min sane&lt;/title&gt;
&lt;style&gt;
span {
  white-space: pre;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;span&gt;My item 1&lt;/span&gt;
  &lt;span&gt;My item 2&lt;/span&gt;
  &lt;span&gt;My item 3&lt;/span&gt;
  &lt;span&gt;My item 4&lt;/span&gt;
  &lt;span&gt;My item 5&lt;/span&gt;
  &lt;span&gt;My item 6&lt;/span&gt;
  &lt;span&gt;My item 7&lt;/span&gt;
  &lt;span&gt;My item 8&lt;/span&gt;
  &lt;span&gt;My item 9&lt;/span&gt;
  &lt;span&gt;My item 10&lt;/span&gt;
  &lt;span&gt;My item 11&lt;/span&gt;
  &lt;span&gt;My item 12&lt;/span&gt;
  &lt;span&gt;My item 13&lt;/span&gt;
  &lt;span&gt;My item 14&lt;/span&gt;
  &lt;span&gt;My item 15&lt;/span&gt;
  &lt;span&gt;My item 16&lt;/span&gt;
  &lt;span&gt;My item 17&lt;/span&gt;
  &lt;span&gt;My item 18&lt;/span&gt;
  &lt;span&gt;My item 19&lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre></div></div></div><div class="h" id="follow-topic"><div class="notnav"><h3><a href="todo/follow-topic">Follow topic</a></h3><span class="hover-meta"> <a class="split" href="todo/follow-topic"></a><span class="metrics"><span class="wcntr"> Words: 17</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/follow-topic" class="toc"></a><span class="tags"> Tags: <a href="#topic">Topic</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_141">This is one of those things that require a smart algorithm otherwise it will be quickly useless.</div><div class="h" id="at-mention-and-topics-on-web"><div class="notnav"><h3><a href="todo/at-mention-and-topics-on-web">At mention and topics on web</a></h3><span class="hover-meta"> <a class="split" href="todo/at-mention-and-topics-on-web"></a><span class="metrics"><span class="wcntr"> Words: 68</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/at-mention-and-topics-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_143">Currently on web:<div class="list"><ul id="_144"><li id="_145"><code>&lt;@user-name&gt;</code> produces a working link, but with bad title "index"</li><li id="_146"><code>&lt;#some-topic&gt;</code> fails</li></ul></div></div><div class="p" id="_147">What we want to work is either of:<div class="list"><ul id="_148"><li id="_149"><code>@user-name</code></li><li id="_150"><code>#some-topic</code></li><li id="_151"><code>&lt;#some topic&gt;</code></li></ul></div></div><div class="p" id="_152">Perfect topic rendering can be a bit trick because it might require fetching actual topic from DB to see its preferred title.</div><div class="p" id="_153">At mentions ideally bring the side-effect of notifications, but then we have to think about spam a bit too.</div><div class="h" id="at-mention-and-topics-locally"><div class="notnav"><h3><a href="todo/at-mention-and-topics-locally">At mention and topics locally</a></h3><span class="hover-meta"> <a class="split" href="todo/at-mention-and-topics-locally"></a><span class="metrics"><span class="wcntr"> Words: 138</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/at-mention-and-topics-locally" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_155">The constructs from <a href="#at-mention-and-topics-on-web">at mention and topics on web</a> should also just work locally, and redirect to ourbigbook.com by default.</div><div class="p" id="_156">Once they work, document them with something like:</div><div class="code" id="_157"><div><pre><code>= `\x` `href` argument
{parent=`\x` sargument}

If the `href` argument starts with certain prefixes, magic links are generated:
* `@`: link to &lt;OurBigBook.com&gt; user profiles, e.g.:
  \OurBigBookExample[[
  I love \a[@cirosantilli], he is great!
  ]]
  links to: https://ourbigbook.com/cirosantilli

  TODO make it work without the `\a`, just: `@cirosantilli`.
* `#`: link to &lt;OurBigBook.com&gt; &lt;OurBigBook Web topics&gt;[topics]:
  \OurBigBookExample[[
  \a[#quantum-mechanics][Quantum mechanics] is very difficult to understand.
  ]]
  links to: https://ourbigbook.com/go/topic/quantum-mechanics</code></pre></div></div><div class="p" id="_158">It is not perfectly elegant to use <code>&lt;&gt;</code> for this, especially locally, since it means linking to IDs that don't exist (on Web, <code>@username</code> is an actually regular ID on the DB. But <code>#topic</code> isn't). But perhaps just having the <code>&lt;&gt;</code> links to non-files is just the way to go.</div><div class="h" id="view-article-and-issue-likers-and-followers"><div class="notnav"><h3><a href="todo/view-article-and-issue-likers-and-followers">View article and issue likers and followers</a></h3><span class="hover-meta"> <a class="split" href="todo/view-article-and-issue-likers-and-followers"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/view-article-and-issue-likers-and-followers" class="toc"></a><span class="tags"> Tags: <a href="#issue">Issue</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="like-comments"><div class="notnav"><h3><a href="todo/like-comments">Like comments</a></h3><span class="hover-meta"> <a class="split" href="todo/like-comments"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/like-comments" class="toc"></a><span class="tags"> Tags: <a href="#issue">Issue</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article"><div class="notnav"><h3><a href="todo/use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article">Use same parent title if the current user has a matching article when clicking "Create my own version of article" </a></h3><span class="hover-meta"> <a class="split" href="todo/use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article" class="toc"></a><span class="tags"> Tags: <a href="#topic">Topic</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="delete-article"><div class="notnav"><h3><a href="todo/delete-article">Delete article</a></h3><span class="hover-meta"> <a class="split" href="todo/delete-article"></a><span class="metrics"><span class="wcntr"> Words: 64</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/delete-article" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_166">This is a bit hard to to properly as it requires checking that a billion dependant objects are also deleted:<div class="list"><ul id="_167"><li id="_168">issues</li><li id="_169">comments of those issues</li><li id="_170">file</li><li id="_171">IDs defined in that article</li><li id="_172">change the parentId of all chidren to the parent article of the deleted article, and also updated nested set index</li></ul></div>Some of those can go on cascades, but others will require side-effects.</div><div class="p" id="_173">Related:<div class="list"><ul id="_174"><li id="_175"><a href="https://github.com/ourbigbook/ourbigbook/issues/216">github.com/ourbigbook/ourbigbook/issues/216</a></li></ul></div></div><div class="h" id="serialize-parsed-build-in-katex-macros"><div class="notnav"><h3><a href="todo/serialize-parsed-build-in-katex-macros">Serialize parsed build-in KaTeX macros</a></h3><span class="hover-meta"> <a class="split" href="todo/serialize-parsed-build-in-katex-macros"></a><span class="metrics"><span class="wcntr"> Words: 46</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/serialize-parsed-build-in-katex-macros" class="toc"></a><span class="tags"> Tags: <a href="#math">Math</a></span></div></nav></div><div class="p" id="_177">I.e. save the output of <code>katex.renderToString</code> to JSON or some other format. This approach would ensure minimal load times no matter what KaTeX is doing, and possibly provide some good portability.</div><div class="p" id="_178">Off the bat <code>JSON.stringify</code> doesn't work due to circular references though that can be overcome: <a href="https://stackoverflow.com/questions/10392293/stringify-convert-to-json-a-javascript-object-with-circular-reference">stackoverflow.com/questions/10392293/stringify-convert-to-json-a-javascript-object-with-circular-reference</a></div><div class="h" id="handle-web-upload-after-local-article-renaming-with-synonym-redirection-set"><div class="notnav"><h3><a href="todo/handle-web-upload-after-local-article-renaming-with-synonym-redirection-set">Handle web upload after local article renaming with synonym redirection set</a></h3><span class="hover-meta"> <a class="split" href="todo/handle-web-upload-after-local-article-renaming-with-synonym-redirection-set"></a><span class="metrics"><span class="wcntr"> Words: 24</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/handle-web-upload-after-local-article-renaming-with-synonym-redirection-set" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_181">Web upload breaks with duplicate ID if you rename a header and synonym the old one.</div><div class="p" id="_182">TODO this issue is the same as: <a href="https://github.com/ourbigbook/ourbigbook/issues/319">github.com/ourbigbook/ourbigbook/issues/319</a>?</div><div class="h" id="photos-of-the-merchandise"><div class="notnav"><h3><a href="todo/photos-of-the-merchandise">Photos of the merchandise!</a></h3><span class="hover-meta"> <a class="split" href="todo/photos-of-the-merchandise"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/photos-of-the-merchandise" class="toc"></a><span class="tags"> Tags: <a href="#publicity">Publicity</a></span></div></nav></div><div class="h" id="flyers"><div class="notnav"><h3><a href="todo/flyers">Flyers</a></h3><span class="hover-meta"> <a class="split" href="todo/flyers"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/flyers" class="toc"></a><span class="tags"> Tags: <a href="#publicity">Publicity</a></span></div></nav></div><div class="h" id="ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset"><div class="notnav"><h3><a href="todo/ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset">ourbigbook.com --web uploads sometimes fail with ETIMEDOUT or ECONNRESET</a></h3><span class="hover-meta"> <a class="split" href="todo/ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset"></a><span class="metrics"><span class="wcntr"> Words: 135</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_187">ourbigbook --web sometimes randomly times out on ourbigbook.com. First an ID extraction or render hangs, and then after a few seconds things blow up Usually happens around the thousands of articles uploaded.</div><div class="p" id="_188">I've seen it happen once or twice locally as well.</div><div class="p" id="_189">There are no server exceptions on <code>heroku logs</code>. I simply can't understand why it happens.</div><div class="p" id="_190">Once the error was <code>ETIMEDOUT</code>, but most times it was <code>ECONNRESET</code>.</div><div class="list"><ul id="_191"><li id="_192"><a href="https://stackoverflow.com/questions/17245881/how-do-i-debug-error-econnreset-in-node-js">stackoverflow.com/questions/17245881/how-do-i-debug-error-econnreset-in-node-js</a></li></ul></div><div class="p" id="_193">Next time it happens I'm just going to add a timeout plus retry mechanism as it is rare enough that it shouldn't matter, and the problem does seem to go away if I try to continue the upload immediately afterwards: given the SHA2-based skips, restarting from the CLI we just start exactly where we had left off, so hopefully will also work from Js.</div><div class="h" id="header-followed-by-paragraph-without-blank-line-does-not-split-correctly"><div class="notnav"><h3><a href="todo/header-followed-by-paragraph-without-blank-line-does-not-split-correctly">Header followed by paragraph without blank line does not split correctly</a></h3><span class="hover-meta"> <a class="split" href="todo/header-followed-by-paragraph-without-blank-line-does-not-split-correctly"></a><span class="metrics"><span class="wcntr"> Words: 96</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/header-followed-by-paragraph-without-blank-line-does-not-split-correctly" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a></span></div></nav></div><div class="p" id="_195">README.bigb</div><div class="code" id="_196"><div><pre><code>= Asdf

== Qwer
zxcv</code></pre></div></div><div class="p" id="_197">then:</div><div class="code" id="_198"><div><pre><code>ourbigbook --split-headers README.bigb</code></pre></div></div><div class="p" id="_199">leads to <code>out/html/split.html</code> that contains the <code>Qwer</code> header, and no <code>qwer.html</code> output.</div><div class="p" id="_200">This construct should just be forbidden by linting instead forcing the preferred:</div><div class="code" id="_201"><div><pre><code>= Asdf

== Qwer

zxcv</code></pre></div></div><div class="p" id="_202">Similar problem with preceding paragraph:</div><div class="p" id="_203">README.bigb</div><div class="code" id="_204"><div><pre><code>= Asdf

zxcv
== Qwer</code></pre></div></div><div class="p" id="_205">The root failure case in both cases is that the header goes inside the paragraph.</div><div class="p" id="_206">Hmm, perhaps that is not a bad behavior... OK so going back a bit further, the problem is the outcome of:<div class="code" id="_207"><div><pre><code>ourbigbook --web .</code></pre></div></div>on such cases, which leads to errors.</div><div class="h" id="store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees"><div class="notnav"><h3><a href="todo/store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees">Store SHA of each article + descendants and skip API re-renders for entire subtrees</a></h3><span class="hover-meta"> <a class="split" href="todo/store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees"></a><span class="metrics"><span class="wcntr"> Words: 86</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_210">This is one step beyond <a href="#skip-re-render-from-api-if-article-was-unchanged">skip re-render from API if article was unchanged</a> as it removes the requirement of actually uploading thousands of lines of content.</div><div class="p" id="_211">It requires negotiating with the server instead.</div><div class="p" id="_212">This would be particularly powerful if we included the descendants on the SHA of each parent, much like Git. This way we could skip enter unmodified subtrees, likely like Git.</div><div class="p" id="_213">Yes, we are somewhat re-implementing parts of Git with this. But at least it is simple, and works at a sub-blob level given our grater specialization to our specific use case.</div><div class="h" id="multiheader-editing"><div class="notnav"><h3><a href="todo/multiheader-editing">Multiheader editing</a></h3><span class="hover-meta"> <a class="split" href="todo/multiheader-editing"></a><span class="metrics"><span class="wcntr"> Words: 72</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/multiheader-editing" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_215">Maybe we should only do this after: <a href="https://github.com/ourbigbook/ourbigbook/issues/248">github.com/ourbigbook/ourbigbook/issues/248</a> to prevent data loss.</div><div class="p" id="_216">One possibility is to prevent deletion/renaming of headers. We could just check the new ID list agains the previous ID list.</div><div class="p" id="_217">This was possible previously on Web, but we forbade it for simplicity of implementation sake.</div><div class="p" id="_218">We can then think about how the UI would look like, there might be a "Edit article and descendants" button on toplevel only for example.</div><div class="h" id="make-open-and-close-arrows-have-the-same-height-on-toc"><div class="notnav"><h3><a href="todo/make-open-and-close-arrows-have-the-same-height-on-toc">Make open and close arrows have the same height on ToC</a></h3><span class="hover-meta"> <a class="split" href="todo/make-open-and-close-arrows-have-the-same-height-on-toc"></a><span class="metrics"><span class="wcntr"> Words: 11</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/make-open-and-close-arrows-have-the-same-height-on-toc" class="toc"></a><span class="tags"> Tags: <a href="#toc">ToC</a>, <a href="#ui">UI</a></span></div></nav></div><div class="p" id="_221">Otherwise the difference in ToC line entry spacing is very unnerving.</div><div class="h" id="add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user"><div class="notnav"><h3><a href="todo/add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user">Add sibling/add child buttons next to toc entries of articles owned by the current user</a></h3><span class="hover-meta"> <a class="split" href="todo/add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user"></a><span class="metrics"><span class="wcntr"> Words: 5</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user" class="toc"></a><span class="tags"> Tags: <a href="#toc">ToC</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_224">Self headers done. ToC missing.</div><div class="h" id="progress-spinner-after-submit"><div class="notnav"><h3><a href="todo/progress-spinner-after-submit">Progress spinner after submit</a></h3><span class="hover-meta"> <a class="split" href="todo/progress-spinner-after-submit"></a><span class="metrics"><span class="wcntr"> Words: 36</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/progress-spinner-after-submit" class="toc"></a><span class="tags"> Tags: <a href="#ui">UI</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_227"><a href="#article-create-and-update-slow-on-web">Article create and update slow on web</a> was an extreme case of slowness, but it taught us that we do want some kind of immediate feedback as soon as users click a form submission, and one feedback blocks further action such as typing.</div><div class="h" id="hide-unconfirmed-users"><div class="notnav"><h3><a href="todo/hide-unconfirmed-users">Hide unconfirmed users</a></h3><span class="hover-meta"> <a class="split" href="todo/hide-unconfirmed-users"></a><span class="metrics"><span class="wcntr"> Words: 5</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/hide-unconfirmed-users" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_229">Will likely get solved via: <a href="https://github.com/ourbigbook/ourbigbook/issues/329">github.com/ourbigbook/ourbigbook/issues/329</a></div><div class="h" id="fragment-redirects-not-working-on-web"><div class="notnav"><h3><a href="todo/fragment-redirects-not-working-on-web">Fragment redirects not working on web</a></h3><span class="hover-meta"> <a class="split" href="todo/fragment-redirects-not-working-on-web"></a><span class="metrics"><span class="wcntr"> Words: 12</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/fragment-redirects-not-working-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_231">E.g. <a href="https://ourbigbook.com/cirosantilli/mathematics#cirosantilli/physics">ourbigbook.com/cirosantilli/mathematics#cirosantilli/physics</a> should redirect to <a href="https://ourbigbook.com/cirosantilli/physics">ourbigbook.com/cirosantilli/physics</a></div><div class="p" id="_232">Is working on static website: <a href="https://cirosantilli.com/mathematics#physics">cirosantilli.com/mathematics#physics</a> does redirect to <a href="https://cirosantilli.com/physics">cirosantilli.com/physics</a></div><div class="h" id="wysiwyg"><div class="notnav"><h3><a href="todo/wysiwyg">WYSIWYG</a></h3><span class="hover-meta"> <a class="split" href="todo/wysiwyg"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/wysiwyg" class="toc"></a><span class="tags"> Tags: <a href="#editor">Editor</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article"><div class="notnav"><h3><a href="todo/live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article">Live error checking as you type on editor if chosen previous sibling is not a child of the selected parent article</a></h3><span class="hover-meta"> <a class="split" href="todo/live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article"></a><span class="metrics"><span class="wcntr"> Words: 67</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article" class="toc"></a><span class="tags"> Tags: <a href="#editor">Editor</a>, <a href="#error-checking">Error checking</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_238">Current failure behavior if use submits anyways is: shows API error <code>previousSiblingId "@cirosantilli/physics" does not exist, is not a header or is not a child of parentId "@cirosantilli/test-article"</code> under title, and it only goes away if you edit title, which is confusing as it is not title related. Also, while title error is visible, the submit button is inactive so the user is left a bit stuck.</div><div class="h" id="reach-the-same-performance-as-static-website-with-dynamic-tree"><div class="notnav"><h3><a href="todo/reach-the-same-performance-as-static-website-with-dynamic-tree">Reach the same performance as static website with dynamic tree</a></h3><span class="hover-meta"> <a class="split" href="todo/reach-the-same-performance-as-static-website-with-dynamic-tree"></a><span class="metrics"><span class="wcntr"> Words: 205</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/reach-the-same-performance-as-static-website-with-dynamic-tree" class="toc"></a><span class="tags"> Tags: <a href="#performance">Performance</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_241">The move to dynamic tree slowed things down a lot for large pages such as: <a href="https://ourbigbook.com/cirosantilli">ourbigbook.com/cirosantilli</a>, making it is just unacceptably slow, and actually blocks any other page loads as the server does work.</div><div class="p" id="_242">These were at cirosantilli.github.io at aa60ccb934bf9646d548e6b761489d31aec1a341, which has almost 7k articles.</div><div class="p" id="_243">Some benchmarks on Chromium:<div class="list"><ul id="_244"><li id="_245"><code>ping cirosantilli.com</code>: 17 ms</li><li id="_246"><a href="https://cirosantilli.com">cirosantilli.com</a> <code>GET /</code>: 1.3s. Waiting for server: ping time only, the rest is content download. <code>content-length</code> from response: 300 kB zipped.</li><li id="_247"><a href="https://ourbigbook/cirosantilli">ourbigbook/cirosantilli</a> <code>GET /</code>:<div class="list"><ul id="_248"><li id="_249">Waiting for server response: 3.5s to 4s. That's our problem!</li><li id="_250">Contend download: 2.5s</li></ul></div></li><li id="_251"><a href="http://localhost:3000/cirosantilli">localhost:3000/cirosantilli</a> <code>npm run dev</code> <code>GET /</code>:<div class="list"><ul id="_252"><li id="_253"><div class="p" id="_254">Waiting for server response: between 2 and 3s. So we reproduce relatively well locally.</div><div class="p" id="_255">curl <code>time_starttransfer</code> after a few stabilizing runs: 2.6s</div></li><li id="_256">Contend download: 1.6s</li></ul></div></li></ul></div></div><div class="p" id="_257">If we comment the single line in Article.tsx:<div class="code" id="_258"><div><pre><code>//html += renderTocFromEntryList({ entry_list })</code></pre></div></div>TTFB falls from 2.6s to 0.77s.</div><div class="p" id="_259">Removing the <code>renderRefCallback</code> drops it to between 2.2 and 2.4.</div><div class="p" id="_260">Limiting the ToC to 1k articles on server side leads to 0.5s. Maybe that's the first workaround we have to do until something else is understood. It is a shame that we have to go so much lower than the static website.</div><div class="p" id="_261">Maybe we can use some of the techniques from: <a href="https://reactjs.org/docs/optimizing-performance.html#virtualize-long-lists">reactjs.org/docs/optimizing-performance.html#virtualize-long-lists</a> to improve things.</div><div class="h" id="inject-react-header-metadata-on-each-header-separately"><div class="notnav"><h3><a href="todo/inject-react-header-metadata-on-each-header-separately">Inject React header metadata on each header separately</a></h3><span class="hover-meta"> <a class="split" href="todo/inject-react-header-metadata-on-each-header-separately"></a><span class="metrics"><span class="wcntr"> Words: 44</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/inject-react-header-metadata-on-each-header-separately" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_263">This is closely related to: <a href="#reach-the-same-performance-as-static-website-with-dynamic-tree">Reach the same performance as static website with dynamic tree</a>. Performance considerations should guide if we actually want this or not.</div><div class="p" id="_264">No more need for:<div class="code" id="_265"><div><pre><code>for (const h of elem.querySelectorAll('.h')) {</code></pre></div></div>on <code>Article.tsx</code> now that we have separate headers, we can just inject it one by one.</div><div class="p" id="_266">Bibliography:</div><div class="list"><ul id="_267"><li id="_268"><a href="https://stackoverflow.com/questions/44643424/how-to-parse-html-to-react-component">stackoverflow.com/questions/44643424/how-to-parse-html-to-react-component</a></li><li id="_269"><a href="https://stackoverflow.com/questions/36104302/how-do-i-convert-a-string-to-jsx">stackoverflow.com/questions/36104302/how-do-i-convert-a-string-to-jsx</a></li><li id="_270"><a href="https://stackoverflow.com/questions/71224517/is-it-possible-to-inject-a-next-js-component-into-an-existing-application-html">stackoverflow.com/questions/71224517/is-it-possible-to-inject-a-next-js-component-into-an-existing-application-html</a></li></ul></div><div class="h" id="include-should-work-transparently-with-readme-in-subdirectory"><div class="notnav"><h3><a href="todo/include-should-work-transparently-with-readme-in-subdirectory">Include should work transparently with README in subdirectory</a></h3><span class="hover-meta"> <a class="split" href="todo/include-should-work-transparently-with-readme-in-subdirectory"></a><span class="metrics"><span class="wcntr"> Words: 27</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/include-should-work-transparently-with-readme-in-subdirectory" class="toc"></a><span class="tags"> Tags: <a href="#include">Include</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_273">We should be able to write:</div><div class="p" id="_274">animal.bigb<div class="code" id="_275"><div><pre><code>= Animal

\Include[dog]</code></pre></div></div></div><div class="p" id="_276">dog/README.bigb<div class="code" id="_277"><div><pre><code>= Dog</code></pre></div></div></div><div class="p" id="_278">since the dog.bigb file should ideally be fully equivalent to</div><div class="p" id="_279">dog.bigb<div class="code" id="_280"><div><pre><code>= Dog
{scope}</code></pre></div></div></div><div class="h" id="remove-the-path-parameter-from-the-article-creation-api"><div class="notnav"><h3><a href="todo/remove-the-path-parameter-from-the-article-creation-api">Remove the path parameter from the article creation API</a></h3><span class="hover-meta"> <a class="split" href="todo/remove-the-path-parameter-from-the-article-creation-api"></a><span class="metrics"><span class="wcntr"> Words: 195</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/remove-the-path-parameter-from-the-article-creation-api" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_282">Edit: a use case has come up for this: if we can find an existing article that the user is trying to update, we might be able to determine that it does not need to be converted in the first place: <a href="#skip-re-render-from-api-if-article-was-unchanged">skip re-render from API if article was unchanged</a>. But then of course we can't render the article to find its ID, as the hole point is to skip that render in the first place.</div><div class="p" id="_283">We likely want to get rid of the <code>path</code> parameter, and instead determine IDs fully from more "in-band" things like <code>{id}</code> and <code>{scope}</code>.</div><div class="p" id="_284">Both <code>{scope}</code> for subdirs and <code>{id}</code> for custom id basename !== from title should already be working, we just haven't setup ourbigbook CLI to inject <code>{id}</code> based on file path I think.</div><div class="p" id="_285"><code>{scope}</code> is however not really usable in general on the same source tree of cirosantilli.github.io due to <a href="https://github.com/ourbigbook/ourbigbook/issues/284">github.com/ourbigbook/ourbigbook/issues/284</a>.</div><div class="p" id="_286">This would forbid some constructs that are currently possible locally, e.g. scopes that are not children such as:</div><div class="p" id="_287">parent.bigb<div class="code" id="_288"><div><pre><code>= Parent

== Child
{scope}

=== Child 2
{scope}</code></pre></div></div></div><div class="p" id="_289">parent2.bigb<div class="code" id="_290"><div><pre><code>= Parent

\Include[child/subdir]</code></pre></div></div></div><div class="p" id="_291">child/subdir.bigb<div class="code" id="_292"><div><pre><code>= Subdir</code></pre></div></div></div><div class="p" id="_293">but that is fine, it is saner if we enforce scopes to match the tree article tree hierarchy.</div><div class="h" id="statically-render-links-to-issues-and-topic-under-each-header-for-better-seo"><div class="notnav"><h3><a href="todo/statically-render-links-to-issues-and-topic-under-each-header-for-better-seo">Statically render links to issues and topic under each header for better SEO</a></h3><span class="hover-meta"> <a class="split" href="todo/statically-render-links-to-issues-and-topic-under-each-header-for-better-seo"></a><span class="metrics"><span class="wcntr"> Words: 32</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#issues" class="u"> Issues</a><a href="#_toc/statically-render-links-to-issues-and-topic-under-each-header-for-better-seo" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_295">The links don't show without JavaScript, this can be seen by disabling Js.</div><div class="p" id="_296">The counts can be dynamic loaded, but the links we really want to do at compile time... any way?</div><div class="h" id="make-rendered-issue-and-comment-fragments-as-short-as-possible"><div class="notnav"><h2><a href="todo/make-rendered-issue-and-comment-fragments-as-short-as-possible">Make rendered issue and comment fragments as short as possible</a></h2><span class="hover-meta"> <a class="split" href="todo/make-rendered-issue-and-comment-fragments-as-short-as-possible"></a><span class="metrics"><span class="wcntr"> Words: 149</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> TODO</a><a href="#_toc/make-rendered-issue-and-comment-fragments-as-short-as-possible" class="toc"></a><span class="tags"> Tags: <a href="#comment">Comment</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_299">For now I made them almost fully correct AFAIS:<div class="list"><ul id="_300"><li id="_301">no ID conflicts that would show on the same page, e.g. across issue IDs and comment IDs</li><li id="_302">links seem to go to where we want them to</li></ul></div></div><div class="p" id="_303">The only known bug is: <a href="#cannot-link-from-comment-to-article">cannot link from comment to article</a></div><div class="p" id="_304">However, in order to achieve this easily we used scopes liberally, and so the fragments are horrendously long.</div><div class="p" id="_305">The ideal fragment setup for both comments and issues would be either:<div class="list"><ul id="_306"><li id="_307">we don't ever want to show multiple comments/issues from different issues on same page<div class="list"><ul id="_308"><li id="_309">issue IDs:<div class="list"><ul id="_310"><li id="_311">regular elements <code>my-header</code></li><li id="_312">ToC IDs<div class="list"><ul id="_313"><li id="_314">the ToC: <code>_toc</code></li><li id="_315">the links: <code>_toc/my-header</code></li></ul></div></li></ul></div></li><li id="_316">comment IDs:<div class="list"><ul id="_317"><li id="_318">regular elements <code>_comment/1/my-header</code></li><li id="_319">ToC IDs<div class="list"><ul id="_320"><li id="_321">the ToC: <code>_comment/1/_toc</code></li><li id="_322">the links: <code>_comment/1/_toc/my-header</code></li></ul></div></li></ul></div></li></ul></div></li><li id="_323">we want to show multiple comments/issues from different issues on same page:<div class="list"><ul id="_324"><li id="_325">issue IDs:<div class="list"><ul id="_326"><li id="_327">regular elements <code>_issue/barack-obama/article-topic/1/my-header</code></li><li id="_328">ToC IDs<div class="list"><ul id="_329"><li id="_330">the ToC: <code>_issue/barack-obama/article-topic/1/_toc</code></li><li id="_331">the links: <code>_issue/barack-obama/article-topic/1/_toc/my-header</code></li></ul></div></li></ul></div></li><li id="_332">comment IDs:<div class="list"><ul id="_333"><li id="_334">regular elements <code>_comment/barack-obama/article-topic/&lt;issue-id&gt;/&lt;comment-id&gt;/my-header</code></li><li id="_335">ToC IDs<div class="list"><ul id="_336"><li id="_337">the ToC: <code>_comment/barack-obama/article-topic/&lt;issue-id&gt;/&lt;comment-id&gt;/_toc</code></li><li id="_338">the links: <code>_comment/barack-obama/article-topic/&lt;issue-id&gt;/&lt;comment-id&gt;/_toc/my-header</code></li></ul></div></li></ul></div></li></ul></div></li></ul></div></div><div class="h" id="cannot-link-from-comment-to-article"><div class="notnav"><h2><a href="todo/cannot-link-from-comment-to-article">Cannot link from comment to article</a></h2><span class="hover-meta"> <a class="split" href="todo/cannot-link-from-comment-to-article"></a><span class="metrics"><span class="wcntr"> Words: 371</span><span class="dcnt"> Articles: 12</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> TODO</a><a href="#_toc/cannot-link-from-comment-to-article" class="toc"></a><span class="tags"> Tags: <a href="#comment">Comment</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_341"><a href="https://github.com/ourbigbook/ourbigbook/issues/277">github.com/ourbigbook/ourbigbook/issues/277</a></div><div class="p" id="_342">As of now, does work with a leading slash: <code>&lt;/test data&gt;</code>.</div><div class="p" id="_343">Also: it does work if there is a header in the comment before the link.</div><div class="h" id="clicking-on-the-comment-header-does-not-highlight-the-header-line"><div class="notnav"><h3><a href="todo/clicking-on-the-comment-header-does-not-highlight-the-header-line">Clicking on the comment header does not highlight the header line</a></h3><span class="hover-meta"> <a class="split" href="todo/clicking-on-the-comment-header-does-not-highlight-the-header-line"></a><span class="metrics"><span class="wcntr"> Words: 23</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/clicking-on-the-comment-header-does-not-highlight-the-header-line" class="toc"></a><span class="tags"> Tags: <a href="#comment">Comment</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_346">By that we mean the hardcoded <code>#n</code> area with the metadata, not an h1.</div><div class="p" id="_347">However if you refresh the page, it highlights! Mystery.</div><div class="h" id="comment-h1-self-link-is-empty-and-thus-refreshes-the-page"><div class="notnav"><h3><a href="todo/comment-h1-self-link-is-empty-and-thus-refreshes-the-page">Comment h1 self link is empty and thus refreshes the page</a></h3><span class="hover-meta"> <a class="split" href="todo/comment-h1-self-link-is-empty-and-thus-refreshes-the-page"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/comment-h1-self-link-is-empty-and-thus-refreshes-the-page" class="toc"></a><span class="tags"> Tags: <a href="#comment">Comment</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="remove-all-unnecessary-newlines-from-html-output"><div class="notnav"><h3><a href="todo/remove-all-unnecessary-newlines-from-html-output">Remove all unnecessary newlines from HTML output</a></h3><span class="hover-meta"> <a class="split" href="todo/remove-all-unnecessary-newlines-from-html-output"></a><span class="metrics"><span class="wcntr"> Words: 45</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/remove-all-unnecessary-newlines-from-html-output" class="toc"></a><span class="tags"> Tags: <a href="#lib">Lib</a></span></div></nav></div><div class="p" id="_351">These newlines were added for debugging purposes, but debugging should just be done with:<div class="code" id="_352"><div><pre><code>npx js-beautify min.html</code></pre></div></div></div><div class="p" id="_353">Newlines just add complexity to our codebase, and are not even getting removed from final output as things stand to take up a little bit of useless space.</div><div class="h" id="toc-link-on-headers-not-opening-collapsed-toc-entries"><div class="notnav"><h3><a href="todo/toc-link-on-headers-not-opening-collapsed-toc-entries">ToC link on headers not opening collapsed toc entries</a></h3><span class="hover-meta"> <a class="split" href="todo/toc-link-on-headers-not-opening-collapsed-toc-entries"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/toc-link-on-headers-not-opening-collapsed-toc-entries" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a></span></div></nav></div><div class="h" id="parentid-dropdown-autocomplete"><div class="notnav"><h3><a href="todo/parentid-dropdown-autocomplete">parentId dropdown autocomplete</a></h3><span class="hover-meta"> <a class="split" href="todo/parentid-dropdown-autocomplete"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/parentid-dropdown-autocomplete" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="like-metadata-on-join-on"><div class="notnav"><h3><a href="todo/like-metadata-on-join-on">LIKE metadata on JOIN on</a></h3><span class="hover-meta"> <a class="split" href="todo/like-metadata-on-join-on"></a><span class="metrics"><span class="wcntr"> Words: 5</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/like-metadata-on-join-on" class="toc"></a></div></nav></div><div class="list"><ul id="_356"><li id="_357">web descendants</li><li id="_358">all article lists</li></ul></div><div class="h" id="load-more-articles"><div class="notnav"><h3><a href="todo/load-more-articles">Load more articles</a></h3><span class="hover-meta"> <a class="split" href="todo/load-more-articles"></a><span class="metrics"><span class="wcntr"> Words: 75</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/load-more-articles" class="toc"></a><span class="tags"> Tags: <a href="#dynamic-tree-fetch">Dynamic tree fetch</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_361">Either with scroll or a load more button. Slightly tempted by a load more button?</div><div class="p" id="_362">To implement, we just have to expose the ArticlePage.ts fetch in an API manner. The page then tracks current limit on a state variable, and just requests more from that point onwards.</div><div class="p" id="_363">Starting from the commit of this line, we are also going to limit the ToC, so a load more button on ToC would also be of interest: <a href="#load-more-toc-entrie">load more ToC entrie</a>.</div><div class="h" id="load-more-toc-entrie"><div class="notnav"><h3><a href="todo/load-more-toc-entrie">Load more ToC entrie</a></h3><span class="hover-meta"> <a class="split" href="todo/load-more-toc-entrie"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/load-more-toc-entrie" class="toc"></a><span class="tags"> Tags: <a href="#dynamic-tree-fetch">Dynamic tree fetch</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="word-count-on-web"><div class="notnav"><h3><a href="todo/word-count-on-web">Word count on web</a></h3><span class="hover-meta"> <a class="split" href="todo/word-count-on-web"></a><span class="metrics"><span class="wcntr"> Words: 89</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/word-count-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a>, <a href="#word-count">Word count</a></span></div></nav></div><div class="p" id="_368">Likely also at same time do a source character count.</div><div class="p" id="_369">Likely would be easy to implement as it would reuse the exact same query that we already use to update ncestors of the nested set index.</div><div class="p" id="_370">Was removed at: <a href="#remove-word-count-on-web">remove word count on web</a> because would require actually implementing properly but lazy.</div><div class="p" id="_371">We should likely not show it on link hover however, only headers, as doing so would mean having to update every single page that links to a header for correctness. If this is ever done, it should be Js runtime stuff only.</div><div class="h" id="monaco-editor-requires-web"><div class="notnav"><h3><a href="todo/monaco-editor-requires-web">Monaco editor requires web</a></h3><span class="hover-meta"> <a class="split" href="todo/monaco-editor-requires-web"></a><span class="metrics"><span class="wcntr"> Words: 27</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/monaco-editor-requires-web" class="toc"></a><span class="tags"> Tags: <a href="#editor">Editor</a>, <a href="#offline-development">Offline development</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_375">It seems that the third party library we are using is just a hack and doesn't properly provide the thing offline... OMG could it be so crap? <a href="https://stackoverflow.com/questions/59773190/monaco-editor-with-nextjs/68611592#68611592">stackoverflow.com/questions/59773190/monaco-editor-with-nextjs/68611592#68611592</a></div><div class="h" id="respect-ourbigbook-json-htmlxextension-on-ourbigbook-json-redirects"><div class="notnav"><h3><a href="todo/respect-ourbigbook-json-htmlxextension-on-ourbigbook-json-redirects">Respect ourbigbook.json <code>htmlXExtension</code> on ourbigbook.json redirects</a></h3><span class="hover-meta"> <a class="split" href="todo/respect-ourbigbook-json-htmlxextension-on-ourbigbook-json-redirects"></a><span class="metrics"><span class="wcntr"> Words: 28</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/respect-ourbigbook-json-htmlxextension-on-ourbigbook-json-redirects" class="toc"></a></div></nav></div><div class="p" id="_376">Would require either moving <code>htmlXExtension</code> vs <code>--no-html-x-extension</code> processing out of <code>index.js</code>, or more ideally moving the redirection generation into index.js.</div><div class="p" id="_377">But aint't nobody got time for that!</div><div class="h" id="iframe-macro"><div class="notnav"><h3><a href="todo/iframe-macro">iframe macro</a></h3><span class="hover-meta"> <a class="split" href="todo/iframe-macro"></a><span class="metrics"><span class="wcntr"> Words: 52</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#cannot-link-from-comment-to-article" class="u"> Cannot link from comment to article</a><a href="#_toc/iframe-macro" class="toc"></a></div></nav></div><div class="p" id="_378">Reasonable results can already be obtained with:<br><iframe src="_raw/js/matterjs/examples.html#top-down-asdw-fixed-viewport" width="1000" height="850"></iframe><br>The main issue with that is the possibly changing <code>_raw/js/matterjs/examples.html</code> path depending on scopes, and it is also not very nice to have to write <code>_raw</code> explicitly.</div><div class="p" id="_379">Instead we should do the same handling as is currently done for <code>\a[]</code> and <code>\Image[]</code> on these paths.</div><div class="h" id="closed-issues"><div class="notnav"><h2><a href="todo/closed-issues">Closed issues</a></h2><span class="hover-meta"> <a class="split" href="todo/closed-issues"></a><span class="metrics"><span class="wcntr"> Words: 4k</span><span class="dcnt"> Articles: 72</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> TODO</a><a href="#_toc/closed-issues" class="toc"></a></div></nav></div><div class="h" id="allow-disambiguate-and-id-header-arguments-on-web"><div class="notnav"><h3><a href="todo/allow-disambiguate-and-id-header-arguments-on-web">Allow disambiguate and id header arguments on web</a></h3><span class="hover-meta"> <a class="split" href="todo/allow-disambiguate-and-id-header-arguments-on-web"></a><span class="metrics"><span class="wcntr"> Words: 137</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/allow-disambiguate-and-id-header-arguments-on-web" class="toc"></a><span class="tags"> Tags: <a href="#scope">Scope</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_382">Currently these do not affect the article's ID as there is a fundamental limitation of the <code>convert</code> function, which determines the "file path" based solely on the title content, and ignores the title arguments such as <code>disambiguate</code>. The ID of the first header, the toplevel ID, then just gets fixed to that (as is meant to happen, first toplevel gets Id fixed), ignoring <code>disambiguate</code>.</div><div class="p" id="_383">This is worked around on web upload by passing the <code>id</code> as the <code>path</code> explicitly as an argument. But this argument is not available on web UI, and it would be ugly anyways, what we want is for it to "just work" by default without the user having to explicitly set an ID on web UI.</div><div class="p" id="_384">Fixed at: 56e8d17aa1b716ce69689c6b8aaae0acf4804421 web: fix editing for articles with ID modifiers like scope or disambiguate</div><div class="h" id="remove-scope-from-toc-entry-ids"><div class="notnav"><h3><a href="todo/remove-scope-from-toc-entry-ids">Remove scope from toc entry IDs</a></h3><span class="hover-meta"> <a class="split" href="todo/remove-scope-from-toc-entry-ids"></a><span class="metrics"><span class="wcntr"> Words: 75</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/remove-scope-from-toc-entry-ids" class="toc"></a><span class="tags"> Tags: <a href="#cli">CLI</a>, <a href="#scope">Scope</a></span></div></nav></div><div class="p" id="_387">Happens on CLI and Web, though the web one is a bit artificial.</div><div class="p" id="_388">E.g. <a href="https://cirosantilli.com/x86-paging#toc-x86-paging/sample-code">cirosantilli.com/x86-paging#toc-x86-paging/sample-code</a> should instead be just: <a href="https://cirosantilli.com/x86-paging#toc-sample-code">cirosantilli.com/x86-paging#toc-sample-code</a>. Links from headers to currently work however.</div><div class="p" id="_389">On web will require extra caution after we decided to initially stop culling scopes: <a href="#missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope">missing header metadata such as like button, same topic and issue link on headers under a scope</a>.</div><div class="p" id="_390">Edit: this was fixed on web after we did the insane and amazing dynamic tree JavaScript redirects: <a href="https://ourbigbook.com/cirosantilli/x86-paging#_toc/sample-code">ourbigbook.com/cirosantilli/x86-paging#_toc/sample-code</a> But we never got round to fixing it on static where it still goes to the bad <a href="https://cirosantilli.com/x86-paging#_toc/x86-paging/sample-code">cirosantilli.com/x86-paging#_toc/x86-paging/sample-code</a></div><div class="h" id="split-and-nosplit-links-missing-from-cirosantilli-com"><div class="notnav"><h3><a href="todo/split-and-nosplit-links-missing-from-cirosantilli-com">split and nosplit links missing from cirosantilli.com</a></h3><span class="hover-meta"> <a class="split" href="todo/split-and-nosplit-links-missing-from-cirosantilli-com"></a><span class="metrics"><span class="wcntr"> Words: 3</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/split-and-nosplit-links-missing-from-cirosantilli-com" class="toc"></a></div></nav></div><div class="p" id="_391"><a href="https://cirosantilli.com/brazilian-music-split">cirosantilli.com/brazilian-music-split</a> doesn't have nosplit</div><div class="h" id="move-articles-deleted-locally-to-under-a-trash-article-on-web"><div class="notnav"><h3><a href="todo/move-articles-deleted-locally-to-under-a-trash-article-on-web">Move articles deleted locally to under a trash article on web</a></h3><span class="hover-meta"> <a class="split" href="todo/move-articles-deleted-locally-to-under-a-trash-article-on-web"></a><span class="metrics"><span class="wcntr"> Words: 68</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/move-articles-deleted-locally-to-under-a-trash-article-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_393">During <code>--web</code> upload.</div><div class="p" id="_394">The exact name of that article is a somewhat difficult question, if we go non-magical then:<div><blockquote id="_395">My deleted articles</blockquote></div>will do. But we could go more magical:<div class="code" id="_396"><div><pre><code>_my/trash</code></pre></div></div>or polluting a bit without <code>_</code>:<div class="code" id="_397"><div><pre><code>my/trash</code></pre></div></div>Perhaps such a namespace would be useful for stuff like <code>my/contact</code>, <code>my/body</code>, <code>my/hardware</code> and so on.</div><div class="p" id="_398">Edit: we decided to create unlisted articles rather than doing this.</div><div class="h" id="vs-code-symbol-provider"><div class="notnav"><h3><a href="todo/vs-code-symbol-provider">Vs Code symbol provider</a></h3><span class="hover-meta"> <a class="split" href="todo/vs-code-symbol-provider"></a><span class="metrics"><span class="wcntr"> Words: 40</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/vs-code-symbol-provider" class="toc"></a><span class="tags"> Tags: <a href=".#visual-studio-code">Visual Studio Code</a></span></div></nav></div><div class="p" id="_400">Allow you to Ctrl + Click on any internal link such as <code>\x[]</code> and jump to the corresponding header.</div><div class="p" id="_401"><a href="https://code.visualstudio.com/api/language-extensions/programmatic-language-feature">code.visualstudio.com/api/language-extensions/programmatic-language-feature</a></div><div class="p" id="_402">We'd just use the SQLite database with some exiting wrapper function most likely. Hardest part is likely calculating the target ID.</div><div class="h" id="allow-creating-new-pages-under-scope-on-web"><div class="notnav"><h3><a href="todo/allow-creating-new-pages-under-scope-on-web">Allow creating new pages under scope on web</a></h3><span class="hover-meta"> <a class="split" href="todo/allow-creating-new-pages-under-scope-on-web"></a><span class="metrics"><span class="wcntr"> Words: 84</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/allow-creating-new-pages-under-scope-on-web" class="toc"></a><span class="tags"> Tags: <a href="#scope">Scope</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_405">This casually started working without us noticing much after 3f4e7594ea5d28c3b30a0b7e874ca4627849cbea made parent selection a bit more accurate for scopes. Hurray.</div><div class="p" id="_406">We likely just have to set the <code>path:</code> API argument based on the has scope status of the parent article.</div><div class="p" id="_407">As of the commit that adds this line, it should likely be possible to do it on the backend. On the frontend however we convert <code>/</code> to <code>-</code> so it doesn't work on the existence checks. We need a more accurate ID conversion there.</div><div class="h" id="show-tagged-list-of-non-toplevel-pages"><div class="notnav"><h3><a href="todo/show-tagged-list-of-non-toplevel-pages">Show tagged list of non toplevel pages</a></h3><span class="hover-meta"> <a class="split" href="todo/show-tagged-list-of-non-toplevel-pages"></a><span class="metrics"><span class="wcntr"> Words: 4</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/show-tagged-list-of-non-toplevel-pages" class="toc"></a><span class="tags"> Tags: <a href="#tag">Tag</a></span></div></nav></div><div class="p" id="_409">Both web and CLI.</div><div class="h" id="shorthand-block-quotes"><div class="notnav"><h3><a href="todo/shorthand-block-quotes">Shorthand block quotes</a></h3><span class="hover-meta"> <a class="split" href="todo/shorthand-block-quotes"></a><span class="metrics"><span class="wcntr"> Words: 262</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/shorthand-block-quotes" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_411">OK, I need that, let's go. <code>__</code> like Asciidoctor?<div class="code" id="_412"><div><pre><code>Before.

__
In quote

Another paragraph.
__

After</code></pre></div></div></div><div class="p" id="_413">Maybe also just add inline (non-block) quotes now?</div><div class="p" id="_414">We could also consider an indent based method:<div class="code" id="_415"><div><pre><code>&gt; In quote

  Another paragraph.

After</code></pre></div></div></div><div class="p" id="_416">The cool thing about that is that it would save the sweet sweet one liners:<div class="code" id="_417"><div><pre><code>Before

&gt; In quote

After</code></pre></div></div>but meh, too much indentation typing I think.</div><div class="p" id="_418">Prototype implemented on branch <code>insane-quote</code> with just the single underscore <code>_</code> version to make it fully symmetric with code/math, which is easier to implement. Just by running the tests we saw some common conflicts with the single <code>_</code> due to it appearing in some local file paths pieces of URLs, e.g.:<div class="code" id="_419"><div><pre><code>= My topic
{wiki=Another_one}</code></pre></div></div>and:<div class="code" id="_420"><div><pre><code>= Notindex

&lt;file/path/to/my_file.jpg&gt;

== path/to/my_file.jpg
{file}</code></pre></div></div>Some ideas:<div class="list"><ul id="_421"><li id="_422">generalize things a bit so that <code>_</code> does not exist. Inline quotes go just with the usual <code>""</code> ascii art</li><li id="_423">make some arguments literal by default to cover those common cases. Makes language a bit more insane, but perhaps it is for the best, we don't want HTML expanding in anything that won't end up in the HTML right. That makes the possible future case of defining variables a bit harder. But we could overcome it by just making literals be non literals then when literal is the default, e.g.:<div class="code" id="_424"><div><pre><code>= My topic
{wiki=Another_one}

= My topic
{{wiki=\somevar}}</code></pre></div></div></li></ul></div></div><div class="p" id="_425">Hmm, going with <code>&gt;</code> finally. Part of the reason being that for multiline quotes: <code>\Q[]</code> is just saner and same number of characters. But for single line quotes, <code>&gt;</code> is just too sweet.</div><div class="h" id="toc-js-folding-broken-on-web"><div class="notnav"><h3><a href="todo/toc-js-folding-broken-on-web">ToC Js folding broken on Web</a></h3><span class="hover-meta"> <a class="split" href="todo/toc-js-folding-broken-on-web"></a><span class="metrics"><span class="wcntr"> Words: 3</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/toc-js-folding-broken-on-web" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#toc">ToC</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_429">Working on static.</div><div class="h" id="allow-user-to-edit-other-user-s-articles"><div class="notnav"><h3><a href="todo/allow-user-to-edit-other-user-s-articles">Allow user to edit other user's articles</a></h3><span class="hover-meta"> <a class="split" href="todo/allow-user-to-edit-other-user-s-articles"></a><span class="metrics"><span class="wcntr"> Words: 35</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/allow-user-to-edit-other-user-s-articles" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_431">Curently impossible on the API level: it just takes the logged in user and uses that as the new/edit target.</div><div class="p" id="_432">Current use case: allow admin to edit other user's articles e.g. as part of moderation.</div><div class="h" id="blowup-with-unclosed-image-followed-by-math"><div class="notnav"><h3><a href="todo/blowup-with-unclosed-image-followed-by-math">Blowup with unclosed image followed by math</a></h3><span class="hover-meta"> <a class="split" href="todo/blowup-with-unclosed-image-followed-by-math"></a><span class="metrics"><span class="wcntr"> Words: 6</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/blowup-with-unclosed-image-followed-by-math" class="toc"></a></div></nav></div><div class="code" id="_433"><div><pre><code>= Index

\Image[qwer

$$
asdf
$$</code></pre></div></div><div class="h" id="ordered-list-lost-when-rendering-to-bigb-output-format"><div class="notnav"><h3><a href="todo/ordered-list-lost-when-rendering-to-bigb-output-format">Ordered list lost when rendering to bigb output format</a></h3><span class="hover-meta"> <a class="split" href="todo/ordered-list-lost-when-rendering-to-bigb-output-format"></a><span class="metrics"><span class="wcntr"> Words: 45</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/ordered-list-lost-when-rendering-to-bigb-output-format" class="toc"></a><span class="tags"> Tags: <a href=".#bigb-output-format"><code>bigb</code> output format</a></span></div></nav></div><div class="p" id="_435">Added a commented out test to <a href="_raw/test_bigb_output.bigb">test_bigb_output.bigb</a>:<div class="code" id="_436"><div><pre><code>\Ol[
* p1
* p2
]</code></pre></div></div>renders to just:<div class="code" id="_437"><div><pre><code>* p1
* p2</code></pre></div></div>Also it might be possible to get an extra newline due to this which breaks web upload, but we don't have a min repro currently.</div><div class="h" id="render-large-files-on-split-headers"><div class="notnav"><h3><a href="todo/render-large-files-on-split-headers">Render large files on split headers</a></h3><span class="hover-meta"> <a class="split" href="todo/render-large-files-on-split-headers"></a><span class="metrics"><span class="wcntr"> Words: 98</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/render-large-files-on-split-headers" class="toc"></a><span class="tags"> Tags: <a href="#file">File</a></span></div></nav></div><div class="p" id="_439">Currently files that are large don't render in either multi nor split headers.</div><div class="p" id="_440">But instead we want it to render on split headers because the _raw version does not always show on GitHub pages, but rather gets downloaded which is bad.</div><div class="p" id="_441">The <code>{file}</code> version is also cool as it allows easy navigation to other files, and comments to be added.</div><div class="p" id="_442">This is currently not so easy to implement because things are done at the ast tree level rather than at render time, which is bad. So the same ast ends up going for both split and nosplit renders.</div><div class="h" id="remove-synthetic-asts"><div class="notnav"><h3><a href="todo/remove-synthetic-asts">Don't use helper synthetic AST nodes, render at render time instead</a></h3><span class="hover-meta"> <a class="split" href="todo/remove-synthetic-asts"></a><span class="metrics"><span class="wcntr"> Words: 15</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/remove-synthetic-asts" class="toc"></a><span class="tags"> Tags: <a href="#file">File</a>, <a href="#refactor">Refactor</a></span></div></nav></div><div class="p" id="_445">This is a hard refactor that likely will never be done. But so be it.</div><div class="h" id="view-article-source-on-web"><div class="notnav"><h3><a href="todo/view-article-source-on-web">View article source on web</a></h3><span class="hover-meta"> <a class="split" href="todo/view-article-source-on-web"></a><span class="metrics"><span class="wcntr"> Words: 16</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/view-article-source-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_447">Can start simple with either raw or contained, and then add both some day. GitHub copy.</div><div class="h" id="benchmark-and-optimize-output-size"><div class="notnav"><h3><a href="todo/benchmark-and-optimize-output-size">Benchmark and optimize output size</a></h3><span class="hover-meta"> <a class="split" href="todo/benchmark-and-optimize-output-size"></a><span class="metrics"><span class="wcntr"> Words: 104</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/benchmark-and-optimize-output-size" class="toc"></a></div></nav></div><div class="p" id="_448">Test repo source code size during tests: 7.2 MiB</div><div class="p" id="_449">Full ToC removal with hack:<div class="code" id="_450"><div><pre><code> function renderTocFromEntryList({ add_test_instrumentation, entry_list, descendant_count_html, tocIdPrefix }) {
+  return ''</code></pre></div></div>Test repo output size: 166.6 MB -&gt; 114.2 MB, so ToC was 31 %</div><div class="p" id="_451">Let's check header knockout with:<div class="code" id="_452"><div><pre><code>        [Macro.HEADER_MACRO_NAME]: function(ast, context, opts={}) {
          return ''</code></pre></div></div>down to 151.7 MiB, so headers were about 9%.</div><div class="p" id="_453">And finally removing the toplevel stuff:<div class="code" id="_454"><div><pre><code>       toplevel_child_modifier: function(ast, context, out) {
+        return 'out'</code></pre></div></div>down to 161.8 MB, so these were only about 3%.</div><div class="p" id="_455">These should be the only bulk things we have really, everything else will likely be much harder to get wrong.</div><div class="h" id="web-upload-fails-when-renaming-a-header-to-a-synonym"><div class="notnav"><h3><a href="todo/web-upload-fails-when-renaming-a-header-to-a-synonym">Web upload fails when renaming a header to a synonym</a></h3><span class="hover-meta"> <a class="split" href="todo/web-upload-fails-when-renaming-a-header-to-a-synonym"></a><span class="metrics"><span class="wcntr"> Words: 98</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/web-upload-fails-when-renaming-a-header-to-a-synonym" class="toc"></a><span class="tags"> Tags: <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_457">First:</div><div class="p" id="_458">test-data.bigb<div class="code" id="_459"><div><pre><code>= Test data

== Tmp</code></pre></div></div>then:<div class="code" id="_460"><div><pre><code>ourbigbook --web-test</code></pre></div></div></div><div class="p" id="_461">Then modify to:<div class="code" id="_462"><div><pre><code>= Test data

== Tmp2

= Tmp</code></pre></div></div>and rerun:<div class="code" id="_463"><div><pre><code>ourbigbook --web-test</code></pre></div></div></div><div class="p" id="_464">Error message:<div class="code" id="_465"><div><pre><code>param "bodySource" is mandatory when not rendering or when "path" to an existing article is not given. path="tmp"</code></pre></div></div></div><div class="p" id="_466">Can be worked around by:<div class="code" id="_467"><div><pre><code>rm -rf out</code></pre></div></div>therefore it is just a case of some outdated local state, thank God for that, should be simple to fix.</div><div class="p" id="_468">The root problem seems to be that <code>sqlite3 _out/web/web.sqlite3 .dump</code> still contains <code>tmp</code>, we have to get rid of any synonym headers during ID extraction.</div><div class="h" id="render-ancestors-incoming-links-and-tagged-on-web"><div class="notnav"><h3><a href="todo/render-ancestors-incoming-links-and-tagged-on-web">Render ancestors, incoming links and tagged on web</a></h3><span class="hover-meta"> <a class="split" href="todo/render-ancestors-incoming-links-and-tagged-on-web"></a><span class="metrics"><span class="wcntr"> Words: 2</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/render-ancestors-incoming-links-and-tagged-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_470">All dynamic.</div><div class="h" id="vertical-scrollbar-when-image-title-contains-math-underscore"><div class="notnav"><h3><a href="todo/vertical-scrollbar-when-image-title-contains-math-underscore">Vertical scrollbar when image title contains math underscore</a></h3><span class="hover-meta"> <a class="split" href="todo/vertical-scrollbar-when-image-title-contains-math-underscore"></a><span class="metrics"><span class="wcntr"> Words: 111</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/vertical-scrollbar-when-image-title-contains-math-underscore" class="toc"></a><span class="tags"> Tags: <a href="#css">CSS</a></span></div></nav></div><div class="p" id="_472">Only happens when the title would fit in a single line:<div class="code" id="_473"><div><pre><code>\Image[https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/BSD_data_plot_for_elliptic_curve_800h1.svg/640px-BSD_data_plot_for_elliptic_curve_800h1.svg.png]
{title=$a_b$}
{height=400}</code></pre></div></div></div><div class="p" id="_474">For long titles that go over a single line, it doesn't happen.</div><div class="p" id="_475">Removing from <code>ourbigbook.scss</code>:<div class="code" id="_476"><div><pre><code>figure {
  overflow-x: auto;</code></pre></div></div>fixes for some reason, but breaks everything else, as it adds a global vertical scrollbar to the page if there are any images wider than it (when above the mobile mode where images are just width 100%.</div><div class="p" id="_477">The fundamental issue seems to be: <a href="https://stackoverflow.com/questions/6421966/css-overflow-x-visible-and-overflow-y-hidden-causing-scrollbar-issue">stackoverflow.com/questions/6421966/css-overflow-x-visible-and-overflow-y-hidden-causing-scrollbar-issue</a> which we don't know how to work around. Omg.</div><div class="p" id="_478">To get a clearer effect edit ourbigbook.scss to:<div class="code" id="_479"><div><pre><code>.katex { font-size: 20.2em; }</code></pre></div></div>Only the separation between <code>a</code> and its subscript <code>b</code> seems to matter.</div><div class="h" id="make-articles-removed-locally-empty-on-web-upload"><div class="notnav"><h3><a href="todo/make-articles-removed-locally-empty-on-web-upload">Make articles removed locally empty on web upload</a></h3><span class="hover-meta"> <a class="split" href="todo/make-articles-removed-locally-empty-on-web-upload"></a><span class="metrics"><span class="wcntr"> Words: 211</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/make-articles-removed-locally-empty-on-web-upload" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_482">Otherwise the following sequence leads to a hard to understand failure for the end user.</div><div class="p" id="_483">First the user uploads with:</div><div class="code" id="_484"><div><pre><code>== Header 1

== Header 2

\Image[img.png]{title=My image}</code></pre></div></div><div class="p" id="_485">Then, <code>Header 2</code> is completely removed from all source files and the image is moved to <code>Header 1</code>:</div><div class="code" id="_486"><div><pre><code>== Header 1

\Image[img.png]{title=My image}</code></pre></div></div><div class="p" id="_487">Then, when the use tries to upload again, it fails because of duplicated id <code>image-my-image</code>.</div><div class="p" id="_488">This above sequence of events is not ideal from the users' perspective, as a synonym generation would lead to better URLs:</div><div class="code" id="_489"><div><pre><code>== Header 1

= Header 2
{synonym}

\Image[img.png]{title=My image}</code></pre></div></div><div class="p" id="_490">In that sequence, the File for <code>Header 2</code> would be effectively emptied of Ids, and there would be no duplicates.</div><div class="p" id="_491">But still, if the user deletes a header, it becomes very difficult to know it later on. So perhaps when the CLI downloads the SHA list, it could also check if there are articles on server that both:<div class="list"><ul id="_492"><li id="_493">are not present locally anymore</li><li id="_494">have a non-empty hash</li></ul></div>and then proceed to make any such headers empty to avoid ID duplication.</div><div class="p" id="_495">Aditionaly, it would also be good to move the deleted articles to some predefined header to avoid cluttering the headers. E.g. we could start with a dummy "My deleted articles". Dedicated section: <a href="#move-articles-deleted-locally-to-under-a-trash-article-on-web">Section "Move articles deleted locally to under a trash article on web"</a>.</div><div class="h" id="don-t-skip-parent-previous-sibling-updates-on-web-uploads"><div class="notnav"><h3><a href="todo/don-t-skip-parent-previous-sibling-updates-on-web-uploads">Don't skip parent/previous sibling updates on --web uploads</a></h3><span class="hover-meta"> <a class="split" href="todo/don-t-skip-parent-previous-sibling-updates-on-web-uploads"></a><span class="metrics"><span class="wcntr"> Words: 87</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/don-t-skip-parent-previous-sibling-updates-on-web-uploads" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_498">We have recently implemented SHA-256 skips when article content hasn't changed.</div><div class="p" id="_499">But we also need to check if the parent or previous sibling has changed, and if it has then update that.</div><div class="p" id="_500">We could just return parent and previous sibling on the <code>/hash</code> endpoint.</div><div class="p" id="_501">Or we need to add that information to the SHA.</div><div class="p" id="_502">Ideally we should also have a way to change the tree without re-render, though we could start with re-render for simplicity.</div><div class="p" id="_503">This actually breaks uploads because it leads to inconsistencies when finding previousSiblingId.</div><div class="h" id="cli-nosplit-points-to-self"><div class="notnav"><h3><a href="todo/cli-nosplit-points-to-self">CLI nosplit points to self</a></h3><span class="hover-meta"> <a class="split" href="todo/cli-nosplit-points-to-self"></a><span class="metrics"><span class="wcntr"> Words: 47</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/cli-nosplit-points-to-self" class="toc"></a><span class="tags"> Tags: <a href="#cli">CLI</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_506">E.g.: <a href="https://cirosantilli.com/education-level">cirosantilli.com/education-level</a> nosplit points to the page itself. Should instead point to <a href="https://cirosantilli.com/education#education-level">cirosantilli.com/education#education-level</a></div><div class="p" id="_507">Possiby happens only with:<div class="code" id="_508"><div><pre><code>  "publishOptions": {
    "toSplitHeaders": true,
    "htmlXExtension": false,
    "xPrefix": "https://ourbigbook.com/cirosantilli/"
  },</code></pre></div></div>redirects enabled.</div><div class="p" id="_509">Further investigation shows that <code>"toSplitHeaders": true,</code> is the issue. Fixing this for now bu ust removing the split/nosplit in that case.</div><div class="h" id="pass-previoussiblingid-on-web-upload"><div class="notnav"><h3><a href="todo/pass-previoussiblingid-on-web-upload">Pass previousSiblingId on web upload</a></h3><span class="hover-meta"> <a class="split" href="todo/pass-previoussiblingid-on-web-upload"></a><span class="metrics"><span class="wcntr"> Words: 10</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/pass-previoussiblingid-on-web-upload" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_512">Otherwise uploads become irreproducible if you stop half way. Unacceptable.</div><div class="h" id="links-to-synonym-header-have-fragment"><div class="notnav"><h3><a href="todo/links-to-synonym-header-have-fragment">Links to synonym header have fragment</a></h3><span class="hover-meta"> <a class="split" href="todo/links-to-synonym-header-have-fragment"></a><span class="metrics"><span class="wcntr"> Words: 52</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/links-to-synonym-header-have-fragment" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_515">E.g. from <a href="https://ourbigbook.com/cirosantilli/ciro-santilli">ourbigbook.com/cirosantilli/ciro-santilli</a>:<div class="code" id="_516"><div><pre><code>&lt;Python&gt;</code></pre></div></div>renders as:<div class="code" id="_517"><div><pre><code>/cirosantilli/python-programming-language#cirosantilli/python-programming-language</code></pre></div></div>instead of the desired:<div class="code" id="_518"><div><pre><code>/cirosantilli/python-programming-language</code></pre></div></div></div><div class="p" id="_519">However the link to the non-synonym header:<div class="code" id="_520"><div><pre><code>&lt;Python (programming language)&gt;</code></pre></div></div>renders correctly without the fragment</div><div class="p" id="_521">OK, this was also reproducible on CLI, links to toplevel synonyms had fragments, just it is infinitely more visible on web where everything is toplevel.</div><div class="h" id="put-raw-files-in-a-separate-magic-prefix"><div class="notnav"><h3><a href="todo/put-raw-files-in-a-separate-magic-prefix">Put raw files in a separate magic prefix</a></h3><span class="hover-meta"> <a class="split" href="todo/put-raw-files-in-a-separate-magic-prefix"></a><span class="metrics"><span class="wcntr"> Words: 34</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/put-raw-files-in-a-separate-magic-prefix" class="toc"></a><span class="tags"> Tags: <a href="#file">File</a></span></div></nav></div><div class="p" id="_523">We should have:<div class="list"><ul id="_524"><li id="_525"><code>_raw/path/to/main.py</code>: raw file</li></ul></div>for every file <code>path/to/main.py</code> in the repo to avoid URL clashes, e.g. between:<div class="code" id="_526"><div><pre><code>configure
configure.bigb</code></pre></div></div></div><div class="p" id="_527">Will also serve as a mechanism to view .bigb source without GitHub.</div><div class="h" id="synonym-redirects-on-web"><div class="notnav"><h3><a href="todo/synonym-redirects-on-web">Synonym redirects on web</a></h3><span class="hover-meta"> <a class="split" href="todo/synonym-redirects-on-web"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/synonym-redirects-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="start-a-basic-notification-system"><div class="notnav"><h3><a href="todo/start-a-basic-notification-system">Start a basic notification system</a></h3><span class="hover-meta"> <a class="split" href="todo/start-a-basic-notification-system"></a><span class="metrics"><span class="wcntr"> Words: 31</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/start-a-basic-notification-system" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_530">OK, now after the big redirect from cirosantilli.com to ourbigbook.com, this is becoming more pressing.</div><div class="p" id="_531">We could start simple without any in-browser things, email only. Though having both would be ideal...</div><div class="h" id="2"><div class="notnav"><h3><a href="todo/2">Find a way to show index.html raw files that get overriden by directory listings</a></h3><span class="hover-meta"> <a class="split" href="todo/2"></a><span class="metrics"><span class="wcntr"> Words: 102</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/2" class="toc"></a><span class="tags"> Tags: <a href="#file">File</a></span></div></nav></div><div class="p" id="_533">Edit: first implemented the <code>_index</code> thing. But actually noticed would be saner with a separate <code>_dir/</code> prefix for directories. Otherwise a recursive wget/zip would not work out of box which makes me sad. It is a bit sad that you can't just remove a path from <code>_raw/path/to/file.txt</code> to go to <code>_raw/path/to/</code> as you need <code>_dir/path/to/</code> instead. But so bet it.</div><div class="p" id="_534">E.g. <code>subdir/index.html</code> which would show up under <code>_raw/subdir/index.html</code> gets overriden by the directory listing of <code>subdir/</code> which goes to the same location.</div><div class="p" id="_535">One possibility would be to add an underscore: <code>_raw/subdir/_index.html</code> for the file. And another underscore for <code>_index.html</code> and so on.</div><div class="h" id="automatically-add-source-to-archive-org-images"><div class="notnav"><h3><a href="todo/automatically-add-source-to-archive-org-images">Automatically add <code>source</code> to archive.org images</a></h3><span class="hover-meta"> <a class="split" href="todo/automatically-add-source-to-archive-org-images"></a><span class="metrics"><span class="wcntr"> Words: 32</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/automatically-add-source-to-archive-org-images" class="toc"></a><span class="tags"> Tags: <a href="#image">Image</a></span></div></nav></div><div class="p" id="_537">E.g. <a href="https://web.archive.org/web/20230227073734im_/https://upload.wikimedia.org/wikipedia/commons/2/2b/STED_Mikroskop_PSFs.jpg">web.archive.org/web/20230227073734im_/https://upload.wikimedia.org/wikipedia/commons/2/2b/STED_Mikroskop_PSFs.jpg</a> to <a href="https://upload.wikimedia.org/wikipedia/commons/2/2b/STED_Mikroskop_PSFs.jpg">upload.wikimedia.org/wikipedia/commons/2/2b/STED_Mikroskop_PSFs.jpg</a>.</div><div class="p" id="_538">Edit: OK that is useless. The source needs to be an HTML page, and we can't infer that from the archive links. Manual sources are necessary in that case.</div><div class="h" id="put-files-in-a-separate-namespace"><div class="notnav"><h3><a href="todo/put-files-in-a-separate-namespace">Put files in a separate namespace</a></h3><span class="hover-meta"> <a class="split" href="todo/put-files-in-a-separate-namespace"></a><span class="metrics"><span class="wcntr"> Words: 21</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/put-files-in-a-separate-namespace" class="toc"></a><span class="tags"> Tags: <a href="#file">File</a></span></div></nav></div><div class="p" id="_540">We should have:<div class="list"><ul id="_541"><li id="_542"><code>_file/path/to/main.py</code>: OurBigBook section showing preview of file + comments/metadata</li><li id="_543"><code>_raw/path/to/main.py</code>: raw file</li></ul></div>Done the <code>_file</code> part.</div><div class="h" id="following-and-followed-tabs-are-swapped"><div class="notnav"><h3><a href="todo/following-and-followed-tabs-are-swapped">Following and followed tabs are swapped</a></h3><span class="hover-meta"> <a class="split" href="todo/following-and-followed-tabs-are-swapped"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/following-and-followed-tabs-are-swapped" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id"><div class="notnav"><h3><a href="todo/undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id">Undefined tag error message for directory conversion says header ID is not defined instead of tag ID</a></h3><span class="hover-meta"> <a class="split" href="todo/undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id"></a><span class="metrics"><span class="wcntr"> Words: 36</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#tag">Tag</a></span></div></nav></div><div class="p" id="_547">README.bigb<div class="code" id="_548"><div><pre><code>= Tmp

== Tmp 2
{tag=adsf}</code></pre></div></div>convert:<div class="code" id="_549"><div><pre><code>ourbigbook .</code></pre></div></div>outcome:<div class="code" id="_550"><div><pre><code>extract_ids: README.bigb
extract_ids: README.bigb finished in 43.47357300110161 ms
error:
README.bigb:4:1: cross reference to unknown id: "tmp-2"</code></pre></div></div>expected outcome:<div class="code" id="_551"><div><pre><code>README.bigb:4:1: cross reference to unknown id: "asdf"</code></pre></div></div></div><div class="h" id="design-a-project-banner"><div class="notnav"><h3><a href="todo/design-a-project-banner">Design a project banner</a></h3><span class="hover-meta"> <a class="split" href="todo/design-a-project-banner"></a><span class="metrics"><span class="wcntr"> Words: 21</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/design-a-project-banner" class="toc"></a><span class="tags"> Tags: <a href="#publicity">Publicity</a></span></div></nav></div><div class="p" id="_553">E.g. for Twitter and LinkedIn.</div><div class="p" id="_554">Maybe a screenshot of the website?</div><div class="p" id="_555">If we could represent topics somehow that would be ideal...</div><div class="h" id="subsections-missing-on-web-dynamic-tree"><div class="notnav"><h3><a href="todo/subsections-missing-on-web-dynamic-tree">Subsections missing on web dynamic tree</a></h3><span class="hover-meta"> <a class="split" href="todo/subsections-missing-on-web-dynamic-tree"></a><span class="metrics"><span class="wcntr"> Words: 145</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/subsections-missing-on-web-dynamic-tree" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#dynamic-tree-fetch">Dynamic tree fetch</a></span></div></nav></div><div class="p" id="_558">Going to close it for now as irreproducible. Worked around it by fixing data manualy with the new <code>nested-set</code> CLI tool. Will try to debug further if it shows up again in the future.</div><div class="p" id="_559">On web now:<div class="list"><ul id="_560"><li id="_561"><a href="https://ourbigbook.com/barack-obama">ourbigbook.com/barack-obama</a> shows Fundamental theorem of calculus under "Integral", correct</li><li id="_562"><a href="https://ourbigbook.com/barack-obama/mathematics">ourbigbook.com/barack-obama/mathematics</a> does not show "Fundamental theorem of calculus", incorrect</li></ul></div></div><div class="p" id="_563">We can only reproduce locally by copying the database, we haven't managed to reach such state by a clean sequence of pure API calls, clean naive <code>web/bin/generate-demo-data -C -u1</code> didn't reproduce either.</div><div class="p" id="_564">Upon quickly inspectig the DB we see that the nested set indexes are wrong:<div class="code" id="_565"><div><pre><code>[ 'barack-obama', 0, 36 ],
[ 'barack-obama/mathematics', 1, 9 ],
[ 'barack-obama/fundamental-theorem-of-calculus', 9, 11 ],</code></pre></div></div><code>barack-obama/mathematics</code> should stop something larger than <code>9</code> to include <code>barack-obama/fundamental-theorem-of-calculus</code> and other children.</div><div class="p" id="_566">The question is now if this is still reachable, of if it was due to a previous bug.</div><div class="h" id="enable-web-math-defines-default-on-non-web"><div class="notnav"><h3><a href="todo/enable-web-math-defines-default-on-non-web">Enable web math defines default on non-web</a></h3><span class="hover-meta"> <a class="split" href="todo/enable-web-math-defines-default-on-non-web"></a><span class="metrics"><span class="wcntr"> Words: 28</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/enable-web-math-defines-default-on-non-web" class="toc"></a><span class="tags"> Tags: <a href="#math">Math</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_569">This is the only way to have portable maths across local and server.</div><div class="p" id="_570">The definitions are also useful by default to users, and should just be enabled out-of-box.</div><div class="h" id="enable-web-math-defines-on-web-editor"><div class="notnav"><h3><a href="todo/enable-web-math-defines-on-web-editor">Enable web math defines on web editor</a></h3><span class="hover-meta"> <a class="split" href="todo/enable-web-math-defines-on-web-editor"></a><span class="metrics"><span class="wcntr"> Words: 28</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/enable-web-math-defines-on-web-editor" class="toc"></a><span class="tags"> Tags: <a href="#editor">Editor</a>, <a href="#math">Math</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_574">They're not enabled there, conversion just fails and user can't submit because button is grayed out. Via API already works however, supposing the user has defined them: <a href="#enable-web-math-defines-default-on-non-web">enable web math defines default on non-web</a>.</div><div class="h" id="store-auto-formated-bigb-source-on-web"><div class="notnav"><h3><a href="todo/store-auto-formated-bigb-source-on-web">Store auto-formated bigb source on web</a></h3><span class="hover-meta"> <a class="split" href="todo/store-auto-formated-bigb-source-on-web"></a><span class="metrics"><span class="wcntr"> Words: 58</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/store-auto-formated-bigb-source-on-web" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a></span></div></nav></div><div class="p" id="_576">Edit: caching only fails if you edit on web, then somehow download it and change and reupload. But change implies rerender. Hard to see a case where this actually causes problems.</div><div class="p" id="_577">We are auto-formatting locally for splitting and to get rid of includes.</div><div class="p" id="_578">So we need to also format on web in order for content caching to work.</div><div class="h" id="split-out-bigb-and-out-web"><div class="notnav"><h3><a href="todo/split-out-bigb-and-out-web">Split _out/bigb and _out/web</a></h3><span class="hover-meta"> <a class="split" href="todo/split-out-bigb-and-out-web"></a><span class="metrics"><span class="wcntr"> Words: 44</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/split-out-bigb-and-out-web" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a></span></div></nav></div><div class="p" id="_580">Currently:<div class="code" id="_581"><div><pre><code>ourbigbook --web</code></pre></div></div>stores the split renders under:<div class="code" id="_582"><div><pre><code>out/bigb</code></pre></div></div>since it is a bigb output.</div><div class="p" id="_583">However, that bigb output is different from the one gnerated with:<div class="code" id="_584"><div><pre><code>ourbigbook -O bigb .</code></pre></div></div>since the latter contains <code>\Include</code> which need to be removed from the <code>web/</code> output.</div><div class="h" id="skip-re-render-from-api-if-article-was-unchanged"><div class="notnav"><h3><a href="todo/skip-re-render-from-api-if-article-was-unchanged">Skip re-render from API if article was unchanged</a></h3><span class="hover-meta"> <a class="split" href="todo/skip-re-render-from-api-if-article-was-unchanged"></a><span class="metrics"><span class="wcntr"> Words: 5</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/skip-re-render-from-api-if-article-was-unchanged" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a>, <a href="#web-upload">Web upload</a></span></div></nav></div><div class="p" id="_587">Would radically speed sync up.</div><div class="h" id="computer-sticker"><div class="notnav"><h3><a href="todo/computer-sticker">Computer sticker</a></h3><span class="hover-meta"> <a class="split" href="todo/computer-sticker"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/computer-sticker" class="toc"></a><span class="tags"> Tags: <a href="#publicity">Publicity</a></span></div></nav></div><div class="h" id="prevent-full-page-reload-on-links-using-our-existing-link-capture"><div class="notnav"><h3><a href="todo/prevent-full-page-reload-on-links-using-our-existing-link-capture">Prevent full page reload on links using our existing link capture</a></h3><span class="hover-meta"> <a class="split" href="todo/prevent-full-page-reload-on-links-using-our-existing-link-capture"></a><span class="metrics"><span class="wcntr"> Words: 17</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/prevent-full-page-reload-on-links-using-our-existing-link-capture" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_590">Would be a possibly good solution now to: <a href="https://github.com/ourbigbook/ourbigbook/issues/274">github.com/ourbigbook/ourbigbook/issues/274</a> now that we already have link click capturing necessarily.</div><div class="h" id="second-meta-line-showing-up-on-index-page-even-if-empty"><div class="notnav"><h3><a href="todo/second-meta-line-showing-up-on-index-page-even-if-empty">Second meta line showing up on index page even if empty</a></h3><span class="hover-meta"> <a class="split" href="todo/second-meta-line-showing-up-on-index-page-even-if-empty"></a><span class="metrics"><span class="wcntr"> Words: 13</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/second-meta-line-showing-up-on-index-page-even-if-empty" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_592">Index has no parent, so the line may be empty in that case.</div><div class="h" id="article-create-and-update-slow-on-web"><div class="notnav"><h3><a href="todo/article-create-and-update-slow-on-web">Article create and update slow on web</a></h3><span class="hover-meta"> <a class="split" href="todo/article-create-and-update-slow-on-web"></a><span class="metrics"><span class="wcntr"> Words: 1k</span><span class="dcnt"> Articles: 1</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/article-create-and-update-slow-on-web" class="toc"></a><span class="tags"> Tags: <a href="#performance">Performance</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_595"><a href="https://ourbigbook.com/api/articles">ourbigbook.com/api/articles</a></div><div class="p" id="_596">For user cirosantilli, just pushed cirosantilli.github.io at aa60ccb934bf9646d548e6b761489d31aec1a341, which has almost 7k articles.</div><div class="p" id="_597">The POST to <a href="https://ourbigbook.com/api/articles">ourbigbook.com/api/articles</a> is taking about 3s to 4s on ourbigbook.com "Waiting for server response", 3.44s seems like an common average exact value that often comes back.</div><div class="p" id="_598">This was after dynamic article tree, one suspicion is that it might be linked to maintaining the nested set state on a large set of articles. I really hope that's not it, as it would be hard to fix.</div><div class="p" id="_599">Doing it from the <code>barack-obama</code> test user which only has about 50 articles leads to the same result, but we believe it is because we are not indexing things by user properly (this was added later), so might still be due to nested set.</div><div class="p" id="_600">Locally on sqlite is only 800 ms to 900 ms.</div><div class="p" id="_601">Locally on postgresql with <code>barack-obama</code> user and no <code>cirosantilli</code> data, the POST is almost instantaneous however... 100ms or less!</div><div class="p" id="_602">Local postgresql with <code>cirosantilli</code> user after uploading cirosantilli.github.io with about 7k articles: usually around 2.4s, sometimes a bit less.</div><div class="p" id="_603">Same but with <code>barack-obama</code>: 2.16s! So the main slowdown is likely that we are not properly indexing things, as one users' article affects the other's!</div><div class="p" id="_604">Let's hack it up to see:<div class="code" id="_605"><div><pre><code>./bin/psql
alter table "Article" add "authorId" integer;
update "Article" as a set "authorId" = f."authorId" from "File" as f where a."fileId" = f.id
create index idx_nested ON "Article" using btree ("authorId", "nestedSetIndex");</code></pre></div></div></div><div class="p" id="_606">and patch:</div><div class="code" id="_607"><div><pre><code>diff --git a/web/convert.js b/web/convert.js
index 59870ae3..ff834708 100644
--- a/web/convert.js
+++ b/web/convert.js
@@ -568,6 +568,7 @@ async function convertArticle({
         const rendered_output = extra_returns.rendered_outputs[outpath]
         const renderFull = rendered_output.full
         articleArgs.push({
+          authorId: file.authorId,
           depth: newDepth,
           fileId: file.id,
           h1Render: renderFull.substring(0, rendered_output.h1RenderLength),
@@ -599,6 +600,7 @@ async function convertArticle({
         articleArgs,
         {
           updateOnDuplicate: [
+            'authorId',
             'h1Render',
             'h2Render',
             'titleRender',
diff --git a/web/models/article.js b/web/models/article.js
index 40dbbdba..1c382acc 100644
--- a/web/models/article.js
+++ b/web/models/article.js
@@ -13,6 +13,10 @@ module.exports = (sequelize) =&gt; {
     'Article',
     {
       // E.g. `johnsmith/mathematics`.
+      authorId: {
+        type: DataTypes.INTEGER,
+        allowNull: false,
+      },
       slug: {
         type: DataTypes.TEXT,
         unique: {</code></pre></div></div><div class="p" id="_608">Didin't help :-(</div><div class="p" id="_609">A cleaner benchmarking can now be done with:<div class="code" id="_610"><div><pre><code>OURBIGBOOK_POSTGRES=1 ./bin/generate-demo-data.js -C -u1 -a650 -i0 -c0</code></pre></div></div>By this size, things are already unreasonably slow, and you can visibly see the latter renders being much slower than the early ones. We can then do a very minimal one off benchmark of a single slow article update with:<div class="code" id="_611"><div><pre><code>OURBIGBOOK_POSTGRES=1 ./bin/generate-demo-data.js -u1 -a1 -i0 -c0</code></pre></div></div>OK, now the test case is clearer.</div><div class="p" id="_612">By also enabling SQL logging:<div class="code" id="_613"><div><pre><code>time DEBUG='*:sql:*' OURBIGBOOK_POSTGRES=1 ./bin/generate-demo-data.js -u1 -a1 -i0 -c0</code></pre></div></div>which gave:<div class="code" id="_614"><div><pre><code>real    0m1.400s
user    0m0.643s
sys     0m0.068s</code></pre></div></div>we will be able to see any slow queries. We reach the following two massively slow queries:<div class="code" id="_615"><div><pre><code>SELECT
  "Ref".*,
  "to"."id" AS "to.id",
  "to"."idid" AS "to.idid",
  "to"."path" AS "to.path",
  "to"."toplevel_id" AS "to.toplevel_id",
  "to"."ast_json" AS "to.ast_json",
  "to"."macro_name" AS "to.macro_name",
  "to"."createdAt" AS "to.createdAt",
  "to"."updatedAt" AS "to.updatedAt",
  "to-&gt;File"."id" AS "to.File.id",
  "to-&gt;File"."path" AS "to.File.path",
  "to-&gt;File"."toplevel_id" AS "to.File.toplevel_id",
  "to-&gt;File"."last_parse" AS "to.File.last_parse",
  "to-&gt;File"."last_render" AS "to.File.last_render",
  "to-&gt;File"."titleSource" AS "to.File.titleSource",
  "to-&gt;File"."bodySource" AS "to.File.bodySource",
  "to-&gt;File"."createdAt" AS "to.File.createdAt",
  "to-&gt;File"."updatedAt" AS "to.File.updatedAt",
  "to-&gt;File"."authorId" AS "to.File.authorId",
  "to-&gt;File-&gt;file"."id" AS "to.File.file.id",
  "to-&gt;File-&gt;file"."slug" AS "to.File.file.slug",
  "to-&gt;File-&gt;file"."topicId" AS "to.File.file.topicId",
  "to-&gt;File-&gt;file"."titleRender" AS "to.File.file.titleRender",
  "to-&gt;File-&gt;file"."titleSource" AS "to.File.file.titleSource",
  "to-&gt;File-&gt;file"."titleSourceLine" AS "to.File.file.titleSourceLine",
  "to-&gt;File-&gt;file"."render" AS "to.File.file.render",
  "to-&gt;File-&gt;file"."h1Render" AS "to.File.file.h1Render",
  "to-&gt;File-&gt;file"."h2Render" AS "to.File.file.h2Render",
  "to-&gt;File-&gt;file"."depth" AS "to.File.file.depth",
  "to-&gt;File-&gt;file"."score" AS "to.File.file.score",
  "to-&gt;File-&gt;file"."nestedSetIndex" AS "to.File.file.nestedSetIndex",
  "to-&gt;File-&gt;file"."nestedSetNextSibling" AS "to.File.file.nestedSetNextSibling",
  "to-&gt;File-&gt;file"."createdAt" AS "to.File.file.createdAt",
  "to-&gt;File-&gt;file"."updatedAt" AS "to.File.file.updatedAt",
  "to-&gt;File-&gt;file"."fileId" AS "to.File.file.fileId",
  "from"."id" AS "from.id",
  "from"."idid" AS "from.idid",
  "from"."path" AS "from.path",
  "from"."toplevel_id" AS "from.toplevel_id",
  "from"."ast_json" AS "from.ast_json",
  "from"."macro_name" AS "from.macro_name",
  "from"."createdAt" AS "from.createdAt",
  "from"."updatedAt" AS "from.updatedAt",
  "from-&gt;File"."id" AS "from.File.id",
  "from-&gt;File"."path" AS "from.File.path",
  "from-&gt;File"."toplevel_id" AS "from.File.toplevel_id",
  "from-&gt;File"."last_parse" AS "from.File.last_parse",
  "from-&gt;File"."last_render" AS "from.File.last_render",
  "from-&gt;File"."titleSource" AS "from.File.titleSource",
  "from-&gt;File"."bodySource" AS "from.File.bodySource",
  "from-&gt;File"."createdAt" AS "from.File.createdAt",
  "from-&gt;File"."updatedAt" AS "from.File.updatedAt",
  "from-&gt;File"."authorId" AS "from.File.authorId",
  "from-&gt;File-&gt;file"."id" AS "from.File.file.id",
  "from-&gt;File-&gt;file"."slug" AS "from.File.file.slug",
  "from-&gt;File-&gt;file"."topicId" AS "from.File.file.topicId",
  "from-&gt;File-&gt;file"."titleRender" AS "from.File.file.titleRender",
  "from-&gt;File-&gt;file"."titleSource" AS "from.File.file.titleSource",
  "from-&gt;File-&gt;file"."titleSourceLine" AS "from.File.file.titleSourceLine",
  "from-&gt;File-&gt;file"."render" AS "from.File.file.render",
  "from-&gt;File-&gt;file"."h1Render" AS "from.File.file.h1Render",
  "from-&gt;File-&gt;file"."h2Render" AS "from.File.file.h2Render",
  "from-&gt;File-&gt;file"."depth" AS "from.File.file.depth",
  "from-&gt;File-&gt;file"."score" AS "from.File.file.score",
  "from-&gt;File-&gt;file"."nestedSetIndex" AS "from.File.file.nestedSetIndex",
  "from-&gt;File-&gt;file"."nestedSetNextSibling" AS "from.File.file.nestedSetNextSibling",
  "from-&gt;File-&gt;file"."createdAt" AS "from.File.file.createdAt",
  "from-&gt;File-&gt;file"."updatedAt" AS "from.File.file.updatedAt",
  "from-&gt;File-&gt;file"."fileId" AS "from.File.file.fileId"
FROM
  (
    SELECT
      "Ref"."id",
      "Ref"."type",
      "Ref"."from_id",
      "Ref"."to_id",
      "Ref"."defined_at",
      "Ref"."defined_at_line",
      "Ref"."defined_at_col",
      "Ref"."inflected",
      "Ref"."to_id_index",
      "Ref"."createdAt",
      "Ref"."updatedAt"
    FROM
      "Ref" AS "Ref"
    WHERE
      "Ref"."to_id" = '@barack-obama/test-data'
      AND "Ref"."type" = 0
    LIMIT
      1
  ) AS "Ref"
  LEFT OUTER JOIN "Id" AS "to" ON "Ref"."to_id" = "to"."idid"
  LEFT OUTER JOIN "File" AS "to-&gt;File" ON "to"."idid" = "to-&gt;File"."toplevel_id"
  LEFT OUTER JOIN "Article" AS "to-&gt;File-&gt;file" ON "to-&gt;File"."id" = "to-&gt;File-&gt;file"."fileId"
  LEFT OUTER JOIN "Id" AS "from" ON "Ref"."from_id" = "from"."idid"
  LEFT OUTER JOIN "File" AS "from-&gt;File" ON "from"."idid" = "from-&gt;File"."toplevel_id"
  LEFT OUTER JOIN "Article" AS "from-&gt;File-&gt;file" ON "from-&gt;File"."id" = "from-&gt;File-&gt;file"."fileId";

+451ms

SELECT
  "Id".*,
  "File"."id" AS "File.id",
  "File"."path" AS "File.path",
  "File"."toplevel_id" AS "File.toplevel_id",
  "File"."last_parse" AS "File.last_parse",
  "File"."last_render" AS "File.last_render",
  "File"."titleSource" AS "File.titleSource",
  "File"."bodySource" AS "File.bodySource",
  "File"."createdAt" AS "File.createdAt",
  "File"."updatedAt" AS "File.updatedAt",
  "File"."authorId" AS "File.authorId",
  "File-&gt;file"."id" AS "File.file.id",
  "File-&gt;file"."slug" AS "File.file.slug",
  "File-&gt;file"."topicId" AS "File.file.topicId",
  "File-&gt;file"."titleRender" AS "File.file.titleRender",
  "File-&gt;file"."titleSource" AS "File.file.titleSource",
  "File-&gt;file"."titleSourceLine" AS "File.file.titleSourceLine",
  "File-&gt;file"."render" AS "File.file.render",
  "File-&gt;file"."h1Render" AS "File.file.h1Render",
  "File-&gt;file"."h2Render" AS "File.file.h2Render",
  "File-&gt;file"."depth" AS "File.file.depth",
  "File-&gt;file"."score" AS "File.file.score",
  "File-&gt;file"."nestedSetIndex" AS "File.file.nestedSetIndex",
  "File-&gt;file"."nestedSetNextSibling" AS "File.file.nestedSetNextSibling",
  "File-&gt;file"."createdAt" AS "File.file.createdAt",
  "File-&gt;file"."updatedAt" AS "File.file.updatedAt",
  "File-&gt;file"."fileId" AS "File.file.fileId"
FROM
  (
    SELECT
      "Id"."id",
      "Id"."idid",
      "Id"."path",
      "Id"."toplevel_id",
      "Id"."ast_json",
      "Id"."macro_name",
      "Id"."createdAt",
      "Id"."updatedAt"
    FROM
      "Id" AS "Id"
    WHERE
      "Id"."idid" = '@barack-obama'
    LIMIT
      1
  ) AS "Id"
  LEFT OUTER JOIN "File" AS "File" ON "Id"."idid" = "File"."toplevel_id"
  LEFT OUTER JOIN "Article" AS "File-&gt;file" ON "File"."id" = "File-&gt;file"."fileId"

+227m</code></pre></div></div>Hmmm, so no slow updates, only selects. Surprising!</div><div class="p" id="_616">The first query is the:<div class="code" id="_617"><div><pre><code>const oldRef = await sequelize.models.Ref.findOne({</code></pre></div></div></div><div class="p" id="_618">OK, we manually reduced the first query to a subset:<div class="code" id="_619"><div><pre><code>SELECT
  "Ref"."to_id",
  "Ref"."from_id",
  "From"."idid" AS "From.idid",
  "From-&gt;File"."titleSource" AS "From-&gt;File.titleSource"
FROM "Ref"
INNER JOIN "Id" AS "From"
ON
  "Ref"."from_id" = "From"."idid" AND
  "Ref"."to_id" = '@barack-obama/test-data' AND
  "Ref"."type" = 0
INNER JOIN "File" AS "From-&gt;File"
  ON "From"."idid" = "From-&gt;File"."toplevel_id"
INNER JOIN "Article" AS "From-&gt;Article"
  ON "From-&gt;File"."id" = "From-&gt;Article"."fileId"
;</code></pre></div></div>which we were certain should not be slow, and then by commenting things out learnt that foreign keys are not automatically indexed, so the <code>fileId</code> finding was super slow!!! OMG.</div><div class="p" id="_620">That single one line change drops us down to half the creation time, amazing:<div class="code" id="_621"><div><pre><code>real    0m0.668s
user    0m0.638s
sys     0m0.035s</code></pre></div></div></div><div class="p" id="_622">On heroku, after manually doing:<div class="code" id="_623"><div><pre><code>create index article_file_id ON "Article" using btree ("fileId");</code></pre></div></div>new article time fell down to 400ms, which is amazing. One liner! Special thanks to sequelize for the timing info.</div><div class="p" id="_624">After this, the only DB activity that has more than 15ms is:<div class="code" id="_625"><div><pre><code>sequelize:sql:pg Executing (default): SELECT "id", "username", "ip", "displayName", "email", "image", "hash", "salt", "score", "followerCount", "admin", "verified", "verificationCode", "verificationCodeSent", "maxArticles", "maxArticleSize", "createdAt", "updatedAt" FROM "User" AS "User" WHERE "User"."username" = 'barack-obama'; +53ms</code></pre></div></div>but we don't reproduce it in isolation, must be something else in play, e.g. something in parallel.</div><div class="h" id="article-create-and-update-slow-on-web-update-1"><div class="notnav"><h4><a href="todo/article-create-and-update-slow-on-web-update-1">Article create and update slow on web update 1</a></h4><span class="hover-meta"> <a class="split" href="todo/article-create-and-update-slow-on-web-update-1"></a><span class="metrics"><span class="wcntr"> Words: 154</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#article-create-and-update-slow-on-web" class="u"> Article create and update slow on web</a><a href="#_toc/article-create-and-update-slow-on-web-update-1" class="toc"></a></div></nav></div><div class="p" id="_626">As of this commit did a bit further investigation with a better tooling and more understanding, notably now we run:<div class="code" id="_627"><div><pre><code>OURBIGBOOK_LOG_DB=1 num run dev-pg</code></pre></div></div></div><div class="p" id="_628">Heroku is definitely slower than local, at around 1 t o2 s on the bit first ten pages:<div class="code" id="_629"><div><pre><code>ourbigbook --web --web-force-render --web-max-renders 10</code></pre></div></div>but local was also rather slow when we have about the same number of articles for the user.</div><div class="p" id="_630">After some improved benchmarking setup, there seem to be two separate causes:<div class="list"><ul id="_631"><li id="_632"><div class="p" id="_633">preventing: <code>options.db_provider.fetch_header_tree_ids(</code> on web. It is not necessary as we render the ToC dynamically.</div><div class="p" id="_634">This matters the most for toplevel articles with many descendants.</div></li><li id="_635"><div class="p" id="_636">the other problem we haven't solved yet: the nested index update querries are slow. We don't know how to solve that easily.</div><div class="p" id="_637">Those querries simply update a huge number of rows.</div><div class="p" id="_638">Maybe we could have a fallback mechanism to build that index on the background, and use the tree index temporarily?</div><div class="p" id="_639">Hard call.</div></li></ul></div></div><div class="h" id="donate-button-on-web"><div class="notnav"><h3><a href="todo/donate-button-on-web">Donate button on web</a></h3><span class="hover-meta"> <a class="split" href="todo/donate-button-on-web"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/donate-button-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift"><div class="notnav"><h3><a href="todo/beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift"><code>(beta)</code> on navbar gets pushed down half way at a specific page width just above mobile shift</a></h3><span class="hover-meta"> <a class="split" href="todo/beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift"></a><span class="metrics"><span class="wcntr"> Words: 55</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift" class="toc"></a><span class="tags"> Tags: <a href="#css">CSS</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_643">Just keep making viewport smaller an smaller, until it happen. Sample width that reproduces: 680px.</div><div class="p" id="_644">Removing <code>white-space: pre-wrap</code> solves it. But then the space between <code>(beta)</code> and <code>OurBigBook.com</code> gets removed.</div><div class="p" id="_645">OK: found out I had already previously solved the same issue with <code>&amp;nbsp;</code>, redoing the "hack". Every header space has to be <code>&amp;nbsp;</code>.</div><div class="h" id="empty-latest-followed-shows-as-there-are-no-articles-on-this-website-yet"><div class="notnav"><h3><a href="todo/empty-latest-followed-shows-as-there-are-no-articles-on-this-website-yet">Empty Latest Followed shows as There are no articles on this website yet</a></h3><span class="hover-meta"> <a class="split" href="todo/empty-latest-followed-shows-as-there-are-no-articles-on-this-website-yet"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/empty-latest-followed-shows-as-there-are-no-articles-on-this-website-yet" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="add-sibling-add-child-buttons-next-to-headers-owned-by-the-current-user"><div class="notnav"><h3><a href="todo/add-sibling-add-child-buttons-next-to-headers-owned-by-the-current-user">Add sibling/add child buttons next to headers owned by the current user</a></h3><span class="hover-meta"> <a class="split" href="todo/add-sibling-add-child-buttons-next-to-headers-owned-by-the-current-user"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/add-sibling-add-child-buttons-next-to-headers-owned-by-the-current-user" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="infinite-navbar-profile-image-refresh-loop-when-there-is-no-internet"><div class="notnav"><h3><a href="todo/infinite-navbar-profile-image-refresh-loop-when-there-is-no-internet">Infinite navbar profile image refresh loop when there is no Internet</a></h3><span class="hover-meta"> <a class="split" href="todo/infinite-navbar-profile-image-refresh-loop-when-there-is-no-internet"></a><span class="metrics"><span class="wcntr"> Words: 64</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/infinite-navbar-profile-image-refresh-loop-when-there-is-no-internet" class="toc"></a><span class="tags"> Tags: <a href="#offline-development">Offline development</a></span></div></nav></div><div class="p" id="_649">This might be something to do with us trying to have a dummy fallbak image when the image URL does not exist.</div><div class="p" id="_650">The request is:<div class="code" id="_651"><div><pre><code>GET https://static.productionready.io/images/smiley-cyrus.jpg net::ERR_INTERNET_DISCONNECTED</code></pre></div></div>so it appears to be trying to infinitely fetch the default image.</div><div class="p" id="_652">For now we seem to have managed to stop it from going infinite by selecting an image that is stored locally in the website.</div><div class="h" id="separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor"><div class="notnav"><h3><a href="todo/separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor">Separate lines with field label for parent and previous sibling on web editor</a></h3><span class="hover-meta"> <a class="split" href="todo/separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor"></a><span class="metrics"><span class="wcntr"> Words: 24</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor" class="toc"></a><span class="tags"> Tags: <a href="#editor">Editor</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_655">Otherwise too confusing what is what when fields are pre-filled, e.g. when editing existing, and in the future when clicking a "add here" button.</div><div class="h" id="allow-showing-article-body-on-article-lists"><div class="notnav"><h3><a href="todo/allow-showing-article-body-on-article-lists">Allow showing article body on article lists</a></h3><span class="hover-meta"> <a class="split" href="todo/allow-showing-article-body-on-article-lists"></a><span class="metrics"><span class="wcntr"> Words: 31</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/allow-showing-article-body-on-article-lists" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_657">Maybe some will be list by default, but some will definitely be article show by default. Notably topic has to show the rendered body by default.</div><div class="p" id="_658">This is a superset of: <a href="https://github.com/ourbigbook/ourbigbook/issues/270">github.com/ourbigbook/ourbigbook/issues/270</a></div><div class="h" id="comment-h1-has-empty-metadata-line-where-likes-would-be-placed"><div class="notnav"><h3><a href="todo/comment-h1-has-empty-metadata-line-where-likes-would-be-placed">Comment h1 has empty metadata line where likes would be placed</a></h3><span class="hover-meta"> <a class="split" href="todo/comment-h1-has-empty-metadata-line-where-likes-would-be-placed"></a><span class="metrics"><span class="wcntr"> Words: 17</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/comment-h1-has-empty-metadata-line-where-likes-would-be-placed" class="toc"></a><span class="tags"> Tags: <a href="#comment">Comment</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_661">Likes will not go under header which does not need to be present, so gonna remove it.</div><div class="h" id="comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment"><div class="notnav"><h3><a href="todo/comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment">Comment autogenerated IDs are wrong when there is header in the comment</a></h3><span class="hover-meta"> <a class="split" href="todo/comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment" class="toc"></a><span class="tags"> Tags: <a href="#comment">Comment</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue"><div class="notnav"><h3><a href="todo/add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue">Add an option to add a prefix to every ID of rendered output to avoid conflicts across comments and issue</a></h3><span class="hover-meta"> <a class="split" href="todo/add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue"></a><span class="metrics"><span class="wcntr"> Words: 102</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue" class="toc"></a><span class="tags"> Tags: <a href="#comment">Comment</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_666"><a href="https://github.com/ourbigbook/ourbigbook/issues/251">github.com/ourbigbook/ourbigbook/issues/251</a></div><div class="p" id="_667">We noticed this is hard to implement, because we want internal links to still work, and just adding a prefix to every ID does not take that into account.</div><div class="p" id="_668">We later noticed that what we actually want to solve the comment use case, is a custom toplevel scope, which we can easily implement with a custom named directory. So... scopes save the day for once?</div><div class="p" id="_669">Will be useful for comments on web, since a single author can make multiple comments, so prefixing by usernme won't be enough.</div><div class="p" id="_670">For topic pages, we can just prefix by username, and that is already currently done.</div><div class="h" id="first-on-hover-heder-self-link-after-table-of-content-activates-table-of-contents-instead-of-header"><div class="notnav"><h3><a href="todo/first-on-hover-heder-self-link-after-table-of-content-activates-table-of-contents-instead-of-header">First on-hover heder self link after table of content activates table of contents instead of header </a></h3><span class="hover-meta"> <a class="split" href="todo/first-on-hover-heder-self-link-after-table-of-content-activates-table-of-contents-instead-of-header"></a><span class="metrics"><span class="wcntr"> Words: 50</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/first-on-hover-heder-self-link-after-table-of-content-activates-table-of-contents-instead-of-header" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_672">E.g.: <a href="https://cirosantilli.com/physics#how-to-teach-and-learn-physics">cirosantilli.com/physics#how-to-teach-and-learn-physics</a></div><div class="p" id="_673">Broken ToC HTML render?</div><div class="p" id="_674">OK, understood the root cause: we moved to rendering the ToC from inside the H rendering function itself, and as a result there is a single toplevel_child_modifier which acts on that entire output.</div><div class="p" id="_675">We'll need to create something more custom to properly handle this case.</div><div class="h" id="h2-on-hover-self-links-are-empty-on-web"><div class="notnav"><h3><a href="todo/h2-on-hover-self-links-are-empty-on-web">h2 on hover self links are empty on Web</a></h3><span class="hover-meta"> <a class="split" href="todo/h2-on-hover-self-links-are-empty-on-web"></a><span class="metrics"><span class="wcntr"> Words: 57</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/h2-on-hover-self-links-are-empty-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_677">And therefore lead users to the toplevel page instead of a link to current header.</div><div class="p" id="_678">The links by clicking on the header itself are correct and go to a dedicated page with it on top. The problem is just for the on-hover links on the margin which we'd like to link to self in the current page.</div><div class="h" id="test-scope-2-appears-after-test-scope-1-on-generated-data"><div class="notnav"><h3><a href="todo/test-scope-2-appears-after-test-scope-1-on-generated-data">Test scope 2 appears after Test scope 1 on generated data</a></h3><span class="hover-meta"> <a class="split" href="todo/test-scope-2-appears-after-test-scope-1-on-generated-data"></a><span class="metrics"><span class="wcntr"> Words: 17</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/test-scope-2-appears-after-test-scope-1-on-generated-data" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_680">OK, everything was reversed, I just hadn't noticed before because there was no numbered test data :-)</div><div class="h" id="prefix-unnumbered-ids-with-the-parent-header-s-id"><div class="notnav"><h3><a href="todo/prefix-unnumbered-ids-with-the-parent-header-s-id">Prefix unnumbered IDs with the parent header's ID</a></h3><span class="hover-meta"> <a class="split" href="todo/prefix-unnumbered-ids-with-the-parent-header-s-id"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/prefix-unnumbered-ids-with-the-parent-header-s-id" class="toc"></a><span class="tags"> Tags: <a href="#dynamic-tree-fetch">Dynamic tree fetch</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="remove-at-from-toc-ids"><div class="notnav"><h3><a href="todo/remove-at-from-toc-ids">Remove @ from toc IDs</a></h3><span class="hover-meta"> <a class="split" href="todo/remove-at-from-toc-ids"></a><span class="metrics"><span class="wcntr"> Words: 8</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/remove-at-from-toc-ids" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_684">E.g. currently have: <a href="http://localhost:3000/barack-obama#toc-@barack-obama/mitochondrion">localhost:3000/barack-obama#toc-@barack-obama/mitochondrion</a> It works, but is ugly.</div><div class="h" id="missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope"><div class="notnav"><h3><a href="todo/missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope">Missing header metadata such as like button, same topic and issue link on headers under a scope</a></h3><span class="hover-meta"> <a class="split" href="todo/missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope" class="toc"></a><span class="tags"> Tags: <a href="#scope">Scope</a></span></div></nav></div><div class="h" id="headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web"><div class="notnav"><h3><a href="todo/headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web">Headers under scope don't have scope on ID leads to ID conflicts and a link misses on Web</a></h3><span class="hover-meta"> <a class="split" href="todo/headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web"></a><span class="metrics"><span class="wcntr"> Words: 142</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web" class="toc"></a><span class="tags"> Tags: <a href="#scope">Scope</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_688">E.g. in:<div class="code" id="_689"><div><pre><code>= x86

== Sample code

== x86 paging
{scope}

=== Sample code</code></pre></div></div></div><div class="p" id="_690">both <code>Sample code</code> headers have <code>id="sample-code"</code>, which would lead to ID conflicts on the same page.</div><div class="p" id="_691">Also, as a result, the toc link from <code>x86</code> intended to go to <code>x86-paging/sample-code</code> misses and opens on a separate page.</div><div class="p" id="_692">I don't know how to solve this besides always including scopes on every ID... This does however lead to ugly local IDs on individual pages which is a bit of a shame... oh cruel life.</div><div class="p" id="_693">We could also have two versions of every page, scoped and non scoped, but things likely go exponential when we start dealing with subscope.</div><div class="p" id="_694">This could mean that a lot of toplevel scope removal work will go to the trash! :-( But what can you do, it is the inevitable outcome of dynamic page fetch?</div><div class="h" id="tags-show-up-twice-under-scopes"><div class="notnav"><h3><a href="todo/tags-show-up-twice-under-scopes">Tags show up twice under scopes</a></h3><span class="hover-meta"> <a class="split" href="todo/tags-show-up-twice-under-scopes"></a><span class="metrics"><span class="wcntr"> Words: 86</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/tags-show-up-twice-under-scopes" class="toc"></a><span class="tags"> Tags: <a href="#scope">Scope</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_697">Happens on CLI, though was first noticed, and most important, on Web due to the all present user prefix.</div><div class="p" id="_698">Was already fully present on the previous deployment but we just completely missed it, e.g.: <a href="https://ourbigbook.com/cirosantilli/physics#physics-education-needs-more-focus-on-understanding-experiments-and-their-history">ourbigbook.com/cirosantilli/physics#physics-education-needs-more-focus-on-understanding-experiments-and-their-history</a></div><div class="p" id="_699">Minimal CLI example to reproduce:</div><div class="p" id="_700">subdir/asdf.bigb</div><div class="code" id="_701"><div><pre><code>= asdf</code></pre></div></div><div class="p" id="_702">subdir/qwer.bigb</div><div class="code" id="_703"><div><pre><code>= qwer
{tag=asdf}</code></pre></div></div><div class="p" id="_704">Then in the rendering of <code>subdir/qwer.html</code>, the tag <code>asdf</code> appears twice.</div><div class="p" id="_705">The root cause is that scope resolution is finding the same thing twice, one as <code>subdir/asdf</code> and then once again with just <code>asdf</code> (which is then correctly resolved).</div><div class="h" id="skip-absolute-link-exit-check-on-web"><div class="notnav"><h3><a href="todo/skip-absolute-link-exit-check-on-web">Skip absolute link exit check on web</a></h3><span class="hover-meta"> <a class="split" href="todo/skip-absolute-link-exit-check-on-web"></a><span class="metrics"><span class="wcntr"> Words: 1</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/skip-absolute-link-exit-check-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_707">Maybe: <a href="https://stackoverflow.com/questions/10687099/how-to-test-if-a-url-string-is-absolute-or-relative">stackoverflow.com/questions/10687099/how-to-test-if-a-url-string-is-absolute-or-relative</a></div><div class="h" id="prop-dangerouslysetinnerhtml-did-not-match-on-some-pages"><div class="notnav"><h3><a href="todo/prop-dangerouslysetinnerhtml-did-not-match-on-some-pages">Prop dangerouslySetInnerHtml did not match on some pages</a></h3><span class="hover-meta"> <a class="split" href="todo/prop-dangerouslysetinnerhtml-did-not-match-on-some-pages"></a><span class="metrics"><span class="wcntr"> Words: 30</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/prop-dangerouslysetinnerhtml-did-not-match-on-some-pages" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_709">Happens on some pages but not others, e.g. <code>barack-obama/ciro-santilli</code>.</div><div class="p" id="_710">OK: that simply happens due to invalid HTML constructs:<div class="list"><ul id="_711"><li id="_712"><a href="https://stackoverflow.com/questions/58266356/what-is-happening-such-i-receive-dangerouslysetinnerhtml-warning-and-empty-conte">stackoverflow.com/questions/58266356/what-is-happening-such-i-receive-dangerouslysetinnerhtml-warning-and-empty-conte</a></li><li id="_713"><a href="https://flaviocopes.com/react-fix-dangerouslysetinnerhtml-did-not-match/">flaviocopes.com/react-fix-dangerouslysetinnerhtml-did-not-match/</a></li></ul></div>and we had invalid or implicitly self closing HTML at: <a href="#self-links-broken-on-ciro-santilli-starting-at-budget-transparency">self links broken on /ciro-santilli starting at Budget transparency</a>.</div><div class="h" id="self-links-broken-on-ciro-santilli-starting-at-budget-transparency"><div class="notnav"><h3><a href="todo/self-links-broken-on-ciro-santilli-starting-at-budget-transparency">Self links broken on /ciro-santilli starting at Budget transparency</a></h3><span class="hover-meta"> <a class="split" href="todo/self-links-broken-on-ciro-santilli-starting-at-budget-transparency"></a><span class="metrics"><span class="wcntr"> Words: 43</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/self-links-broken-on-ciro-santilli-starting-at-budget-transparency" class="toc"></a></div></nav></div><div class="p" id="_714">There is some kind of fundamentally wrong HTML content being rendered, not Web specific: <a href="https://cirosantilli.com/sponsor#budget-transparency">cirosantilli.com/sponsor#budget-transparency</a></div><div class="p" id="_715">Resolution: was due to missing a close tag that appeared when we used <code>\Quote</code> with <code>title</code>. It was even valid HTML OMG, but wront semantic. What a stack.</div><div class="h" id="don-t-move-to-a-separate-page-when-clicking-link-to-image-to-another-header-that-is-already-visible-on-current-page-on-web"><div class="notnav"><h3><a href="todo/don-t-move-to-a-separate-page-when-clicking-link-to-image-to-another-header-that-is-already-visible-on-current-page-on-web">Don't move to a separate page when clicking link to image to another header that is already visible on current page on web</a></h3><span class="hover-meta"> <a class="split" href="todo/don-t-move-to-a-separate-page-when-clicking-link-to-image-to-another-header-that-is-already-visible-on-current-page-on-web"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/don-t-move-to-a-separate-page-when-clicking-link-to-image-to-another-header-that-is-already-visible-on-current-page-on-web" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="h" id="don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web"><div class="notnav"><h3><a href="todo/don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web">Don't move to a separate page when clicking toc links in a page that has scope on web</a></h3><span class="hover-meta"> <a class="split" href="todo/don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web" class="toc"></a><span class="tags"> Tags: <a href="#scope">Scope</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="wiki-link-on-same-line-as-parent-link-on-web-h1"><div class="notnav"><h3><a href="todo/wiki-link-on-same-line-as-parent-link-on-web-h1">Wiki link on same line as parent link on web h1</a></h3><span class="hover-meta"> <a class="split" href="todo/wiki-link-on-same-line-as-parent-link-on-web-h1"></a><span class="metrics"><span class="wcntr"> Words: 26</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/wiki-link-on-same-line-as-parent-link-on-web-h1" class="toc"></a><span class="tags"> Tags: <a href="#web">Web</a></span></div></nav></div><div class="p" id="_720">Likely locally too then right. Will also be more uniform with h2 which now has parent link.</div><div class="p" id="_721">Also seems like empty line (no wiki) is showing: <a href="http://localhost:3000/barack-obama/x86-paging/sample-code">localhost:3000/barack-obama/x86-paging/sample-code</a></div><div class="h" id="h1-arguments-broken-on-web"><div class="notnav"><h3><a href="todo/h1-arguments-broken-on-web">h1 arguments broken on web</a></h3><span class="hover-meta"> <a class="split" href="todo/h1-arguments-broken-on-web"></a><span class="metrics"><span class="wcntr"> Words: 21</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/h1-arguments-broken-on-web" class="toc"></a><span class="tags"> Tags: <a href="#bug">Bug</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_724">Both preview and render.</div><div class="p" id="_725">OK, was not the arguments in general, was <code>{wiki}</code> alone with which I was testing, thank God!</div><div class="h" id="capture-link-clicks-to-headers-in-current-page-and-don-t-change-page"><div class="notnav"><h3><a href="todo/capture-link-clicks-to-headers-in-current-page-and-don-t-change-page">Capture link clicks to headers in current page and don't change page</a></h3><span class="hover-meta"> <a class="split" href="todo/capture-link-clicks-to-headers-in-current-page-and-don-t-change-page"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/capture-link-clicks-to-headers-in-current-page-and-don-t-change-page" class="toc"></a><span class="tags"> Tags: <a href="#dynamic-tree-fetch">Dynamic tree fetch</a>, <a href="#web">Web</a></span></div></nav></div><div class="h" id="remove-word-count-on-web"><div class="notnav"><h3><a href="todo/remove-word-count-on-web">Remove word count on web</a></h3><span class="hover-meta"> <a class="split" href="todo/remove-word-count-on-web"></a><span class="metrics"><span class="wcntr"> Words: 14</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/remove-word-count-on-web" class="toc"></a><span class="tags"> Tags: <a href="#dynamic-tree-fetch">Dynamic tree fetch</a>, <a href="#web">Web</a>, <a href="#word-count">Word count</a></span></div></nav></div><div class="p" id="_731">It is broken, and lazy to fix now.</div><div class="p" id="_732">Can be fixed later at: <a href="#word-count-on-web">word count on web</a>.</div><div class="h" id="fix-toc-links-on-web-missing-scope"><div class="notnav"><h3><a href="todo/fix-toc-links-on-web-missing-scope">Fix ToC links on web, missing scope</a></h3><span class="hover-meta"> <a class="split" href="todo/fix-toc-links-on-web-missing-scope"></a><span class="metrics"><span class="wcntr"> Words: 3</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#closed-issues" class="u"> Closed issues</a><a href="#_toc/fix-toc-links-on-web-missing-scope" class="toc"></a><span class="tags"> Tags: <a href="#dynamic-tree-fetch">Dynamic tree fetch</a>, <a href="#scope">Scope</a>, <a href="#web">Web</a></span></div></nav></div><div class="p" id="_736">Fixed at: aca09f9485bcbc6c8cd184d61871f02e8a602981</div><div class="h" id="tags"><div class="notnav"><h2><a href="todo/tags">Tags</a></h2><span class="hover-meta"> <a class="split" href="todo/tags"></a><span class="metrics"><span class="wcntr"> Words: 32</span><span class="dcnt"> Articles: 34</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="" class="u"> TODO</a><a href="#_toc/tags" class="toc"></a></div></nav></div><div class="h" id="db"><div class="notnav"><h3><a href="todo/db">DB</a></h3><span class="hover-meta"> <a class="split" href="todo/db"></a><span class="metrics"><span class="wcntr"> Words: 5</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/db" class="toc"></a></div></nav></div><div class="p" id="_737">Database specific tasks, usually refactoring.</div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#ref-file-normalization">Id, Ref and File foreign normalization</a></li></ul></div></div><div class="h" id="file"><div class="notnav"><h3><a href="todo/file">File</a></h3><span class="hover-meta"> <a class="split" href="todo/file"></a><span class="metrics"><span class="wcntr"> Words: 13</span><span class="dcnt"> Articles: 1</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/file" class="toc"></a></div></nav></div><div class="p" id="_738">This tag is about handling non-OurBigBook files, notably related to using the <a href=".#h-file-argument"><code>\H</code> <code>file</code> argument</a>.</div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#2">Find a way to show index.html raw files that get overriden by directory listings</a></li><li><a href="#add-a-file-prefix-to-file-headers">Add a <code>File:</code> prefix to <code>{file}</code> headers</a></li><li><a href="#allow-parent-to-point-to-file-header">Allow <code>{parent}</code> to point to <code>{file}</code> header</a></li><li><a href="#put-files-in-a-separate-namespace">Put files in a separate namespace</a></li><li><a href="#put-raw-files-in-a-separate-magic-prefix">Put raw files in a separate magic prefix</a></li><li><a href="#remove-synthetic-asts">Don't use helper synthetic AST nodes, render at render time instead</a></li><li><a href="#render-large-files-on-split-headers">Render large files on split headers</a></li></ul></div></div><div class="h" id="file-autogen"><div class="notnav"><h4><a href="todo/file-autogen">File autogen</a></h4><span class="hover-meta"> <a class="split" href="todo/file-autogen"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#file" class="u"> File</a><a href="#_toc/file-autogen" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#allow-linking-to-auto-generated-files">Allow linking to auto-generated files</a></li><li><a href="#convert-ordered-list-ol-to-a-boolean-argument-of-unordered-lists-ul">Convert ordered list Ol to a boolean argument of unordered lists Ul</a></li><li><a href="#link-to-file-rather-than-raw-if-there-s-split-pages">Link to _file rather than _raw if there's split pages</a></li></ul></div></div><div class="h" id="metadata-section"><div class="notnav"><h3><a href="todo/metadata-section">Metadata section</a></h3><span class="hover-meta"> <a class="split" href="todo/metadata-section"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/metadata-section" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#incoming-links-and-tagged-metadata-does-not-show-synonyms">Incoming links and tagged metadata does not show synonyms</a></li></ul></div></div><div class="h" id="elements"><div class="notnav"><h3><a href="todo/elements">Elements</a></h3><span class="hover-meta"> <a class="split" href="todo/elements"></a><span class="metrics"><span class="dcnt"> Articles: 5</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/elements" class="toc"></a></div></nav></div><div class="h" id="image"><div class="notnav"><h4><a href="todo/image">Image</a></h4><span class="hover-meta"> <a class="split" href="todo/image"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#elements" class="u"> Elements</a><a href="#_toc/image" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#automatically-add-source-to-archive-org-images">Automatically add <code>source</code> to archive.org images</a></li></ul></div></div><div class="h" id="math"><div class="notnav"><h4><a href="todo/math">Math</a></h4><span class="hover-meta"> <a class="split" href="todo/math"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#elements" class="u"> Elements</a><a href="#_toc/math" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#enable-web-math-defines-default-on-non-web">Enable web math defines default on non-web</a></li><li><a href="#enable-web-math-defines-on-web-editor">Enable web math defines on web editor</a></li><li><a href="#serialize-parsed-build-in-katex-macros">Serialize parsed build-in KaTeX macros</a></li></ul></div></div><div class="h" id="table"><div class="notnav"><h4><a href="todo/table">Table</a></h4><span class="hover-meta"> <a class="split" href="todo/table"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#elements" class="u"> Elements</a><a href="#_toc/table" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#lint-tables-for-correct-number-of-columns">Lint tables for correct number of columns</a></li></ul></div></div><div class="h" id="header"><div class="notnav"><h4><a href="todo/header">Header</a></h4><span class="hover-meta"> <a class="split" href="todo/header"></a><span class="metrics"><span class="dcnt"> Articles: 1</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#elements" class="u"> Elements</a><a href="#_toc/header" class="toc"></a></div></nav></div><div class="h" id="synonym"><div class="notnav"><h5><a href="todo/synonym">Synonym</a></h5><span class="hover-meta"> <a class="split" href="todo/synonym"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#header" class="u"> Header</a><a href="#_toc/synonym" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#incoming-links-and-tagged-metadata-does-not-show-synonyms">Incoming links and tagged metadata does not show synonyms</a></li><li><a href="#list-synonyms-on-metadata-section">List synonyms on metadata section</a></li></ul></div></div><div class="h" id="ui"><div class="notnav"><h3><a href="todo/ui">UI</a></h3><span class="hover-meta"> <a class="split" href="todo/ui"></a><span class="metrics"><span class="dcnt"> Articles: 2</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/ui" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#make-open-and-close-arrows-have-the-same-height-on-toc">Make open and close arrows have the same height on ToC</a></li><li><a href="#progress-spinner-after-submit">Progress spinner after submit</a></li></ul></div></div><div class="h" id="firefox"><div class="notnav"><h4><a href="todo/firefox">Firefox</a></h4><span class="hover-meta"> <a class="split" href="todo/firefox"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#ui" class="u"> UI</a><a href="#_toc/firefox" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#firefox-tab-lists-don-t-wrap">Firefox tab lists don't wrap</a></li></ul></div></div><div class="h" id="css"><div class="notnav"><h4><a href="todo/css">CSS</a></h4><span class="hover-meta"> <a class="split" href="todo/css"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#ui" class="u"> UI</a><a href="#_toc/css" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift"><code>(beta)</code> on navbar gets pushed down half way at a specific page width just above mobile shift</a></li><li><a href="#vertical-scrollbar-when-image-title-contains-math-underscore">Vertical scrollbar when image title contains math underscore</a></li></ul></div></div><div class="h" id="web"><div class="notnav"><h3><a href="todo/web">Web</a></h3><span class="hover-meta"> <a class="split" href="todo/web"></a><span class="metrics"><span class="wcntr"> Words: 14</span><span class="dcnt"> Articles: 9</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/web" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#4">Reorder convert to move Article.destroySideEffect before File.destroy</a></li><li><a href="#5">Nested set index corruption</a></li><li><a href="#add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue">Add an option to add a prefix to every ID of rendered output to avoid conflicts across comments and issue</a></li><li><a href="#add-button-on-web-to-move-article-to-trash-on-web">Add button on web to move article to trash on web</a></li><li><a href="#add-sibling-add-child-buttons-next-to-headers-owned-by-the-current-user">Add sibling/add child buttons next to headers owned by the current user</a></li><li><a href="#add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user">Add sibling/add child buttons next to toc entries of articles owned by the current user</a></li><li><a href="#allow-creating-new-pages-under-scope-on-web">Allow creating new pages under scope on web</a></li><li><a href="#allow-disambiguate-and-id-header-arguments-on-web">Allow disambiguate and id header arguments on web</a></li><li><a href="#allow-showing-article-body-on-article-lists">Allow showing article body on article lists</a></li><li><a href="#allow-user-to-edit-other-user-s-articles">Allow user to edit other user's articles</a></li><li><a href="#article-create-and-update-slow-on-web">Article create and update slow on web</a></li><li><a href="#at-mention-and-topics-locally">At mention and topics locally</a></li><li><a href="#at-mention-and-topics-on-web">At mention and topics on web</a></li><li><a href="#beta-on-navbar-gets-pushed-down-half-way-at-a-specific-page-width-just-above-mobile-shift"><code>(beta)</code> on navbar gets pushed down half way at a specific page width just above mobile shift</a></li><li><a href="#cannot-link-from-comment-to-article">Cannot link from comment to article</a></li><li><a href="#capture-link-clicks-to-headers-in-current-page-and-don-t-change-page">Capture link clicks to headers in current page and don't change page</a></li><li><a href="#clicking-on-the-comment-header-does-not-highlight-the-header-line">Clicking on the comment header does not highlight the header line</a></li><li><a href="#comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment">Comment autogenerated IDs are wrong when there is header in the comment</a></li><li><a href="#comment-h1-has-empty-metadata-line-where-likes-would-be-placed">Comment h1 has empty metadata line where likes would be placed</a></li><li><a href="#comment-h1-self-link-is-empty-and-thus-refreshes-the-page">Comment h1 self link is empty and thus refreshes the page</a></li><li><a href="#delete-article">Delete article</a></li><li><a href="#don-t-move-to-a-separate-page-when-clicking-link-to-image-to-another-header-that-is-already-visible-on-current-page-on-web">Don't move to a separate page when clicking link to image to another header that is already visible on current page on web</a></li><li><a href="#don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web">Don't move to a separate page when clicking toc links in a page that has scope on web</a></li><li><a href="#don-t-skip-parent-previous-sibling-updates-on-web-uploads">Don't skip parent/previous sibling updates on --web uploads</a></li><li><a href="#donate-button-on-web">Donate button on web</a></li><li><a href="#empty-latest-followed-shows-as-there-are-no-articles-on-this-website-yet">Empty Latest Followed shows as There are no articles on this website yet</a></li><li><a href="#enable-web-math-defines-default-on-non-web">Enable web math defines default on non-web</a></li><li><a href="#enable-web-math-defines-on-web-editor">Enable web math defines on web editor</a></li><li><a href="#encrypted-client-hello">Encrypted client hello</a></li><li><a href="#firefox-tab-lists-don-t-wrap">Firefox tab lists don't wrap</a></li><li><a href="#first-on-hover-heder-self-link-after-table-of-content-activates-table-of-contents-instead-of-header">First on-hover heder self link after table of content activates table of contents instead of header </a></li><li><a href="#fix-toc-links-on-web-missing-scope">Fix ToC links on web, missing scope</a></li><li><a href="#follow-topic">Follow topic</a></li><li><a href="#following-and-followed-tabs-are-swapped">Following and followed tabs are swapped</a></li><li><a href="#forbid-uppercase-ids-on-web-and-cli-by-default">Forbid uppercase IDs on web and CLI by default</a></li><li><a href="#fragment-redirects-not-working-on-web">Fragment redirects not working on web</a></li><li><a href="#h1-arguments-broken-on-web">H1 arguments broken on web</a></li><li><a href="#h2-on-hover-self-links-are-empty-on-web">H2 on hover self links are empty on Web</a></li><li><a href="#handle-email-replies-to-notification-at-ourbigbook-com">Handle email replies to notification@ourbigbook.com</a></li><li><a href="#handle-web-upload-after-local-article-renaming-with-synonym-redirection-set">Handle web upload after local article renaming with synonym redirection set</a></li><li><a href="#headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web">Headers under scope don't have scope on ID leads to ID conflicts and a link misses on Web</a></li><li><a href="#hide-unconfirmed-users">Hide unconfirmed users</a></li><li><a href="#include-should-work-transparently-with-readme-in-subdirectory">Include should work transparently with README in subdirectory</a></li><li><a href="#inject-react-header-metadata-on-each-header-separately">Inject React header metadata on each header separately</a></li><li><a href="#like-and-unlike-requests-are-very-slow">Like and unlike requests are very slow</a></li><li><a href="#like-comments">Like comments</a></li><li><a href="#links-to-synonym-header-have-fragment">Links to synonym header have fragment</a></li><li><a href="#live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article">Live error checking as you type on editor if chosen previous sibling is not a child of the selected parent article</a></li><li><a href="#load-more-articles">Load more articles</a></li><li><a href="#load-more-toc-entrie">Load more ToC entrie</a></li><li><a href="#make-articles-removed-locally-empty-on-web-upload">Make articles removed locally empty on web upload</a></li><li><a href="#make-rendered-issue-and-comment-fragments-as-short-as-possible">Make rendered issue and comment fragments as short as possible</a></li><li><a href="#monaco-editor-requires-web">Monaco editor requires web</a></li><li><a href="#move-articles-deleted-locally-to-under-a-trash-article-on-web">Move articles deleted locally to under a trash article on web</a></li><li><a href="#multiheader-editing">Multiheader editing</a></li><li><a href="#option-to-add-view-on-ourbigbook-link-on-header-metadata-of-cli-static-renders">Option to add view on ourbigbook link on header metadata of CLI static renders</a></li><li><a href="#parentid-dropdown-autocomplete">ParentId dropdown autocomplete</a></li><li><a href="#pass-previoussiblingid-on-web-upload">Pass previousSiblingId on web upload</a></li><li><a href="#prefix-unnumbered-ids-with-the-parent-header-s-id">Prefix unnumbered IDs with the parent header's ID</a></li><li><a href="#prevent-full-page-reload-on-links-using-our-existing-link-capture">Prevent full page reload on links using our existing link capture</a></li><li><a href="#progress-spinner-after-submit">Progress spinner after submit</a></li><li><a href="#prop-dangerouslysetinnerhtml-did-not-match-on-some-pages">Prop dangerouslySetInnerHtml did not match on some pages</a></li><li><a href="#reach-the-same-performance-as-static-website-with-dynamic-tree">Reach the same performance as static website with dynamic tree</a></li><li><a href="#remove-at-from-toc-ids">Remove @ from toc IDs</a></li><li><a href="#remove-synonym-from-json-use-ref-type-synonym-instead">Remove synonym from JSON, use Ref.type = synonym instead</a></li><li><a href="#remove-the-path-parameter-from-the-article-creation-api">Remove the path parameter from the article creation API</a></li><li><a href="#remove-word-count-on-web">Remove word count on web</a></li><li><a href="#render-ancestors-incoming-links-and-tagged-on-web">Render ancestors, incoming links and tagged on web</a></li><li><a href="#second-meta-line-showing-up-on-index-page-even-if-empty">Second meta line showing up on index page even if empty</a></li><li><a href="#separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor">Separate lines with field label for parent and previous sibling on web editor</a></li><li><a href="#shorthand-block-quotes">Shorthand block quotes</a></li><li><a href="#show-like-and-follow-date-on-user-like-follow-lists">Show like and follow date on user like follow lists</a></li><li><a href="#show-likers-list-on-article-page">Show likers list on article page</a></li><li><a href="#skip-absolute-link-exit-check-on-web">Skip absolute link exit check on web</a></li><li><a href="#skip-re-render-from-api-if-article-was-unchanged">Skip re-render from API if article was unchanged</a></li><li><a href="#start-a-basic-notification-system">Start a basic notification system</a></li><li><a href="#statically-render-links-to-issues-and-topic-under-each-header-for-better-seo">Statically render links to issues and topic under each header for better SEO</a></li><li><a href="#store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees">Store SHA of each article + descendants and skip API re-renders for entire subtrees</a></li><li><a href="#synonym-redirects-on-web">Synonym redirects on web</a></li><li><a href="#tags-show-up-twice-under-scopes">Tags show up twice under scopes</a></li><li><a href="#test-scope-2-appears-after-test-scope-1-on-generated-data">Test scope 2 appears after Test scope 1 on generated data</a></li><li><a href="#toc-js-folding-broken-on-web">ToC Js folding broken on Web</a></li><li><a href="#use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article">Use same parent title if the current user has a matching article when clicking "Create my own version of article" </a></li><li><a href="#view-article-and-issue-likers-and-followers">View article and issue likers and followers</a></li><li><a href="#view-article-source-on-web">View article source on web</a></li><li><a href="#web-create-multiple-headers">Allow creation of multiple headers in one go on web</a></li><li><a href="#web-header-metadata-to-widgets">Move all header metadata from source to HTML in Web</a></li><li><a href="#wiki-link-on-same-line-as-parent-link-on-web-h1">Wiki link on same line as parent link on web h1</a></li><li><a href="#word-count-on-web">Word count on web</a></li><li><a href="#wysiwyg">WYSIWYG</a></li></ul></div></div><div class="h" id="web-upload"><div class="notnav"><h4><a href="todo/web-upload">Web upload</a></h4><span class="hover-meta"> <a class="split" href="todo/web-upload"></a><span class="metrics"><span class="wcntr"> Words: 14</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/web-upload" class="toc"></a></div></nav></div><div class="p" id="_739">This tag is about <code>ourbigbook --web</code> uploading from the local filesystem to OurBigBook Web.</div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#cli-nosplit-points-to-self">CLI nosplit points to self</a></li><li><a href="#don-t-skip-parent-previous-sibling-updates-on-web-uploads">Don't skip parent/previous sibling updates on --web uploads</a></li><li><a href="#handle-web-upload-after-local-article-renaming-with-synonym-redirection-set">Handle web upload after local article renaming with synonym redirection set</a></li><li><a href="#make-articles-removed-locally-empty-on-web-upload">Make articles removed locally empty on web upload</a></li><li><a href="#ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset">Ourbigbook.com --web uploads sometimes fail with ETIMEDOUT or ECONNRESET</a></li><li><a href="#pass-previoussiblingid-on-web-upload">Pass previousSiblingId on web upload</a></li><li><a href="#skip-re-render-from-api-if-article-was-unchanged">Skip re-render from API if article was unchanged</a></li><li><a href="#store-sha-of-each-article-plus-descendants-and-skip-api-re-renders-for-entire-subtrees">Store SHA of each article + descendants and skip API re-renders for entire subtrees</a></li><li><a href="#web-upload-fails-when-renaming-a-header-to-a-synonym">Web upload fails when renaming a header to a synonym</a></li></ul></div></div><div class="h" id="comment"><div class="notnav"><h4><a href="todo/comment">Comment</a></h4><span class="hover-meta"> <a class="split" href="todo/comment"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/comment" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#add-an-option-to-add-a-prefix-to-every-id-of-rendered-output-to-avoid-conflicts-across-comments-and-issue">Add an option to add a prefix to every ID of rendered output to avoid conflicts across comments and issue</a></li><li><a href="#cannot-link-from-comment-to-article">Cannot link from comment to article</a></li><li><a href="#clicking-on-the-comment-header-does-not-highlight-the-header-line">Clicking on the comment header does not highlight the header line</a></li><li><a href="#comment-autogenerated-ids-are-wrong-when-there-is-header-in-the-comment">Comment autogenerated IDs are wrong when there is header in the comment</a></li><li><a href="#comment-h1-has-empty-metadata-line-where-likes-would-be-placed">Comment h1 has empty metadata line where likes would be placed</a></li><li><a href="#comment-h1-self-link-is-empty-and-thus-refreshes-the-page">Comment h1 self link is empty and thus refreshes the page</a></li><li><a href="#make-rendered-issue-and-comment-fragments-as-short-as-possible">Make rendered issue and comment fragments as short as possible</a></li></ul></div></div><div class="h" id="dynamic-tree-fetch"><div class="notnav"><h4><a href="todo/dynamic-tree-fetch">Dynamic tree fetch</a></h4><span class="hover-meta"> <a class="split" href="todo/dynamic-tree-fetch"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/dynamic-tree-fetch" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#capture-link-clicks-to-headers-in-current-page-and-don-t-change-page">Capture link clicks to headers in current page and don't change page</a></li><li><a href="#fix-toc-links-on-web-missing-scope">Fix ToC links on web, missing scope</a></li><li><a href="#load-more-articles">Load more articles</a></li><li><a href="#load-more-toc-entrie">Load more ToC entrie</a></li><li><a href="#prefix-unnumbered-ids-with-the-parent-header-s-id">Prefix unnumbered IDs with the parent header's ID</a></li><li><a href="#remove-word-count-on-web">Remove word count on web</a></li><li><a href="#subsections-missing-on-web-dynamic-tree">Subsections missing on web dynamic tree</a></li></ul></div></div><div class="h" id="editor"><div class="notnav"><h4><a href="todo/editor">Editor</a></h4><span class="hover-meta"> <a class="split" href="todo/editor"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/editor" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#enable-web-math-defines-on-web-editor">Enable web math defines on web editor</a></li><li><a href="#live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article">Live error checking as you type on editor if chosen previous sibling is not a child of the selected parent article</a></li><li><a href="#monaco-editor-requires-web">Monaco editor requires web</a></li><li><a href="#separate-lines-with-field-label-for-parent-and-previous-sibling-on-web-editor">Separate lines with field label for parent and previous sibling on web editor</a></li><li><a href="#wysiwyg">WYSIWYG</a></li></ul></div></div><div class="h" id="error-checking"><div class="notnav"><h4><a href="todo/error-checking">Error checking</a></h4><span class="hover-meta"> <a class="split" href="todo/error-checking"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/error-checking" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#1">Internal cross reference to non-existent ID is not checked before render the second time we try to convert</a></li><li><a href="#live-error-checking-as-you-type-on-editor-if-chosen-previous-sibling-is-not-a-child-of-the-selected-parent-article">Live error checking as you type on editor if chosen previous sibling is not a child of the selected parent article</a></li></ul></div></div><div class="h" id="include"><div class="notnav"><h4><a href="todo/include">Include</a></h4><span class="hover-meta"> <a class="split" href="todo/include"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/include" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#include-should-work-transparently-with-readme-in-subdirectory">Include should work transparently with README in subdirectory</a></li></ul></div></div><div class="h" id="issue"><div class="notnav"><h4><a href="todo/issue">Issue</a></h4><span class="hover-meta"> <a class="split" href="todo/issue"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/issue" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#like-comments">Like comments</a></li><li><a href="#view-article-and-issue-likers-and-followers">View article and issue likers and followers</a></li></ul></div></div><div class="h" id="offline-development"><div class="notnav"><h4><a href="todo/offline-development">Offline development</a></h4><span class="hover-meta"> <a class="split" href="todo/offline-development"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/offline-development" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#infinite-navbar-profile-image-refresh-loop-when-there-is-no-internet">Infinite navbar profile image refresh loop when there is no Internet</a></li><li><a href="#monaco-editor-requires-web">Monaco editor requires web</a></li></ul></div></div><div class="h" id="topic"><div class="notnav"><h4><a href="todo/topic">Topic</a></h4><span class="hover-meta"> <a class="split" href="todo/topic"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#web" class="u"> Web</a><a href="#_toc/topic" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#follow-topic">Follow topic</a></li><li><a href="#use-same-parent-title-if-the-current-user-has-a-matching-article-when-clicking-create-my-own-version-of-article">Use same parent title if the current user has a matching article when clicking "Create my own version of article" </a></li></ul></div></div><div class="h" id="cli"><div class="notnav"><h3><a href="todo/cli">CLI</a></h3><span class="hover-meta"> <a class="split" href="todo/cli"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/cli" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#cli-nosplit-points-to-self">CLI nosplit points to self</a></li><li><a href="#remove-scope-from-toc-entry-ids">Remove scope from toc entry IDs</a></li></ul></div></div><div class="h" id="word-count"><div class="notnav"><h3><a href="todo/word-count">Word count</a></h3><span class="hover-meta"> <a class="split" href="todo/word-count"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/word-count" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#3">Cross source file word count is always 0 on ToC hover</a></li><li><a href="#remove-word-count-on-web">Remove word count on web</a></li><li><a href="#word-count-on-web">Word count on web</a></li></ul></div></div><div class="h" id="lib"><div class="notnav"><h3><a href="todo/lib">Lib</a></h3><span class="hover-meta"> <a class="split" href="todo/lib"></a><span class="metrics"><span class="dcnt"> Articles: 1</span></span></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/lib" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#image-title-with-x-to-image-with-content-incorrectly-disallowed">Image title with x to image with content incorrectly disallowed</a></li><li><a href="#lint-tables-for-correct-number-of-columns">Lint tables for correct number of columns</a></li><li><a href="#remove-all-unnecessary-newlines-from-html-output">Remove all unnecessary newlines from HTML output</a></li></ul></div></div><div class="h" id="tag"><div class="notnav"><h4><a href="todo/tag">Tag</a></h4><span class="hover-meta"> <a class="split" href="todo/tag"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#lib" class="u"> Lib</a><a href="#_toc/tag" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#show-tagged-list-of-non-toplevel-pages">Show tagged list of non toplevel pages</a></li><li><a href="#undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id">Undefined tag error message for directory conversion says header ID is not defined instead of tag ID</a></li></ul></div></div><div class="h" id="bug"><div class="notnav"><h3><a href="todo/bug">Bug</a></h3><span class="hover-meta"> <a class="split" href="todo/bug"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/bug" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#1">Internal cross reference to non-existent ID is not checked before render the second time we try to convert</a></li><li><a href="#5">Nested set index corruption</a></li><li><a href="#h1-arguments-broken-on-web">H1 arguments broken on web</a></li><li><a href="#header-followed-by-paragraph-without-blank-line-does-not-split-correctly">Header followed by paragraph without blank line does not split correctly</a></li><li><a href="#links-to-synonym-header-have-fragment">Links to synonym header have fragment</a></li><li><a href="#ourbigbook-com-web-uploads-sometimes-fail-with-etimedout-or-econnreset">Ourbigbook.com --web uploads sometimes fail with ETIMEDOUT or ECONNRESET</a></li><li><a href="#split-out-bigb-and-out-web">Split _out/bigb and _out/web</a></li><li><a href="#store-auto-formated-bigb-source-on-web">Store auto-formated bigb source on web</a></li><li><a href="#subsections-missing-on-web-dynamic-tree">Subsections missing on web dynamic tree</a></li><li><a href="#toc-js-folding-broken-on-web">ToC Js folding broken on Web</a></li><li><a href="#toc-link-on-headers-not-opening-collapsed-toc-entries">ToC link on headers not opening collapsed toc entries</a></li><li><a href="#undefined-tag-error-message-for-directory-conversion-says-header-id-is-not-defined-instead-of-tag-id">Undefined tag error message for directory conversion says header ID is not defined instead of tag ID</a></li></ul></div></div><div class="h" id="scope"><div class="notnav"><h3><a href="todo/scope">Scope</a></h3><span class="hover-meta"> <a class="split" href="todo/scope"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/scope" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#allow-creating-new-pages-under-scope-on-web">Allow creating new pages under scope on web</a></li><li><a href="#allow-disambiguate-and-id-header-arguments-on-web">Allow disambiguate and id header arguments on web</a></li><li><a href="#don-t-move-to-a-separate-page-when-clicking-toc-links-in-a-page-that-has-scope-on-web">Don't move to a separate page when clicking toc links in a page that has scope on web</a></li><li><a href="#fix-toc-links-on-web-missing-scope">Fix ToC links on web, missing scope</a></li><li><a href="#headers-under-scope-don-t-have-scope-on-id-leads-to-id-conflicts-and-a-link-misses-on-web">Headers under scope don't have scope on ID leads to ID conflicts and a link misses on Web</a></li><li><a href="#missing-header-metadata-such-as-like-button-same-topic-and-issue-link-on-headers-under-a-scope">Missing header metadata such as like button, same topic and issue link on headers under a scope</a></li><li><a href="#remove-scope-from-toc-entry-ids">Remove scope from toc entry IDs</a></li><li><a href="#tags-show-up-twice-under-scopes">Tags show up twice under scopes</a></li></ul></div></div><div class="h" id="performance"><div class="notnav"><h3><a href="todo/performance">Performance</a></h3><span class="hover-meta"> <a class="split" href="todo/performance"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/performance" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#article-create-and-update-slow-on-web">Article create and update slow on web</a></li><li><a href="#like-and-unlike-requests-are-very-slow">Like and unlike requests are very slow</a></li><li><a href="#reach-the-same-performance-as-static-website-with-dynamic-tree">Reach the same performance as static website with dynamic tree</a></li></ul></div></div><div class="h" id="publicity"><div class="notnav"><h3><a href="todo/publicity">Publicity</a></h3><span class="hover-meta"> <a class="split" href="todo/publicity"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/publicity" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#computer-sticker">Computer sticker</a></li><li><a href="#design-a-project-banner">Design a project banner</a></li><li><a href="#flyers">Flyers</a></li><li><a href="#photos-of-the-merchandise">Photos of the merchandise!</a></li></ul></div></div><div class="h" id="publish"><div class="notnav"><h3><a href="todo/publish">Publish</a></h3><span class="hover-meta"> <a class="split" href="todo/publish"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/publish" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#option-to-add-zip-of-local-conversion-to-converted-github-pages-website">Option to add zip of local conversion to converted GitHub pages website</a></li></ul></div></div><div class="h" id="refactor"><div class="notnav"><h3><a href="todo/refactor">Refactor</a></h3><span class="hover-meta"> <a class="split" href="todo/refactor"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/refactor" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#4">Reorder convert to move Article.destroySideEffect before File.destroy</a></li><li><a href="#remove-synonym-from-json-use-ref-type-synonym-instead">Remove synonym from JSON, use Ref.type = synonym instead</a></li><li><a href="#remove-synthetic-asts">Don't use helper synthetic AST nodes, render at render time instead</a></li></ul></div></div><div class="h" id="toc"><div class="notnav"><h3><a href="todo/toc">ToC</a></h3><span class="hover-meta"> <a class="split" href="todo/toc"></a></span></div><nav class="h-nav h-nav-toplevel"><div class="nav"><a href="#tags" class="u"> Tags</a><a href="#_toc/toc" class="toc"></a></div></nav></div><div class="p"><b><span title="Tags" class="fa-solid-900 icon">ï€¬</span> Tagged</b><div class="list"><ul><li><a href="#add-sibling-add-child-buttons-next-to-toc-entries-of-articles-owned-by-the-current-user">Add sibling/add child buttons next to toc entries of articles owned by the current user</a></li><li><a href="#make-open-and-close-arrows-have-the-same-height-on-toc">Make open and close arrows have the same height on ToC</a></li><li><a href="#toc-js-folding-broken-on-web">ToC Js folding broken on Web</a></li></ul></div></div><h2 id="_ancestors"><a href="#_ancestors"><span class="fa-solid-900 icon">ï¢</span> Ancestors <span class="meta">(1)</span></a></h2><div class="list"><ol><li><a href="."><span title="Home" class="fa-solid-900 icon">ï€•</span> Home</a></li></ol></div></main>
<footer>
<div>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> unless noted</div>
<div><a href="_dir">Website source code</a></div>
<div>Source code for this page: <a href="_file/todo.bigb">todo.bigb</a></div>
</footer>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2XSEK2ND00"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2XSEK2ND00');
</script>
<script src="https://giscus.app/client.js"
        data-repo="ourbigbook/ourbigbook"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyMTEyOTA2NzA="
        data-category="giscus"
        data-category-id="DIC_kwDODJgKLs4CZ61S"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark_high_contrast"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
<script>
window.ourbigbook_split_headers = true;
window.ourbigbook_html_x_extension = false;
window.ourbigbook_redirect_prefix = "todo/";
</script>
<script src="_obb/dist/ourbigbook_runtime.js"></script><script>ourbigbook_runtime.ourbigbook_runtime()</script></body>
</html>
